{"version":3,"sources":["out-vscode-reh-web/vs/base/common/worker/fake","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/arraysFind.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/collections.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/errors.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/arrays.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/functional.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/iterator.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/lazy.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/linkedList.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/map.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/lifecycle.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/platform.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/stopwatch.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/event.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/cancellation.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/cache.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/strings.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/types.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/objects.ts","out-vscode-reh-web/vs/base/common/worker/file:/home/runner/work/code-server/code-server/lib/vscode/src/vs/base/common/worker/simpleWorker.ts"],"sourcesContent":["}).call(this);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Comparator } from './arrays';\n\nexport function findLast<T>(array: readonly T[], predicate: (item: T) => boolean, fromIdx?: number): T | undefined {\n\tconst idx = findLastIdx(array, predicate);\n\tif (idx === -1) {\n\t\treturn undefined;\n\t}\n\treturn array[idx];\n}\n\nexport function findLastIdx<T>(array: readonly T[], predicate: (item: T) => boolean, fromIndex = array.length - 1): number {\n\tfor (let i = fromIndex; i >= 0; i--) {\n\t\tconst element = array[i];\n\n\t\tif (predicate(element)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\n/**\n * Finds the last item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n *\n * @returns `undefined` if no item matches, otherwise the last item that matches the predicate.\n */\nexport function findLastMonotonous<T>(array: readonly T[], predicate: (item: T) => boolean): T | undefined {\n\tconst idx = findLastIdxMonotonous(array, predicate);\n\treturn idx === -1 ? undefined : array[idx];\n}\n\n/**\n * Finds the last item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n *\n * @returns `startIdx - 1` if predicate is false for all items, otherwise the index of the last item that matches the predicate.\n */\nexport function findLastIdxMonotonous<T>(array: readonly T[], predicate: (item: T) => boolean, startIdx = 0, endIdxEx = array.length): number {\n\tlet i = startIdx;\n\tlet j = endIdxEx;\n\twhile (i < j) {\n\t\tconst k = Math.floor((i + j) / 2);\n\t\tif (predicate(array[k])) {\n\t\t\ti = k + 1;\n\t\t} else {\n\t\t\tj = k;\n\t\t}\n\t}\n\treturn i - 1;\n}\n\n/**\n * Finds the first item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[false, ..., false, true, ..., true]`!\n *\n * @returns `undefined` if no item matches, otherwise the first item that matches the predicate.\n */\nexport function findFirstMonotonous<T>(array: readonly T[], predicate: (item: T) => boolean): T | undefined {\n\tconst idx = findFirstIdxMonotonousOrArrLen(array, predicate);\n\treturn idx === array.length ? undefined : array[idx];\n}\n\n/**\n * Finds the first item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[false, ..., false, true, ..., true]`!\n *\n * @returns `endIdxEx` if predicate is false for all items, otherwise the index of the first item that matches the predicate.\n */\nexport function findFirstIdxMonotonousOrArrLen<T>(array: readonly T[], predicate: (item: T) => boolean, startIdx = 0, endIdxEx = array.length): number {\n\tlet i = startIdx;\n\tlet j = endIdxEx;\n\twhile (i < j) {\n\t\tconst k = Math.floor((i + j) / 2);\n\t\tif (predicate(array[k])) {\n\t\t\tj = k;\n\t\t} else {\n\t\t\ti = k + 1;\n\t\t}\n\t}\n\treturn i;\n}\n\nexport function findFirstIdxMonotonous<T>(array: readonly T[], predicate: (item: T) => boolean, startIdx = 0, endIdxEx = array.length): number {\n\tconst idx = findFirstIdxMonotonousOrArrLen(array, predicate, startIdx, endIdxEx);\n\treturn idx === array.length ? -1 : idx;\n}\n\n/**\n * Use this when\n * * You have a sorted array\n * * You query this array with a monotonous predicate to find the last item that has a certain property.\n * * You query this array multiple times with monotonous predicates that get weaker and weaker.\n */\nexport class MonotonousArray<T> {\n\tpublic static assertInvariants = false;\n\n\tprivate _findLastMonotonousLastIdx = 0;\n\tprivate _prevFindLastPredicate: ((item: T) => boolean) | undefined;\n\n\tconstructor(private readonly _array: readonly T[]) {\n\t}\n\n\t/**\n\t * The predicate must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n\t * For subsequent calls, current predicate must be weaker than (or equal to) the previous predicate, i.e. more entries must be `true`.\n\t */\n\tfindLastMonotonous(predicate: (item: T) => boolean): T | undefined {\n\t\tif (MonotonousArray.assertInvariants) {\n\t\t\tif (this._prevFindLastPredicate) {\n\t\t\t\tfor (const item of this._array) {\n\t\t\t\t\tif (this._prevFindLastPredicate(item) && !predicate(item)) {\n\t\t\t\t\t\tthrow new Error('MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._prevFindLastPredicate = predicate;\n\t\t}\n\n\t\tconst idx = findLastIdxMonotonous(this._array, predicate, this._findLastMonotonousLastIdx);\n\t\tthis._findLastMonotonousLastIdx = idx + 1;\n\t\treturn idx === -1 ? undefined : this._array[idx];\n\t}\n}\n\n/**\n * Returns the first item that is equal to or greater than every other item.\n*/\nexport function findFirstMaxBy<T>(array: readonly T[], comparator: Comparator<T>): T | undefined {\n\tif (array.length === 0) {\n\t\treturn undefined;\n\t}\n\n\tlet max = array[0];\n\tfor (let i = 1; i < array.length; i++) {\n\t\tconst item = array[i];\n\t\tif (comparator(item, max) > 0) {\n\t\t\tmax = item;\n\t\t}\n\t}\n\treturn max;\n}\n\n/**\n * Returns the last item that is equal to or greater than every other item.\n*/\nexport function findLastMaxBy<T>(array: readonly T[], comparator: Comparator<T>): T | undefined {\n\tif (array.length === 0) {\n\t\treturn undefined;\n\t}\n\n\tlet max = array[0];\n\tfor (let i = 1; i < array.length; i++) {\n\t\tconst item = array[i];\n\t\tif (comparator(item, max) >= 0) {\n\t\t\tmax = item;\n\t\t}\n\t}\n\treturn max;\n}\n\n/**\n * Returns the first item that is equal to or less than every other item.\n*/\nexport function findFirstMinBy<T>(array: readonly T[], comparator: Comparator<T>): T | undefined {\n\treturn findFirstMaxBy(array, (a, b) => -comparator(a, b));\n}\n\nexport function findMaxIdxBy<T>(array: readonly T[], comparator: Comparator<T>): number {\n\tif (array.length === 0) {\n\t\treturn -1;\n\t}\n\n\tlet maxIdx = 0;\n\tfor (let i = 1; i < array.length; i++) {\n\t\tconst item = array[i];\n\t\tif (comparator(item, array[maxIdx]) > 0) {\n\t\t\tmaxIdx = i;\n\t\t}\n\t}\n\treturn maxIdx;\n}\n\n/**\n * Returns the first mapped value of the array which is not undefined.\n */\nexport function mapFindFirst<T, R>(items: Iterable<T>, mapFn: (value: T) => R | undefined): R | undefined {\n\tfor (const value of items) {\n\t\tconst mapped = mapFn(value);\n\t\tif (mapped !== undefined) {\n\t\t\treturn mapped;\n\t\t}\n\t}\n\n\treturn undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * An interface for a JavaScript object that\n * acts a dictionary. The keys are strings.\n */\nexport type IStringDictionary<V> = Record<string, V>;\n\n/**\n * An interface for a JavaScript object that\n * acts a dictionary. The keys are numbers.\n */\nexport type INumberDictionary<V> = Record<number, V>;\n\n/**\n * Groups the collection into a dictionary based on the provided\n * group function.\n */\nexport function groupBy<K extends string | number | symbol, V>(data: V[], groupFn: (element: V) => K): Record<K, V[]> {\n\tconst result: Record<K, V[]> = Object.create(null);\n\tfor (const element of data) {\n\t\tconst key = groupFn(element);\n\t\tlet target = result[key];\n\t\tif (!target) {\n\t\t\ttarget = result[key] = [];\n\t\t}\n\t\ttarget.push(element);\n\t}\n\treturn result;\n}\n\nexport function diffSets<T>(before: Set<T>, after: Set<T>): { removed: T[]; added: T[] } {\n\tconst removed: T[] = [];\n\tconst added: T[] = [];\n\tfor (const element of before) {\n\t\tif (!after.has(element)) {\n\t\t\tremoved.push(element);\n\t\t}\n\t}\n\tfor (const element of after) {\n\t\tif (!before.has(element)) {\n\t\t\tadded.push(element);\n\t\t}\n\t}\n\treturn { removed, added };\n}\n\nexport function diffMaps<K, V>(before: Map<K, V>, after: Map<K, V>): { removed: V[]; added: V[] } {\n\tconst removed: V[] = [];\n\tconst added: V[] = [];\n\tfor (const [index, value] of before) {\n\t\tif (!after.has(index)) {\n\t\t\tremoved.push(value);\n\t\t}\n\t}\n\tfor (const [index, value] of after) {\n\t\tif (!before.has(index)) {\n\t\t\tadded.push(value);\n\t\t}\n\t}\n\treturn { removed, added };\n}\n\n/**\n * Computes the intersection of two sets.\n *\n * @param setA - The first set.\n * @param setB - The second iterable.\n * @returns A new set containing the elements that are in both `setA` and `setB`.\n */\nexport function intersection<T>(setA: Set<T>, setB: Iterable<T>): Set<T> {\n\tconst result = new Set<T>();\n\tfor (const elem of setB) {\n\t\tif (setA.has(elem)) {\n\t\t\tresult.add(elem);\n\t\t}\n\t}\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ErrorListenerCallback {\n\t(error: any): void;\n}\n\nexport interface ErrorListenerUnbind {\n\t(): void;\n}\n\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\nexport class ErrorHandler {\n\tprivate unexpectedErrorHandler: (e: any) => void;\n\tprivate listeners: ErrorListenerCallback[];\n\n\tconstructor() {\n\n\t\tthis.listeners = [];\n\n\t\tthis.unexpectedErrorHandler = function (e: any) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (e.stack) {\n\t\t\t\t\tif (ErrorNoTelemetry.isErrorNoTelemetry(e)) {\n\t\t\t\t\t\tthrow new ErrorNoTelemetry(e.message + '\\n\\n' + e.stack);\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow new Error(e.message + '\\n\\n' + e.stack);\n\t\t\t\t}\n\n\t\t\t\tthrow e;\n\t\t\t}, 0);\n\t\t};\n\t}\n\n\taddListener(listener: ErrorListenerCallback): ErrorListenerUnbind {\n\t\tthis.listeners.push(listener);\n\n\t\treturn () => {\n\t\t\tthis._removeListener(listener);\n\t\t};\n\t}\n\n\tprivate emit(e: any): void {\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistener(e);\n\t\t});\n\t}\n\n\tprivate _removeListener(listener: ErrorListenerCallback): void {\n\t\tthis.listeners.splice(this.listeners.indexOf(listener), 1);\n\t}\n\n\tsetUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\t\tthis.unexpectedErrorHandler = newUnexpectedErrorHandler;\n\t}\n\n\tgetUnexpectedErrorHandler(): (e: any) => void {\n\t\treturn this.unexpectedErrorHandler;\n\t}\n\n\tonUnexpectedError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t\tthis.emit(e);\n\t}\n\n\t// For external errors, we don't want the listeners to be called\n\tonUnexpectedExternalError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t}\n}\n\nexport const errorHandler = new ErrorHandler();\n\n/** @skipMangle */\nexport function setUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\terrorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler);\n}\n\n/**\n * Returns if the error is a SIGPIPE error. SIGPIPE errors should generally be\n * logged at most once, to avoid a loop.\n *\n * @see https://github.com/microsoft/vscode-remote-release/issues/6481\n */\nexport function isSigPipeError(e: unknown): e is Error {\n\tif (!e || typeof e !== 'object') {\n\t\treturn false;\n\t}\n\n\tconst cast = e as Record<string, string | undefined>;\n\treturn cast.code === 'EPIPE' && cast.syscall?.toUpperCase() === 'WRITE';\n}\n\nexport function onUnexpectedError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isCancellationError(e)) {\n\t\terrorHandler.onUnexpectedError(e);\n\t}\n\treturn undefined;\n}\n\nexport function onUnexpectedExternalError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isCancellationError(e)) {\n\t\terrorHandler.onUnexpectedExternalError(e);\n\t}\n\treturn undefined;\n}\n\nexport interface SerializedError {\n\treadonly $isError: true;\n\treadonly name: string;\n\treadonly message: string;\n\treadonly stack: string;\n\treadonly noTelemetry: boolean;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError;\nexport function transformErrorForSerialization(error: any): any;\nexport function transformErrorForSerialization(error: any): any {\n\tif (error instanceof Error) {\n\t\tconst { name, message } = error;\n\t\tconst stack: string = (<any>error).stacktrace || (<any>error).stack;\n\t\treturn {\n\t\t\t$isError: true,\n\t\t\tname,\n\t\t\tmessage,\n\t\t\tstack,\n\t\t\tnoTelemetry: ErrorNoTelemetry.isErrorNoTelemetry(error)\n\t\t};\n\t}\n\n\t// return as is\n\treturn error;\n}\n\n// see https://github.com/v8/v8/wiki/Stack%20Trace%20API#basic-stack-traces\nexport interface V8CallSite {\n\tgetThis(): unknown;\n\tgetTypeName(): string | null;\n\tgetFunction(): Function | undefined;\n\tgetFunctionName(): string | null;\n\tgetMethodName(): string | null;\n\tgetFileName(): string | null;\n\tgetLineNumber(): number | null;\n\tgetColumnNumber(): number | null;\n\tgetEvalOrigin(): string | undefined;\n\tisToplevel(): boolean;\n\tisEval(): boolean;\n\tisNative(): boolean;\n\tisConstructor(): boolean;\n\ttoString(): string;\n}\n\nconst canceledName = 'Canceled';\n\n/**\n * Checks if the given error is a promise in canceled state\n */\nexport function isCancellationError(error: any): boolean {\n\tif (error instanceof CancellationError) {\n\t\treturn true;\n\t}\n\treturn error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\n// !!!IMPORTANT!!!\n// Do NOT change this class because it is also used as an API-type.\nexport class CancellationError extends Error {\n\tconstructor() {\n\t\tsuper(canceledName);\n\t\tthis.name = this.message;\n\t}\n}\n\n/**\n * @deprecated use {@link CancellationError `new CancellationError()`} instead\n */\nexport function canceled(): Error {\n\tconst error = new Error(canceledName);\n\terror.name = error.message;\n\treturn error;\n}\n\nexport function illegalArgument(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal argument: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal argument');\n\t}\n}\n\nexport function illegalState(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal state: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal state');\n\t}\n}\n\nexport class ReadonlyError extends TypeError {\n\tconstructor(name?: string) {\n\t\tsuper(name ? `${name} is read-only and cannot be changed` : 'Cannot change read-only property');\n\t}\n}\n\nexport function getErrorMessage(err: any): string {\n\tif (!err) {\n\t\treturn 'Error';\n\t}\n\n\tif (err.message) {\n\t\treturn err.message;\n\t}\n\n\tif (err.stack) {\n\t\treturn err.stack.split('\\n')[0];\n\t}\n\n\treturn String(err);\n}\n\nexport class NotImplementedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotImplemented');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class NotSupportedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotSupported');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class ExpectedError extends Error {\n\treadonly isExpected = true;\n}\n\n/**\n * Error that when thrown won't be logged in telemetry as an unhandled error.\n */\nexport class ErrorNoTelemetry extends Error {\n\toverride readonly name: string;\n\n\tconstructor(msg?: string) {\n\t\tsuper(msg);\n\t\tthis.name = 'CodeExpectedError';\n\t}\n\n\tpublic static fromError(err: Error): ErrorNoTelemetry {\n\t\tif (err instanceof ErrorNoTelemetry) {\n\t\t\treturn err;\n\t\t}\n\n\t\tconst result = new ErrorNoTelemetry();\n\t\tresult.message = err.message;\n\t\tresult.stack = err.stack;\n\t\treturn result;\n\t}\n\n\tpublic static isErrorNoTelemetry(err: Error): err is ErrorNoTelemetry {\n\t\treturn err.name === 'CodeExpectedError';\n\t}\n}\n\n/**\n * This error indicates a bug.\n * Do not throw this for invalid user input.\n * Only catch this error to recover gracefully from bugs.\n */\nexport class BugIndicatingError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper(message || 'An unexpected bug occurred.');\n\t\tObject.setPrototypeOf(this, BugIndicatingError.prototype);\n\n\t\t// Because we know for sure only buggy code throws this,\n\t\t// we definitely want to break here and fix the bug.\n\t\t// eslint-disable-next-line no-debugger\n\t\t// debugger;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { CancellationError } from 'vs/base/common/errors';\nimport { ISplice } from 'vs/base/common/sequence';\nimport { findFirstIdxMonotonousOrArrLen } from './arraysFind';\n\n/**\n * Returns the last element of an array.\n * @param array The array.\n * @param n Which element from the end (default is zero).\n */\nexport function tail<T>(array: ArrayLike<T>, n: number = 0): T {\n\treturn array[array.length - (1 + n)];\n}\n\nexport function tail2<T>(arr: T[]): [T[], T] {\n\tif (arr.length === 0) {\n\t\tthrow new Error('Invalid tail call');\n\t}\n\n\treturn [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\n}\n\nexport function equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\n\tif (!one || !other) {\n\t\treturn false;\n\t}\n\n\tif (one.length !== other.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0, len = one.length; i < len; i++) {\n\t\tif (!itemEquals(one[i], other[i])) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Remove the element at `index` by replacing it with the last element. This is faster than `splice`\n * but changes the order of the array\n */\nexport function removeFastWithoutKeepingOrder<T>(array: T[], index: number) {\n\tconst last = array.length - 1;\n\tif (index < last) {\n\t\tarray[index] = array[last];\n\t}\n\tarray.pop();\n}\n\n/**\n * Performs a binary search algorithm over a sorted array.\n *\n * @param array The array being searched.\n * @param key The value we search for.\n * @param comparator A function that takes two array elements and returns zero\n *   if they are equal, a negative number if the first element precedes the\n *   second one in the sorting order, or a positive number if the second element\n *   precedes the first one.\n * @return See {@link binarySearch2}\n */\nexport function binarySearch<T>(array: ReadonlyArray<T>, key: T, comparator: (op1: T, op2: T) => number): number {\n\treturn binarySearch2(array.length, i => comparator(array[i], key));\n}\n\n/**\n * Performs a binary search algorithm over a sorted collection. Useful for cases\n * when we need to perform a binary search over something that isn't actually an\n * array, and converting data to an array would defeat the use of binary search\n * in the first place.\n *\n * @param length The collection length.\n * @param compareToKey A function that takes an index of an element in the\n *   collection and returns zero if the value at this index is equal to the\n *   search key, a negative number if the value precedes the search key in the\n *   sorting order, or a positive number if the search key precedes the value.\n * @return A non-negative index of an element, if found. If not found, the\n *   result is -(n+1) (or ~n, using bitwise notation), where n is the index\n *   where the key should be inserted to maintain the sorting order.\n */\nexport function binarySearch2(length: number, compareToKey: (index: number) => number): number {\n\tlet low = 0,\n\t\thigh = length - 1;\n\n\twhile (low <= high) {\n\t\tconst mid = ((low + high) / 2) | 0;\n\t\tconst comp = compareToKey(mid);\n\t\tif (comp < 0) {\n\t\t\tlow = mid + 1;\n\t\t} else if (comp > 0) {\n\t\t\thigh = mid - 1;\n\t\t} else {\n\t\t\treturn mid;\n\t\t}\n\t}\n\treturn -(low + 1);\n}\n\ntype Compare<T> = (a: T, b: T) => number;\n\n\nexport function quickSelect<T>(nth: number, data: T[], compare: Compare<T>): T {\n\n\tnth = nth | 0;\n\n\tif (nth >= data.length) {\n\t\tthrow new TypeError('invalid index');\n\t}\n\n\tconst pivotValue = data[Math.floor(data.length * Math.random())];\n\tconst lower: T[] = [];\n\tconst higher: T[] = [];\n\tconst pivots: T[] = [];\n\n\tfor (const value of data) {\n\t\tconst val = compare(value, pivotValue);\n\t\tif (val < 0) {\n\t\t\tlower.push(value);\n\t\t} else if (val > 0) {\n\t\t\thigher.push(value);\n\t\t} else {\n\t\t\tpivots.push(value);\n\t\t}\n\t}\n\n\tif (nth < lower.length) {\n\t\treturn quickSelect(nth, lower, compare);\n\t} else if (nth < lower.length + pivots.length) {\n\t\treturn pivots[0];\n\t} else {\n\t\treturn quickSelect(nth - (lower.length + pivots.length), higher, compare);\n\t}\n}\n\nexport function groupBy<T>(data: ReadonlyArray<T>, compare: (a: T, b: T) => number): T[][] {\n\tconst result: T[][] = [];\n\tlet currentGroup: T[] | undefined = undefined;\n\tfor (const element of data.slice(0).sort(compare)) {\n\t\tif (!currentGroup || compare(currentGroup[0], element) !== 0) {\n\t\t\tcurrentGroup = [element];\n\t\t\tresult.push(currentGroup);\n\t\t} else {\n\t\t\tcurrentGroup.push(element);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Splits the given items into a list of (non-empty) groups.\n * `shouldBeGrouped` is used to decide if two consecutive items should be in the same group.\n * The order of the items is preserved.\n */\nexport function* groupAdjacentBy<T>(items: Iterable<T>, shouldBeGrouped: (item1: T, item2: T) => boolean): Iterable<T[]> {\n\tlet currentGroup: T[] | undefined;\n\tlet last: T | undefined;\n\tfor (const item of items) {\n\t\tif (last !== undefined && shouldBeGrouped(last, item)) {\n\t\t\tcurrentGroup!.push(item);\n\t\t} else {\n\t\t\tif (currentGroup) {\n\t\t\t\tyield currentGroup;\n\t\t\t}\n\t\t\tcurrentGroup = [item];\n\t\t}\n\t\tlast = item;\n\t}\n\tif (currentGroup) {\n\t\tyield currentGroup;\n\t}\n}\n\nexport function forEachAdjacent<T>(arr: T[], f: (item1: T | undefined, item2: T | undefined) => void): void {\n\tfor (let i = 0; i <= arr.length; i++) {\n\t\tf(i === 0 ? undefined : arr[i - 1], i === arr.length ? undefined : arr[i]);\n\t}\n}\n\nexport function forEachWithNeighbors<T>(arr: T[], f: (before: T | undefined, element: T, after: T | undefined) => void): void {\n\tfor (let i = 0; i < arr.length; i++) {\n\t\tf(i === 0 ? undefined : arr[i - 1], arr[i], i + 1 === arr.length ? undefined : arr[i + 1]);\n\t}\n}\n\ninterface IMutableSplice<T> extends ISplice<T> {\n\treadonly toInsert: T[];\n\tdeleteCount: number;\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nexport function sortedDiff<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): ISplice<T>[] {\n\tconst result: IMutableSplice<T>[] = [];\n\n\tfunction pushSplice(start: number, deleteCount: number, toInsert: T[]): void {\n\t\tif (deleteCount === 0 && toInsert.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst latest = result[result.length - 1];\n\n\t\tif (latest && latest.start + latest.deleteCount === start) {\n\t\t\tlatest.deleteCount += deleteCount;\n\t\t\tlatest.toInsert.push(...toInsert);\n\t\t} else {\n\t\t\tresult.push({ start, deleteCount, toInsert });\n\t\t}\n\t}\n\n\tlet beforeIdx = 0;\n\tlet afterIdx = 0;\n\n\twhile (true) {\n\t\tif (beforeIdx === before.length) {\n\t\t\tpushSplice(beforeIdx, 0, after.slice(afterIdx));\n\t\t\tbreak;\n\t\t}\n\t\tif (afterIdx === after.length) {\n\t\t\tpushSplice(beforeIdx, before.length - beforeIdx, []);\n\t\t\tbreak;\n\t\t}\n\n\t\tconst beforeElement = before[beforeIdx];\n\t\tconst afterElement = after[afterIdx];\n\t\tconst n = compare(beforeElement, afterElement);\n\t\tif (n === 0) {\n\t\t\t// equal\n\t\t\tbeforeIdx += 1;\n\t\t\tafterIdx += 1;\n\t\t} else if (n < 0) {\n\t\t\t// beforeElement is smaller -> before element removed\n\t\t\tpushSplice(beforeIdx, 1, []);\n\t\t\tbeforeIdx += 1;\n\t\t} else if (n > 0) {\n\t\t\t// beforeElement is greater -> after element added\n\t\t\tpushSplice(beforeIdx, 0, [afterElement]);\n\t\t\tafterIdx += 1;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Takes two *sorted* arrays and computes their delta (removed, added elements).\n * Finishes in `Math.min(before.length, after.length)` steps.\n */\nexport function delta<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): { removed: T[]; added: T[] } {\n\tconst splices = sortedDiff(before, after, compare);\n\tconst removed: T[] = [];\n\tconst added: T[] = [];\n\n\tfor (const splice of splices) {\n\t\tremoved.push(...before.slice(splice.start, splice.start + splice.deleteCount));\n\t\tadded.push(...splice.toInsert);\n\t}\n\n\treturn { removed, added };\n}\n\n/**\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @return The first n elements from array when sorted with compare.\n */\nexport function top<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, n: number): T[] {\n\tif (n === 0) {\n\t\treturn [];\n\t}\n\tconst result = array.slice(0, n).sort(compare);\n\ttopStep(array, compare, result, n, array.length);\n\treturn result;\n}\n\n/**\n * Asynchronous variant of `top()` allowing for splitting up work in batches between which the event loop can run.\n *\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @param batch The number of elements to examine before yielding to the event loop.\n * @return The first n elements from array when sorted with compare.\n */\nexport function topAsync<T>(array: T[], compare: (a: T, b: T) => number, n: number, batch: number, token?: CancellationToken): Promise<T[]> {\n\tif (n === 0) {\n\t\treturn Promise.resolve([]);\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\t(async () => {\n\t\t\tconst o = array.length;\n\t\t\tconst result = array.slice(0, n).sort(compare);\n\t\t\tfor (let i = n, m = Math.min(n + batch, o); i < o; i = m, m = Math.min(m + batch, o)) {\n\t\t\t\tif (i > n) {\n\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve)); // any other delay function would starve I/O\n\t\t\t\t}\n\t\t\t\tif (token && token.isCancellationRequested) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\ttopStep(array, compare, result, i, m);\n\t\t\t}\n\t\t\treturn result;\n\t\t})()\n\t\t\t.then(resolve, reject);\n\t});\n}\n\nfunction topStep<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, result: T[], i: number, m: number): void {\n\tfor (const n = result.length; i < m; i++) {\n\t\tconst element = array[i];\n\t\tif (compare(element, result[n - 1]) < 0) {\n\t\t\tresult.pop();\n\t\t\tconst j = findFirstIdxMonotonousOrArrLen(result, e => compare(element, e) < 0);\n\t\t\tresult.splice(j, 0, element);\n\t\t}\n\t}\n}\n\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nexport function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n\treturn <T[]>array.filter(e => !!e);\n}\n\n/**\n * Remove all falsy values from `array`. The original array IS modified.\n */\nexport function coalesceInPlace<T>(array: Array<T | undefined | null>): asserts array is Array<T> {\n\tlet to = 0;\n\tfor (let i = 0; i < array.length; i++) {\n\t\tif (!!array[i]) {\n\t\t\tarray[to] = array[i];\n\t\t\tto += 1;\n\t\t}\n\t}\n\tarray.length = to;\n}\n\n/**\n * @deprecated Use `Array.copyWithin` instead\n */\nexport function move(array: any[], from: number, to: number): void {\n\tarray.splice(to, 0, array.splice(from, 1)[0]);\n}\n\n/**\n * @returns false if the provided object is an array and not empty.\n */\nexport function isFalsyOrEmpty(obj: any): boolean {\n\treturn !Array.isArray(obj) || obj.length === 0;\n}\n\n/**\n * @returns True if the provided object is an array and has at least one element.\n */\nexport function isNonEmptyArray<T>(obj: T[] | undefined | null): obj is T[];\nexport function isNonEmptyArray<T>(obj: readonly T[] | undefined | null): obj is readonly T[];\nexport function isNonEmptyArray<T>(obj: T[] | readonly T[] | undefined | null): obj is T[] | readonly T[] {\n\treturn Array.isArray(obj) && obj.length > 0;\n}\n\n/**\n * Removes duplicates from the given array. The optional keyFn allows to specify\n * how elements are checked for equality by returning an alternate value for each.\n */\nexport function distinct<T>(array: ReadonlyArray<T>, keyFn: (value: T) => any = value => value): T[] {\n\tconst seen = new Set<any>();\n\n\treturn array.filter(element => {\n\t\tconst key = keyFn!(element);\n\t\tif (seen.has(key)) {\n\t\t\treturn false;\n\t\t}\n\t\tseen.add(key);\n\t\treturn true;\n\t});\n}\n\nexport function uniqueFilter<T, R>(keyFn: (t: T) => R): (t: T) => boolean {\n\tconst seen = new Set<R>();\n\n\treturn element => {\n\t\tconst key = keyFn(element);\n\n\t\tif (seen.has(key)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tseen.add(key);\n\t\treturn true;\n\t};\n}\n\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue: NotFound): T | NotFound;\nexport function firstOrDefault<T>(array: ReadonlyArray<T>): T | undefined;\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue?: NotFound): T | NotFound | undefined {\n\treturn array.length > 0 ? array[0] : notFoundValue;\n}\n\nexport function lastOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue: NotFound): T | NotFound;\nexport function lastOrDefault<T>(array: ReadonlyArray<T>): T | undefined;\nexport function lastOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue?: NotFound): T | NotFound | undefined {\n\treturn array.length > 0 ? array[array.length - 1] : notFoundValue;\n}\n\nexport function commonPrefixLength<T>(one: ReadonlyArray<T>, other: ReadonlyArray<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b): number {\n\tlet result = 0;\n\n\tfor (let i = 0, len = Math.min(one.length, other.length); i < len && equals(one[i], other[i]); i++) {\n\t\tresult++;\n\t}\n\n\treturn result;\n}\n\n/**\n * @deprecated Use `[].flat()`\n */\nexport function flatten<T>(arr: T[][]): T[] {\n\treturn (<T[]>[]).concat(...arr);\n}\n\nexport function range(to: number): number[];\nexport function range(from: number, to: number): number[];\nexport function range(arg: number, to?: number): number[] {\n\tlet from = typeof to === 'number' ? arg : 0;\n\n\tif (typeof to === 'number') {\n\t\tfrom = arg;\n\t} else {\n\t\tfrom = 0;\n\t\tto = arg;\n\t}\n\n\tconst result: number[] = [];\n\n\tif (from <= to) {\n\t\tfor (let i = from; i < to; i++) {\n\t\t\tresult.push(i);\n\t\t}\n\t} else {\n\t\tfor (let i = from; i > to; i--) {\n\t\t\tresult.push(i);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function index<T>(array: ReadonlyArray<T>, indexer: (t: T) => string): { [key: string]: T };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper: (t: T) => R): { [key: string]: R };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper?: (t: T) => R): { [key: string]: R } {\n\treturn array.reduce((r, t) => {\n\t\tr[indexer(t)] = mapper ? mapper(t) : t;\n\t\treturn r;\n\t}, Object.create(null));\n}\n\n/**\n * Inserts an element into an array. Returns a function which, when\n * called, will remove that element from the array.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nexport function insert<T>(array: T[], element: T): () => void {\n\tarray.push(element);\n\n\treturn () => remove(array, element);\n}\n\n/**\n * Removes an element from an array if it can be found.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nexport function remove<T>(array: T[], element: T): T | undefined {\n\tconst index = array.indexOf(element);\n\tif (index > -1) {\n\t\tarray.splice(index, 1);\n\n\t\treturn element;\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Insert `insertArr` inside `target` at `insertIndex`.\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\n */\nexport function arrayInsert<T>(target: T[], insertIndex: number, insertArr: T[]): T[] {\n\tconst before = target.slice(0, insertIndex);\n\tconst after = target.slice(insertIndex);\n\treturn before.concat(insertArr, after);\n}\n\n/**\n * Uses Fisher-Yates shuffle to shuffle the given array\n */\nexport function shuffle<T>(array: T[], _seed?: number): void {\n\tlet rand: () => number;\n\n\tif (typeof _seed === 'number') {\n\t\tlet seed = _seed;\n\t\t// Seeded random number generator in JS. Modified from:\n\t\t// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n\t\trand = () => {\n\t\t\tconst x = Math.sin(seed++) * 179426549; // throw away most significant digits and reduce any potential bias\n\t\t\treturn x - Math.floor(x);\n\t\t};\n\t} else {\n\t\trand = Math.random;\n\t}\n\n\tfor (let i = array.length - 1; i > 0; i -= 1) {\n\t\tconst j = Math.floor(rand() * (i + 1));\n\t\tconst temp = array[i];\n\t\tarray[i] = array[j];\n\t\tarray[j] = temp;\n\t}\n}\n\n/**\n * Pushes an element to the start of the array, if found.\n */\nexport function pushToStart<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.unshift(value);\n\t}\n}\n\n/**\n * Pushes an element to the end of the array, if found.\n */\nexport function pushToEnd<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.push(value);\n\t}\n}\n\nexport function pushMany<T>(arr: T[], items: ReadonlyArray<T>): void {\n\tfor (const item of items) {\n\t\tarr.push(item);\n\t}\n}\n\nexport function mapArrayOrNot<T, U>(items: T | T[], fn: (_: T) => U): U | U[] {\n\treturn Array.isArray(items) ?\n\t\titems.map(fn) :\n\t\tfn(items);\n}\n\nexport function asArray<T>(x: T | T[]): T[];\nexport function asArray<T>(x: T | readonly T[]): readonly T[];\nexport function asArray<T>(x: T | T[]): T[] {\n\treturn Array.isArray(x) ? x : [x];\n}\n\nexport function getRandomElement<T>(arr: T[]): T | undefined {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\n\n/**\n * Insert the new items in the array.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start inserting elements.\n * @param newItems The items to be inserted\n */\nexport function insertInto<T>(array: T[], start: number, newItems: T[]): void {\n\tconst startIdx = getActualStartIndex(array, start);\n\tconst originalLength = array.length;\n\tconst newItemsLength = newItems.length;\n\tarray.length = originalLength + newItemsLength;\n\t// Move the items after the start index, start from the end so that we don't overwrite any value.\n\tfor (let i = originalLength - 1; i >= startIdx; i--) {\n\t\tarray[i + newItemsLength] = array[i];\n\t}\n\n\tfor (let i = 0; i < newItemsLength; i++) {\n\t\tarray[i + startIdx] = newItems[i];\n\t}\n}\n\n/**\n * Removes elements from an array and inserts new elements in their place, returning the deleted elements. Alternative to the native Array.splice method, it\n * can only support limited number of items due to the maximum call stack size limit.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start removing elements.\n * @param deleteCount The number of elements to remove.\n * @returns An array containing the elements that were deleted.\n */\nexport function splice<T>(array: T[], start: number, deleteCount: number, newItems: T[]): T[] {\n\tconst index = getActualStartIndex(array, start);\n\tlet result = array.splice(index, deleteCount);\n\tif (result === undefined) {\n\t\t// see https://bugs.webkit.org/show_bug.cgi?id=261140\n\t\tresult = [];\n\t}\n\tinsertInto(array, index, newItems);\n\treturn result;\n}\n\n/**\n * Determine the actual start index (same logic as the native splice() or slice())\n * If greater than the length of the array, start will be set to the length of the array. In this case, no element will be deleted but the method will behave as an adding function, adding as many element as item[n*] provided.\n * If negative, it will begin that many elements from the end of the array. (In this case, the origin -1, meaning -n is the index of the nth last element, and is therefore equivalent to the index of array.length - n.) If array.length + start is less than 0, it will begin from index 0.\n * @param array The target array.\n * @param start The operation index.\n */\nfunction getActualStartIndex<T>(array: T[], start: number): number {\n\treturn start < 0 ? Math.max(start + array.length, 0) : Math.min(start, array.length);\n}\n\n/**\n * When comparing two values,\n * a negative number indicates that the first value is less than the second,\n * a positive number indicates that the first value is greater than the second,\n * and zero indicates that neither is the case.\n*/\nexport type CompareResult = number;\n\nexport namespace CompareResult {\n\texport function isLessThan(result: CompareResult): boolean {\n\t\treturn result < 0;\n\t}\n\n\texport function isLessThanOrEqual(result: CompareResult): boolean {\n\t\treturn result <= 0;\n\t}\n\n\texport function isGreaterThan(result: CompareResult): boolean {\n\t\treturn result > 0;\n\t}\n\n\texport function isNeitherLessOrGreaterThan(result: CompareResult): boolean {\n\t\treturn result === 0;\n\t}\n\n\texport const greaterThan = 1;\n\texport const lessThan = -1;\n\texport const neitherLessOrGreaterThan = 0;\n}\n\n/**\n * A comparator `c` defines a total order `<=` on `T` as following:\n * `c(a, b) <= 0` iff `a` <= `b`.\n * We also have `c(a, b) == 0` iff `c(b, a) == 0`.\n*/\nexport type Comparator<T> = (a: T, b: T) => CompareResult;\n\nexport function compareBy<TItem, TCompareBy>(selector: (item: TItem) => TCompareBy, comparator: Comparator<TCompareBy>): Comparator<TItem> {\n\treturn (a, b) => comparator(selector(a), selector(b));\n}\n\nexport function tieBreakComparators<TItem>(...comparators: Comparator<TItem>[]): Comparator<TItem> {\n\treturn (item1, item2) => {\n\t\tfor (const comparator of comparators) {\n\t\t\tconst result = comparator(item1, item2);\n\t\t\tif (!CompareResult.isNeitherLessOrGreaterThan(result)) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\treturn CompareResult.neitherLessOrGreaterThan;\n\t};\n}\n\n/**\n * The natural order on numbers.\n*/\nexport const numberComparator: Comparator<number> = (a, b) => a - b;\n\nexport const booleanComparator: Comparator<boolean> = (a, b) => numberComparator(a ? 1 : 0, b ? 1 : 0);\n\nexport function reverseOrder<TItem>(comparator: Comparator<TItem>): Comparator<TItem> {\n\treturn (a, b) => -comparator(a, b);\n}\n\nexport class ArrayQueue<T> {\n\tprivate firstIdx = 0;\n\tprivate lastIdx = this.items.length - 1;\n\n\t/**\n\t * Constructs a queue that is backed by the given array. Runtime is O(1).\n\t*/\n\tconstructor(private readonly items: readonly T[]) { }\n\n\tget length(): number {\n\t\treturn this.lastIdx - this.firstIdx + 1;\n\t}\n\n\t/**\n\t * Consumes elements from the beginning of the queue as long as the predicate returns true.\n\t * If no elements were consumed, `null` is returned. Has a runtime of O(result.length).\n\t*/\n\ttakeWhile(predicate: (value: T) => boolean): T[] | null {\n\t\t// P(k) := k <= this.lastIdx && predicate(this.items[k])\n\t\t// Find s := min { k | k >= this.firstIdx && !P(k) } and return this.data[this.firstIdx...s)\n\n\t\tlet startIdx = this.firstIdx;\n\t\twhile (startIdx < this.items.length && predicate(this.items[startIdx])) {\n\t\t\tstartIdx++;\n\t\t}\n\t\tconst result = startIdx === this.firstIdx ? null : this.items.slice(this.firstIdx, startIdx);\n\t\tthis.firstIdx = startIdx;\n\t\treturn result;\n\t}\n\n\t/**\n\t * Consumes elements from the end of the queue as long as the predicate returns true.\n\t * If no elements were consumed, `null` is returned.\n\t * The result has the same order as the underlying array!\n\t*/\n\ttakeFromEndWhile(predicate: (value: T) => boolean): T[] | null {\n\t\t// P(k) := this.firstIdx >= k && predicate(this.items[k])\n\t\t// Find s := max { k | k <= this.lastIdx && !P(k) } and return this.data(s...this.lastIdx]\n\n\t\tlet endIdx = this.lastIdx;\n\t\twhile (endIdx >= 0 && predicate(this.items[endIdx])) {\n\t\t\tendIdx--;\n\t\t}\n\t\tconst result = endIdx === this.lastIdx ? null : this.items.slice(endIdx + 1, this.lastIdx + 1);\n\t\tthis.lastIdx = endIdx;\n\t\treturn result;\n\t}\n\n\tpeek(): T | undefined {\n\t\tif (this.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.items[this.firstIdx];\n\t}\n\n\tpeekLast(): T | undefined {\n\t\tif (this.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.items[this.lastIdx];\n\t}\n\n\tdequeue(): T | undefined {\n\t\tconst result = this.items[this.firstIdx];\n\t\tthis.firstIdx++;\n\t\treturn result;\n\t}\n\n\tremoveLast(): T | undefined {\n\t\tconst result = this.items[this.lastIdx];\n\t\tthis.lastIdx--;\n\t\treturn result;\n\t}\n\n\ttakeCount(count: number): T[] {\n\t\tconst result = this.items.slice(this.firstIdx, this.firstIdx + count);\n\t\tthis.firstIdx += count;\n\t\treturn result;\n\t}\n}\n\n/**\n * This class is faster than an iterator and array for lazy computed data.\n*/\nexport class CallbackIterable<T> {\n\tpublic static readonly empty = new CallbackIterable<never>(_callback => { });\n\n\tconstructor(\n\t\t/**\n\t\t * Calls the callback for every item.\n\t\t * Stops when the callback returns false.\n\t\t*/\n\t\tpublic readonly iterate: (callback: (item: T) => boolean) => void\n\t) {\n\t}\n\n\tforEach(handler: (item: T) => void) {\n\t\tthis.iterate(item => { handler(item); return true; });\n\t}\n\n\ttoArray(): T[] {\n\t\tconst result: T[] = [];\n\t\tthis.iterate(item => { result.push(item); return true; });\n\t\treturn result;\n\t}\n\n\tfilter(predicate: (item: T) => boolean): CallbackIterable<T> {\n\t\treturn new CallbackIterable(cb => this.iterate(item => predicate(item) ? cb(item) : true));\n\t}\n\n\tmap<TResult>(mapFn: (item: T) => TResult): CallbackIterable<TResult> {\n\t\treturn new CallbackIterable<TResult>(cb => this.iterate(item => cb(mapFn(item))));\n\t}\n\n\tsome(predicate: (item: T) => boolean): boolean {\n\t\tlet result = false;\n\t\tthis.iterate(item => { result = predicate(item); return !result; });\n\t\treturn result;\n\t}\n\n\tfindFirst(predicate: (item: T) => boolean): T | undefined {\n\t\tlet result: T | undefined;\n\t\tthis.iterate(item => {\n\t\t\tif (predicate(item)) {\n\t\t\t\tresult = item;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn result;\n\t}\n\n\tfindLast(predicate: (item: T) => boolean): T | undefined {\n\t\tlet result: T | undefined;\n\t\tthis.iterate(item => {\n\t\t\tif (predicate(item)) {\n\t\t\t\tresult = item;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn result;\n\t}\n\n\tfindLastMaxBy(comparator: Comparator<T>): T | undefined {\n\t\tlet result: T | undefined;\n\t\tlet first = true;\n\t\tthis.iterate(item => {\n\t\t\tif (first || CompareResult.isGreaterThan(comparator(item, result!))) {\n\t\t\t\tfirst = false;\n\t\t\t\tresult = item;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn result;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Given a function, returns a function that is only calling that function once.\n */\nexport function createSingleCallFunction<T extends Function>(this: unknown, fn: T, fnDidRunCallback?: () => void): T {\n\tconst _this = this;\n\tlet didCall = false;\n\tlet result: unknown;\n\n\treturn function () {\n\t\tif (didCall) {\n\t\t\treturn result;\n\t\t}\n\n\t\tdidCall = true;\n\t\tif (fnDidRunCallback) {\n\t\t\ttry {\n\t\t\t\tresult = fn.apply(_this, arguments);\n\t\t\t} finally {\n\t\t\t\tfnDidRunCallback();\n\t\t\t}\n\t\t} else {\n\t\t\tresult = fn.apply(_this, arguments);\n\t\t}\n\n\t\treturn result;\n\t} as unknown as T;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport namespace Iterable {\n\n\texport function is<T = any>(thing: any): thing is Iterable<T> {\n\t\treturn thing && typeof thing === 'object' && typeof thing[Symbol.iterator] === 'function';\n\t}\n\n\tconst _empty: Iterable<any> = Object.freeze([]);\n\texport function empty<T = any>(): Iterable<T> {\n\t\treturn _empty;\n\t}\n\n\texport function* single<T>(element: T): Iterable<T> {\n\t\tyield element;\n\t}\n\n\texport function wrap<T>(iterableOrElement: Iterable<T> | T): Iterable<T> {\n\t\tif (is(iterableOrElement)) {\n\t\t\treturn iterableOrElement;\n\t\t} else {\n\t\t\treturn single(iterableOrElement);\n\t\t}\n\t}\n\n\texport function from<T>(iterable: Iterable<T> | undefined | null): Iterable<T> {\n\t\treturn iterable || _empty;\n\t}\n\n\texport function* reverse<T>(array: Array<T>): Iterable<T> {\n\t\tfor (let i = array.length - 1; i >= 0; i--) {\n\t\t\tyield array[i];\n\t\t}\n\t}\n\n\texport function isEmpty<T>(iterable: Iterable<T> | undefined | null): boolean {\n\t\treturn !iterable || iterable[Symbol.iterator]().next().done === true;\n\t}\n\n\texport function first<T>(iterable: Iterable<T>): T | undefined {\n\t\treturn iterable[Symbol.iterator]().next().value;\n\t}\n\n\texport function some<T>(iterable: Iterable<T>, predicate: (t: T) => unknown): boolean {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\texport function find<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): R | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\texport function filter<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): Iterable<R>;\n\texport function filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T>;\n\texport function* filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T> {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function* map<T, R>(iterable: Iterable<T>, fn: (t: T, index: number) => R): Iterable<R> {\n\t\tlet index = 0;\n\t\tfor (const element of iterable) {\n\t\t\tyield fn(element, index++);\n\t\t}\n\t}\n\n\texport function* concat<T>(...iterables: Iterable<T>[]): Iterable<T> {\n\t\tfor (const iterable of iterables) {\n\t\t\tyield* iterable;\n\t\t}\n\t}\n\n\texport function reduce<T, R>(iterable: Iterable<T>, reducer: (previousValue: R, currentValue: T) => R, initialValue: R): R {\n\t\tlet value = initialValue;\n\t\tfor (const element of iterable) {\n\t\t\tvalue = reducer(value, element);\n\t\t}\n\t\treturn value;\n\t}\n\n\t/**\n\t * Returns an iterable slice of the array, with the same semantics as `array.slice()`.\n\t */\n\texport function* slice<T>(arr: ReadonlyArray<T>, from: number, to = arr.length): Iterable<T> {\n\t\tif (from < 0) {\n\t\t\tfrom += arr.length;\n\t\t}\n\n\t\tif (to < 0) {\n\t\t\tto += arr.length;\n\t\t} else if (to > arr.length) {\n\t\t\tto = arr.length;\n\t\t}\n\n\t\tfor (; from < to; from++) {\n\t\t\tyield arr[from];\n\t\t}\n\t}\n\n\t/**\n\t * Consumes `atMost` elements from iterable and returns the consumed elements,\n\t * and an iterable for the rest of the elements.\n\t */\n\texport function consume<T>(iterable: Iterable<T>, atMost: number = Number.POSITIVE_INFINITY): [T[], Iterable<T>] {\n\t\tconst consumed: T[] = [];\n\n\t\tif (atMost === 0) {\n\t\t\treturn [consumed, iterable];\n\t\t}\n\n\t\tconst iterator = iterable[Symbol.iterator]();\n\n\t\tfor (let i = 0; i < atMost; i++) {\n\t\t\tconst next = iterator.next();\n\n\t\t\tif (next.done) {\n\t\t\t\treturn [consumed, Iterable.empty()];\n\t\t\t}\n\n\t\t\tconsumed.push(next.value);\n\t\t}\n\n\t\treturn [consumed, { [Symbol.iterator]() { return iterator; } }];\n\t}\n\n\texport async function asyncToArray<T>(iterable: AsyncIterable<T>): Promise<T[]> {\n\t\tconst result: T[] = [];\n\t\tfor await (const item of iterable) {\n\t\t\tresult.push(item);\n\t\t}\n\t\treturn Promise.resolve(result);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class Lazy<T> {\n\n\tprivate _didRun: boolean = false;\n\tprivate _value?: T;\n\tprivate _error: Error | undefined;\n\n\tconstructor(\n\t\tprivate readonly executor: () => T,\n\t) { }\n\n\t/**\n\t * True if the lazy value has been resolved.\n\t */\n\tget hasValue() { return this._didRun; }\n\n\t/**\n\t * Get the wrapped value.\n\t *\n\t * This will force evaluation of the lazy value if it has not been resolved yet. Lazy values are only\n\t * resolved once. `getValue` will re-throw exceptions that are hit while resolving the value\n\t */\n\tget value(): T {\n\t\tif (!this._didRun) {\n\t\t\ttry {\n\t\t\t\tthis._value = this.executor();\n\t\t\t} catch (err) {\n\t\t\t\tthis._error = err;\n\t\t\t} finally {\n\t\t\t\tthis._didRun = true;\n\t\t\t}\n\t\t}\n\t\tif (this._error) {\n\t\t\tthrow this._error;\n\t\t}\n\t\treturn this._value!;\n\t}\n\n\t/**\n\t * Get the wrapped value without forcing evaluation.\n\t */\n\tget rawValue(): T | undefined { return this._value; }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nclass Node<E> {\n\n\tstatic readonly Undefined = new Node<any>(undefined);\n\n\telement: E;\n\tnext: Node<E>;\n\tprev: Node<E>;\n\n\tconstructor(element: E) {\n\t\tthis.element = element;\n\t\tthis.next = Node.Undefined;\n\t\tthis.prev = Node.Undefined;\n\t}\n}\n\nexport class LinkedList<E> {\n\n\tprivate _first: Node<E> = Node.Undefined;\n\tprivate _last: Node<E> = Node.Undefined;\n\tprivate _size: number = 0;\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._first === Node.Undefined;\n\t}\n\n\tclear(): void {\n\t\tlet node = this._first;\n\t\twhile (node !== Node.Undefined) {\n\t\t\tconst next = node.next;\n\t\t\tnode.prev = Node.Undefined;\n\t\t\tnode.next = Node.Undefined;\n\t\t\tnode = next;\n\t\t}\n\n\t\tthis._first = Node.Undefined;\n\t\tthis._last = Node.Undefined;\n\t\tthis._size = 0;\n\t}\n\n\tunshift(element: E): () => void {\n\t\treturn this._insert(element, false);\n\t}\n\n\tpush(element: E): () => void {\n\t\treturn this._insert(element, true);\n\t}\n\n\tprivate _insert(element: E, atTheEnd: boolean): () => void {\n\t\tconst newNode = new Node(element);\n\t\tif (this._first === Node.Undefined) {\n\t\t\tthis._first = newNode;\n\t\t\tthis._last = newNode;\n\n\t\t} else if (atTheEnd) {\n\t\t\t// push\n\t\t\tconst oldLast = this._last;\n\t\t\tthis._last = newNode;\n\t\t\tnewNode.prev = oldLast;\n\t\t\toldLast.next = newNode;\n\n\t\t} else {\n\t\t\t// unshift\n\t\t\tconst oldFirst = this._first;\n\t\t\tthis._first = newNode;\n\t\t\tnewNode.next = oldFirst;\n\t\t\toldFirst.prev = newNode;\n\t\t}\n\t\tthis._size += 1;\n\n\t\tlet didRemove = false;\n\t\treturn () => {\n\t\t\tif (!didRemove) {\n\t\t\t\tdidRemove = true;\n\t\t\t\tthis._remove(newNode);\n\t\t\t}\n\t\t};\n\t}\n\n\tshift(): E | undefined {\n\t\tif (this._first === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._first.element;\n\t\t\tthis._remove(this._first);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tpop(): E | undefined {\n\t\tif (this._last === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._last.element;\n\t\t\tthis._remove(this._last);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tprivate _remove(node: Node<E>): void {\n\t\tif (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n\t\t\t// middle\n\t\t\tconst anchor = node.prev;\n\t\t\tanchor.next = node.next;\n\t\t\tnode.next.prev = anchor;\n\n\t\t} else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n\t\t\t// only node\n\t\t\tthis._first = Node.Undefined;\n\t\t\tthis._last = Node.Undefined;\n\n\t\t} else if (node.next === Node.Undefined) {\n\t\t\t// last\n\t\t\tthis._last = this._last.prev!;\n\t\t\tthis._last.next = Node.Undefined;\n\n\t\t} else if (node.prev === Node.Undefined) {\n\t\t\t// first\n\t\t\tthis._first = this._first.next!;\n\t\t\tthis._first.prev = Node.Undefined;\n\t\t}\n\n\t\t// done\n\t\tthis._size -= 1;\n\t}\n\n\t*[Symbol.iterator](): Iterator<E> {\n\t\tlet node = this._first;\n\t\twhile (node !== Node.Undefined) {\n\t\t\tyield node.element;\n\t\t\tnode = node.next;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\n\nexport function getOrSet<K, V>(map: Map<K, V>, key: K, value: V): V {\n\tlet result = map.get(key);\n\tif (result === undefined) {\n\t\tresult = value;\n\t\tmap.set(key, result);\n\t}\n\n\treturn result;\n}\n\nexport function mapToString<K, V>(map: Map<K, V>): string {\n\tconst entries: string[] = [];\n\tmap.forEach((value, key) => {\n\t\tentries.push(`${key} => ${value}`);\n\t});\n\n\treturn `Map(${map.size}) {${entries.join(', ')}}`;\n}\n\nexport function setToString<K>(set: Set<K>): string {\n\tconst entries: K[] = [];\n\tset.forEach(value => {\n\t\tentries.push(value);\n\t});\n\n\treturn `Set(${set.size}) {${entries.join(', ')}}`;\n}\n\ninterface ResourceMapKeyFn {\n\t(resource: URI): string;\n}\n\nclass ResourceMapEntry<T> {\n\tconstructor(readonly uri: URI, readonly value: T) { }\n}\n\nfunction isEntries<T>(arg: ResourceMap<T> | ResourceMapKeyFn | readonly (readonly [URI, T])[] | undefined): arg is readonly (readonly [URI, T])[] {\n\treturn Array.isArray(arg);\n}\n\nexport class ResourceMap<T> implements Map<URI, T> {\n\n\tprivate static readonly defaultToKey = (resource: URI) => resource.toString();\n\n\treadonly [Symbol.toStringTag] = 'ResourceMap';\n\n\tprivate readonly map: Map<string, ResourceMapEntry<T>>;\n\tprivate readonly toKey: ResourceMapKeyFn;\n\n\t/**\n\t *\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(toKey?: ResourceMapKeyFn);\n\n\t/**\n\t *\n\t * @param other Another resource which this maps is created from\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(other?: ResourceMap<T>, toKey?: ResourceMapKeyFn);\n\n\t/**\n\t *\n\t * @param other Another resource which this maps is created from\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(entries?: readonly (readonly [URI, T])[], toKey?: ResourceMapKeyFn);\n\n\tconstructor(arg?: ResourceMap<T> | ResourceMapKeyFn | readonly (readonly [URI, T])[], toKey?: ResourceMapKeyFn) {\n\t\tif (arg instanceof ResourceMap) {\n\t\t\tthis.map = new Map(arg.map);\n\t\t\tthis.toKey = toKey ?? ResourceMap.defaultToKey;\n\t\t} else if (isEntries(arg)) {\n\t\t\tthis.map = new Map();\n\t\t\tthis.toKey = toKey ?? ResourceMap.defaultToKey;\n\n\t\t\tfor (const [resource, value] of arg) {\n\t\t\t\tthis.set(resource, value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.map = new Map();\n\t\t\tthis.toKey = arg ?? ResourceMap.defaultToKey;\n\t\t}\n\t}\n\n\tset(resource: URI, value: T): this {\n\t\tthis.map.set(this.toKey(resource), new ResourceMapEntry(resource, value));\n\t\treturn this;\n\t}\n\n\tget(resource: URI): T | undefined {\n\t\treturn this.map.get(this.toKey(resource))?.value;\n\t}\n\n\thas(resource: URI): boolean {\n\t\treturn this.map.has(this.toKey(resource));\n\t}\n\n\tget size(): number {\n\t\treturn this.map.size;\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n\n\tdelete(resource: URI): boolean {\n\t\treturn this.map.delete(this.toKey(resource));\n\t}\n\n\tforEach(clb: (value: T, key: URI, map: Map<URI, T>) => void, thisArg?: any): void {\n\t\tif (typeof thisArg !== 'undefined') {\n\t\t\tclb = clb.bind(thisArg);\n\t\t}\n\t\tfor (const [_, entry] of this.map) {\n\t\t\tclb(entry.value, entry.uri, <any>this);\n\t\t}\n\t}\n\n\t*values(): IterableIterator<T> {\n\t\tfor (const entry of this.map.values()) {\n\t\t\tyield entry.value;\n\t\t}\n\t}\n\n\t*keys(): IterableIterator<URI> {\n\t\tfor (const entry of this.map.values()) {\n\t\t\tyield entry.uri;\n\t\t}\n\t}\n\n\t*entries(): IterableIterator<[URI, T]> {\n\t\tfor (const entry of this.map.values()) {\n\t\t\tyield [entry.uri, entry.value];\n\t\t}\n\t}\n\n\t*[Symbol.iterator](): IterableIterator<[URI, T]> {\n\t\tfor (const [, entry] of this.map) {\n\t\t\tyield [entry.uri, entry.value];\n\t\t}\n\t}\n}\n\nexport class ResourceSet implements Set<URI> {\n\n\treadonly [Symbol.toStringTag]: string = 'ResourceSet';\n\n\tprivate readonly _map: ResourceMap<URI>;\n\n\tconstructor(toKey?: ResourceMapKeyFn);\n\tconstructor(entries: readonly URI[], toKey?: ResourceMapKeyFn);\n\tconstructor(entriesOrKey?: readonly URI[] | ResourceMapKeyFn, toKey?: ResourceMapKeyFn) {\n\t\tif (!entriesOrKey || typeof entriesOrKey === 'function') {\n\t\t\tthis._map = new ResourceMap(entriesOrKey);\n\t\t} else {\n\t\t\tthis._map = new ResourceMap(toKey);\n\t\t\tentriesOrKey.forEach(this.add, this);\n\t\t}\n\t}\n\n\n\tget size(): number {\n\t\treturn this._map.size;\n\t}\n\n\tadd(value: URI): this {\n\t\tthis._map.set(value, value);\n\t\treturn this;\n\t}\n\n\tclear(): void {\n\t\tthis._map.clear();\n\t}\n\n\tdelete(value: URI): boolean {\n\t\treturn this._map.delete(value);\n\t}\n\n\tforEach(callbackfn: (value: URI, value2: URI, set: Set<URI>) => void, thisArg?: any): void {\n\t\tthis._map.forEach((_value, key) => callbackfn.call(thisArg, key, key, this));\n\t}\n\n\thas(value: URI): boolean {\n\t\treturn this._map.has(value);\n\t}\n\n\tentries(): IterableIterator<[URI, URI]> {\n\t\treturn this._map.entries();\n\t}\n\n\tkeys(): IterableIterator<URI> {\n\t\treturn this._map.keys();\n\t}\n\n\tvalues(): IterableIterator<URI> {\n\t\treturn this._map.keys();\n\t}\n\n\t[Symbol.iterator](): IterableIterator<URI> {\n\t\treturn this.keys();\n\t}\n}\n\n\ninterface Item<K, V> {\n\tprevious: Item<K, V> | undefined;\n\tnext: Item<K, V> | undefined;\n\tkey: K;\n\tvalue: V;\n}\n\nexport const enum Touch {\n\tNone = 0,\n\tAsOld = 1,\n\tAsNew = 2\n}\n\nexport class LinkedMap<K, V> implements Map<K, V> {\n\n\treadonly [Symbol.toStringTag] = 'LinkedMap';\n\n\tprivate _map: Map<K, Item<K, V>>;\n\tprivate _head: Item<K, V> | undefined;\n\tprivate _tail: Item<K, V> | undefined;\n\tprivate _size: number;\n\n\tprivate _state: number;\n\n\tconstructor() {\n\t\tthis._map = new Map<K, Item<K, V>>();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state = 0;\n\t}\n\n\tclear(): void {\n\t\tthis._map.clear();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state++;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn !this._head && !this._tail;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tget first(): V | undefined {\n\t\treturn this._head?.value;\n\t}\n\n\tget last(): V | undefined {\n\t\treturn this._tail?.value;\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this._map.has(key);\n\t}\n\n\tget(key: K, touch: Touch = Touch.None): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (touch !== Touch.None) {\n\t\t\tthis.touch(item, touch);\n\t\t}\n\t\treturn item.value;\n\t}\n\n\tset(key: K, value: V, touch: Touch = Touch.None): this {\n\t\tlet item = this._map.get(key);\n\t\tif (item) {\n\t\t\titem.value = value;\n\t\t\tif (touch !== Touch.None) {\n\t\t\t\tthis.touch(item, touch);\n\t\t\t}\n\t\t} else {\n\t\t\titem = { key, value, next: undefined, previous: undefined };\n\t\t\tswitch (touch) {\n\t\t\t\tcase Touch.None:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsOld:\n\t\t\t\t\tthis.addItemFirst(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsNew:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._map.set(key, item);\n\t\t\tthis._size++;\n\t\t}\n\t\treturn this;\n\t}\n\n\tdelete(key: K): boolean {\n\t\treturn !!this.remove(key);\n\t}\n\n\tremove(key: K): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._map.delete(key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tshift(): V | undefined {\n\t\tif (!this._head && !this._tail) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tconst item = this._head;\n\t\tthis._map.delete(item.key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: LinkedMap<K, V>) => void, thisArg?: any): void {\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\twhile (current) {\n\t\t\tif (thisArg) {\n\t\t\t\tcallbackfn.bind(thisArg)(current.value, current.key, this);\n\t\t\t} else {\n\t\t\t\tcallbackfn(current.value, current.key, this);\n\t\t\t}\n\t\t\tif (this._state !== state) {\n\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<K> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<K> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.key, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<V> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<V> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.value, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tentries(): IterableIterator<[K, V]> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<[K, V]> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<[K, V]> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result: IteratorResult<[K, V]> = { value: [current.key, current.value], done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.entries();\n\t}\n\n\tprotected trimOld(newSize: number) {\n\t\tif (newSize >= this.size) {\n\t\t\treturn;\n\t\t}\n\t\tif (newSize === 0) {\n\t\t\tthis.clear();\n\t\t\treturn;\n\t\t}\n\t\tlet current = this._head;\n\t\tlet currentSize = this.size;\n\t\twhile (current && currentSize > newSize) {\n\t\t\tthis._map.delete(current.key);\n\t\t\tcurrent = current.next;\n\t\t\tcurrentSize--;\n\t\t}\n\t\tthis._head = current;\n\t\tthis._size = currentSize;\n\t\tif (current) {\n\t\t\tcurrent.previous = undefined;\n\t\t}\n\t\tthis._state++;\n\t}\n\n\tprivate addItemFirst(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._tail = item;\n\t\t} else if (!this._head) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t}\n\t\tthis._head = item;\n\t\tthis._state++;\n\t}\n\n\tprivate addItemLast(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._head = item;\n\t\t} else if (!this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t}\n\t\tthis._tail = item;\n\t\tthis._state++;\n\t}\n\n\tprivate removeItem(item: Item<K, V>): void {\n\t\tif (item === this._head && item === this._tail) {\n\t\t\tthis._head = undefined;\n\t\t\tthis._tail = undefined;\n\t\t}\n\t\telse if (item === this._head) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.next) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.next.previous = undefined;\n\t\t\tthis._head = item.next;\n\t\t}\n\t\telse if (item === this._tail) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.previous.next = undefined;\n\t\t\tthis._tail = item.previous;\n\t\t}\n\t\telse {\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\t\t\tif (!next || !previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\tnext.previous = previous;\n\t\t\tprevious.next = next;\n\t\t}\n\t\titem.next = undefined;\n\t\titem.previous = undefined;\n\t\tthis._state++;\n\t}\n\n\tprivate touch(item: Item<K, V>, touch: Touch): void {\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tif ((touch !== Touch.AsOld && touch !== Touch.AsNew)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (touch === Touch.AsOld) {\n\t\t\tif (item === this._head) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item\n\t\t\tif (item === this._tail) {\n\t\t\t\t// previous must be defined since item was not head but is tail\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tprevious!.next = undefined;\n\t\t\t\tthis._tail = previous;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\n\t\t\t// Insert the node at head\n\t\t\titem.previous = undefined;\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t\tthis._head = item;\n\t\t\tthis._state++;\n\t\t} else if (touch === Touch.AsNew) {\n\t\t\tif (item === this._tail) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item.\n\t\t\tif (item === this._head) {\n\t\t\t\t// next must be defined since item was not tail but is head\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tnext!.previous = undefined;\n\t\t\t\tthis._head = next;\n\t\t\t} else {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\t\t\titem.next = undefined;\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t\tthis._tail = item;\n\t\t\tthis._state++;\n\t\t}\n\t}\n\n\ttoJSON(): [K, V][] {\n\t\tconst data: [K, V][] = [];\n\n\t\tthis.forEach((value, key) => {\n\t\t\tdata.push([key, value]);\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tfromJSON(data: [K, V][]): void {\n\t\tthis.clear();\n\n\t\tfor (const [key, value] of data) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t}\n}\n\nexport class LRUCache<K, V> extends LinkedMap<K, V> {\n\n\tprivate _limit: number;\n\tprivate _ratio: number;\n\n\tconstructor(limit: number, ratio: number = 1) {\n\t\tsuper();\n\t\tthis._limit = limit;\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t}\n\n\tget limit(): number {\n\t\treturn this._limit;\n\t}\n\n\tset limit(limit: number) {\n\t\tthis._limit = limit;\n\t\tthis.checkTrim();\n\t}\n\n\tget ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tset ratio(ratio: number) {\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t\tthis.checkTrim();\n\t}\n\n\toverride get(key: K, touch: Touch = Touch.AsNew): V | undefined {\n\t\treturn super.get(key, touch);\n\t}\n\n\tpeek(key: K): V | undefined {\n\t\treturn super.get(key, Touch.None);\n\t}\n\n\toverride set(key: K, value: V): this {\n\t\tsuper.set(key, value, Touch.AsNew);\n\t\tthis.checkTrim();\n\t\treturn this;\n\t}\n\n\tprivate checkTrim() {\n\t\tif (this.size > this._limit) {\n\t\t\tthis.trimOld(Math.round(this._limit * this._ratio));\n\t\t}\n\t}\n}\n\nexport class CounterSet<T> {\n\n\tprivate map = new Map<T, number>();\n\n\tadd(value: T): CounterSet<T> {\n\t\tthis.map.set(value, (this.map.get(value) || 0) + 1);\n\t\treturn this;\n\t}\n\n\tdelete(value: T): boolean {\n\t\tlet counter = this.map.get(value) || 0;\n\n\t\tif (counter === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tcounter--;\n\n\t\tif (counter === 0) {\n\t\t\tthis.map.delete(value);\n\t\t} else {\n\t\t\tthis.map.set(value, counter);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\thas(value: T): boolean {\n\t\treturn this.map.has(value);\n\t}\n}\n\n/**\n * A map that allows access both by keys and values.\n * **NOTE**: values need to be unique.\n */\nexport class BidirectionalMap<K, V> {\n\n\tprivate readonly _m1 = new Map<K, V>();\n\tprivate readonly _m2 = new Map<V, K>();\n\n\tconstructor(entries?: readonly (readonly [K, V])[]) {\n\t\tif (entries) {\n\t\t\tfor (const [key, value] of entries) {\n\t\t\t\tthis.set(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tthis._m1.clear();\n\t\tthis._m2.clear();\n\t}\n\n\tset(key: K, value: V): void {\n\t\tthis._m1.set(key, value);\n\t\tthis._m2.set(value, key);\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this._m1.get(key);\n\t}\n\n\tgetKey(value: V): K | undefined {\n\t\treturn this._m2.get(value);\n\t}\n\n\tdelete(key: K): boolean {\n\t\tconst value = this._m1.get(key);\n\t\tif (value === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._m1.delete(key);\n\t\tthis._m2.delete(value);\n\t\treturn true;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: BidirectionalMap<K, V>) => void, thisArg?: any): void {\n\t\tthis._m1.forEach((value, key) => {\n\t\t\tcallbackfn.call(thisArg, value, key, this);\n\t\t});\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\treturn this._m1.keys();\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\treturn this._m1.values();\n\t}\n}\n\nexport class SetMap<K, V> {\n\n\tprivate map = new Map<K, Set<V>>();\n\n\tadd(key: K, value: V): void {\n\t\tlet values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\tvalues = new Set<V>();\n\t\t\tthis.map.set(key, values);\n\t\t}\n\n\t\tvalues.add(value);\n\t}\n\n\tdelete(key: K, value: V): void {\n\t\tconst values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\treturn;\n\t\t}\n\n\t\tvalues.delete(value);\n\n\t\tif (values.size === 0) {\n\t\t\tthis.map.delete(key);\n\t\t}\n\t}\n\n\tforEach(key: K, fn: (value: V) => void): void {\n\t\tconst values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\treturn;\n\t\t}\n\n\t\tvalues.forEach(fn);\n\t}\n\n\tget(key: K): ReadonlySet<V> {\n\t\tconst values = this.map.get(key);\n\t\tif (!values) {\n\t\t\treturn new Set<V>();\n\t\t}\n\t\treturn values;\n\t}\n}\n\nexport function mapsStrictEqualIgnoreOrder(a: Map<unknown, unknown>, b: Map<unknown, unknown>): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\tif (a.size !== b.size) {\n\t\treturn false;\n\t}\n\n\tfor (const [key, value] of a) {\n\t\tif (!b.has(key) || b.get(key) !== value) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfor (const [key] of b) {\n\t\tif (!a.has(key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { compareBy, numberComparator } from 'vs/base/common/arrays';\nimport { groupBy } from 'vs/base/common/collections';\nimport { SetMap } from './map';\nimport { createSingleCallFunction } from 'vs/base/common/functional';\nimport { Iterable } from 'vs/base/common/iterator';\n\n// #region Disposable Tracking\n\n/**\n * Enables logging of potentially leaked disposables.\n *\n * A disposable is considered leaked if it is not disposed or not registered as the child of\n * another disposable. This tracking is very simple an only works for classes that either\n * extend Disposable or use a DisposableStore. This means there are a lot of false positives.\n */\nconst TRACK_DISPOSABLES = false;\nlet disposableTracker: IDisposableTracker | null = null;\n\nexport interface IDisposableTracker {\n\t/**\n\t * Is called on construction of a disposable.\n\t*/\n\ttrackDisposable(disposable: IDisposable): void;\n\n\t/**\n\t * Is called when a disposable is registered as child of another disposable (e.g. {@link DisposableStore}).\n\t * If parent is `null`, the disposable is removed from its former parent.\n\t*/\n\tsetParent(child: IDisposable, parent: IDisposable | null): void;\n\n\t/**\n\t * Is called after a disposable is disposed.\n\t*/\n\tmarkAsDisposed(disposable: IDisposable): void;\n\n\t/**\n\t * Indicates that the given object is a singleton which does not need to be disposed.\n\t*/\n\tmarkAsSingleton(disposable: IDisposable): void;\n}\n\nexport interface DisposableInfo {\n\tvalue: IDisposable;\n\tsource: string | null;\n\tparent: IDisposable | null;\n\tisSingleton: boolean;\n\tidx: number;\n}\n\nexport class DisposableTracker implements IDisposableTracker {\n\tprivate static idx = 0;\n\n\tprivate readonly livingDisposables = new Map<IDisposable, DisposableInfo>();\n\n\tprivate getDisposableData(d: IDisposable): DisposableInfo {\n\t\tlet val = this.livingDisposables.get(d);\n\t\tif (!val) {\n\t\t\tval = { parent: null, source: null, isSingleton: false, value: d, idx: DisposableTracker.idx++ };\n\t\t\tthis.livingDisposables.set(d, val);\n\t\t}\n\t\treturn val;\n\t}\n\n\ttrackDisposable(d: IDisposable): void {\n\t\tconst data = this.getDisposableData(d);\n\t\tif (!data.source) {\n\t\t\tdata.source =\n\t\t\t\tnew Error().stack!;\n\t\t}\n\t}\n\n\tsetParent(child: IDisposable, parent: IDisposable | null): void {\n\t\tconst data = this.getDisposableData(child);\n\t\tdata.parent = parent;\n\t}\n\n\tmarkAsDisposed(x: IDisposable): void {\n\t\tthis.livingDisposables.delete(x);\n\t}\n\n\tmarkAsSingleton(disposable: IDisposable): void {\n\t\tthis.getDisposableData(disposable).isSingleton = true;\n\t}\n\n\tprivate getRootParent(data: DisposableInfo, cache: Map<DisposableInfo, DisposableInfo>): DisposableInfo {\n\t\tconst cacheValue = cache.get(data);\n\t\tif (cacheValue) {\n\t\t\treturn cacheValue;\n\t\t}\n\n\t\tconst result = data.parent ? this.getRootParent(this.getDisposableData(data.parent), cache) : data;\n\t\tcache.set(data, result);\n\t\treturn result;\n\t}\n\n\tgetTrackedDisposables(): IDisposable[] {\n\t\tconst rootParentCache = new Map<DisposableInfo, DisposableInfo>();\n\n\t\tconst leaking = [...this.livingDisposables.entries()]\n\t\t\t.filter(([, v]) => v.source !== null && !this.getRootParent(v, rootParentCache).isSingleton)\n\t\t\t.flatMap(([k]) => k);\n\n\t\treturn leaking;\n\t}\n\n\tcomputeLeakingDisposables(maxReported = 10, preComputedLeaks?: DisposableInfo[]): { leaks: DisposableInfo[]; details: string } | undefined {\n\t\tlet uncoveredLeakingObjs: DisposableInfo[] | undefined;\n\t\tif (preComputedLeaks) {\n\t\t\tuncoveredLeakingObjs = preComputedLeaks;\n\t\t} else {\n\t\t\tconst rootParentCache = new Map<DisposableInfo, DisposableInfo>();\n\n\t\t\tconst leakingObjects = [...this.livingDisposables.values()]\n\t\t\t\t.filter((info) => info.source !== null && !this.getRootParent(info, rootParentCache).isSingleton);\n\n\t\t\tif (leakingObjects.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst leakingObjsSet = new Set(leakingObjects.map(o => o.value));\n\n\t\t\t// Remove all objects that are a child of other leaking objects. Assumes there are no cycles.\n\t\t\tuncoveredLeakingObjs = leakingObjects.filter(l => {\n\t\t\t\treturn !(l.parent && leakingObjsSet.has(l.parent));\n\t\t\t});\n\n\t\t\tif (uncoveredLeakingObjs.length === 0) {\n\t\t\t\tthrow new Error('There are cyclic diposable chains!');\n\t\t\t}\n\t\t}\n\n\t\tif (!uncoveredLeakingObjs) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tfunction getStackTracePath(leaking: DisposableInfo): string[] {\n\t\t\tfunction removePrefix(array: string[], linesToRemove: (string | RegExp)[]) {\n\t\t\t\twhile (array.length > 0 && linesToRemove.some(regexp => typeof regexp === 'string' ? regexp === array[0] : array[0].match(regexp))) {\n\t\t\t\t\tarray.shift();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lines = leaking.source!.split('\\n').map(p => p.trim().replace('at ', '')).filter(l => l !== '');\n\t\t\tremovePrefix(lines, ['Error', /^trackDisposable \\(.*\\)$/, /^DisposableTracker.trackDisposable \\(.*\\)$/]);\n\t\t\treturn lines.reverse();\n\t\t}\n\n\t\tconst stackTraceStarts = new SetMap<string, DisposableInfo>();\n\t\tfor (const leaking of uncoveredLeakingObjs) {\n\t\t\tconst stackTracePath = getStackTracePath(leaking);\n\t\t\tfor (let i = 0; i <= stackTracePath.length; i++) {\n\t\t\t\tstackTraceStarts.add(stackTracePath.slice(0, i).join('\\n'), leaking);\n\t\t\t}\n\t\t}\n\n\t\t// Put earlier leaks first\n\t\tuncoveredLeakingObjs.sort(compareBy(l => l.idx, numberComparator));\n\n\t\tlet message = '';\n\n\t\tlet i = 0;\n\t\tfor (const leaking of uncoveredLeakingObjs.slice(0, maxReported)) {\n\t\t\ti++;\n\t\t\tconst stackTracePath = getStackTracePath(leaking);\n\t\t\tconst stackTraceFormattedLines = [];\n\n\t\t\tfor (let i = 0; i < stackTracePath.length; i++) {\n\t\t\t\tlet line = stackTracePath[i];\n\t\t\t\tconst starts = stackTraceStarts.get(stackTracePath.slice(0, i + 1).join('\\n'));\n\t\t\t\tline = `(shared with ${starts.size}/${uncoveredLeakingObjs.length} leaks) at ${line}`;\n\n\t\t\t\tconst prevStarts = stackTraceStarts.get(stackTracePath.slice(0, i).join('\\n'));\n\t\t\t\tconst continuations = groupBy([...prevStarts].map(d => getStackTracePath(d)[i]), v => v);\n\t\t\t\tdelete continuations[stackTracePath[i]];\n\t\t\t\tfor (const [cont, set] of Object.entries(continuations)) {\n\t\t\t\t\tstackTraceFormattedLines.unshift(`    - stacktraces of ${set.length} other leaks continue with ${cont}`);\n\t\t\t\t}\n\n\t\t\t\tstackTraceFormattedLines.unshift(line);\n\t\t\t}\n\n\t\t\tmessage += `\\n\\n\\n==================== Leaking disposable ${i}/${uncoveredLeakingObjs.length}: ${leaking.value.constructor.name} ====================\\n${stackTraceFormattedLines.join('\\n')}\\n============================================================\\n\\n`;\n\t\t}\n\n\t\tif (uncoveredLeakingObjs.length > maxReported) {\n\t\t\tmessage += `\\n\\n\\n... and ${uncoveredLeakingObjs.length - maxReported} more leaking disposables\\n\\n`;\n\t\t}\n\n\t\treturn { leaks: uncoveredLeakingObjs, details: message };\n\t}\n}\n\nexport function setDisposableTracker(tracker: IDisposableTracker | null): void {\n\tdisposableTracker = tracker;\n}\n\nif (TRACK_DISPOSABLES) {\n\tconst __is_disposable_tracked__ = '__is_disposable_tracked__';\n\tsetDisposableTracker(new class implements IDisposableTracker {\n\t\ttrackDisposable(x: IDisposable): void {\n\t\t\tconst stack = new Error('Potentially leaked disposable').stack!;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!(x as any)[__is_disposable_tracked__]) {\n\t\t\t\t\tconsole.log(stack);\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t}\n\n\t\tsetParent(child: IDisposable, parent: IDisposable | null): void {\n\t\t\tif (child && child !== Disposable.None) {\n\t\t\t\ttry {\n\t\t\t\t\t(child as any)[__is_disposable_tracked__] = true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmarkAsDisposed(disposable: IDisposable): void {\n\t\t\tif (disposable && disposable !== Disposable.None) {\n\t\t\t\ttry {\n\t\t\t\t\t(disposable as any)[__is_disposable_tracked__] = true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmarkAsSingleton(disposable: IDisposable): void { }\n\t});\n}\n\nexport function trackDisposable<T extends IDisposable>(x: T): T {\n\tdisposableTracker?.trackDisposable(x);\n\treturn x;\n}\n\nexport function markAsDisposed(disposable: IDisposable): void {\n\tdisposableTracker?.markAsDisposed(disposable);\n}\n\nfunction setParentOfDisposable(child: IDisposable, parent: IDisposable | null): void {\n\tdisposableTracker?.setParent(child, parent);\n}\n\nfunction setParentOfDisposables(children: IDisposable[], parent: IDisposable | null): void {\n\tif (!disposableTracker) {\n\t\treturn;\n\t}\n\tfor (const child of children) {\n\t\tdisposableTracker.setParent(child, parent);\n\t}\n}\n\n/**\n * Indicates that the given object is a singleton which does not need to be disposed.\n*/\nexport function markAsSingleton<T extends IDisposable>(singleton: T): T {\n\tdisposableTracker?.markAsSingleton(singleton);\n\treturn singleton;\n}\n\n// #endregion\n\n/**\n * An object that performs a cleanup operation when `.dispose()` is called.\n *\n * Some examples of how disposables are used:\n *\n * - An event listener that removes itself when `.dispose()` is called.\n * - A resource such as a file system watcher that cleans up the resource when `.dispose()` is called.\n * - The return value from registering a provider. When `.dispose()` is called, the provider is unregistered.\n */\nexport interface IDisposable {\n\tdispose(): void;\n}\n\n/**\n * Check if `thing` is {@link IDisposable disposable}.\n */\nexport function isDisposable<E extends object>(thing: E): thing is E & IDisposable {\n\treturn typeof (<IDisposable>thing).dispose === 'function' && (<IDisposable>thing).dispose.length === 0;\n}\n\n/**\n * Disposes of the value(s) passed in.\n */\nexport function dispose<T extends IDisposable>(disposable: T): T;\nexport function dispose<T extends IDisposable>(disposable: T | undefined): T | undefined;\nexport function dispose<T extends IDisposable, A extends Iterable<T> = Iterable<T>>(disposables: A): A;\nexport function dispose<T extends IDisposable>(disposables: Array<T>): Array<T>;\nexport function dispose<T extends IDisposable>(disposables: ReadonlyArray<T>): ReadonlyArray<T>;\nexport function dispose<T extends IDisposable>(arg: T | Iterable<T> | undefined): any {\n\tif (Iterable.is(arg)) {\n\t\tconst errors: any[] = [];\n\n\t\tfor (const d of arg) {\n\t\t\tif (d) {\n\t\t\t\ttry {\n\t\t\t\t\td.dispose();\n\t\t\t\t} catch (e) {\n\t\t\t\t\terrors.push(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (errors.length === 1) {\n\t\t\tthrow errors[0];\n\t\t} else if (errors.length > 1) {\n\t\t\tthrow new AggregateError(errors, 'Encountered errors while disposing of store');\n\t\t}\n\n\t\treturn Array.isArray(arg) ? [] : arg;\n\t} else if (arg) {\n\t\targ.dispose();\n\t\treturn arg;\n\t}\n}\n\nexport function disposeIfDisposable<T extends IDisposable | object>(disposables: Array<T>): Array<T> {\n\tfor (const d of disposables) {\n\t\tif (isDisposable(d)) {\n\t\t\td.dispose();\n\t\t}\n\t}\n\treturn [];\n}\n\n/**\n * Combine multiple disposable values into a single {@link IDisposable}.\n */\nexport function combinedDisposable(...disposables: IDisposable[]): IDisposable {\n\tconst parent = toDisposable(() => dispose(disposables));\n\tsetParentOfDisposables(disposables, parent);\n\treturn parent;\n}\n\n/**\n * Turn a function that implements dispose into an {@link IDisposable}.\n *\n * @param fn Clean up function, guaranteed to be called only **once**.\n */\nexport function toDisposable(fn: () => void): IDisposable {\n\tconst self = trackDisposable({\n\t\tdispose: createSingleCallFunction(() => {\n\t\t\tmarkAsDisposed(self);\n\t\t\tfn();\n\t\t})\n\t});\n\treturn self;\n}\n\n/**\n * Manages a collection of disposable values.\n *\n * This is the preferred way to manage multiple disposables. A `DisposableStore` is safer to work with than an\n * `IDisposable[]` as it considers edge cases, such as registering the same value multiple times or adding an item to a\n * store that has already been disposed of.\n */\nexport class DisposableStore implements IDisposable {\n\n\tstatic DISABLE_DISPOSED_WARNING = false;\n\n\tprivate readonly _toDispose = new Set<IDisposable>();\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\t/**\n\t * Dispose of all registered disposables and mark this object as disposed.\n\t *\n\t * Any future disposables added to this object will be disposed of on `add`.\n\t */\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tmarkAsDisposed(this);\n\t\tthis._isDisposed = true;\n\t\tthis.clear();\n\t}\n\n\t/**\n\t * @return `true` if this object has been disposed of.\n\t */\n\tpublic get isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Dispose of all registered disposables but do not mark this object as disposed.\n\t */\n\tpublic clear(): void {\n\t\tif (this._toDispose.size === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tdispose(this._toDispose);\n\t\t} finally {\n\t\t\tthis._toDispose.clear();\n\t\t}\n\t}\n\n\t/**\n\t * Add a new {@link IDisposable disposable} to the collection.\n\t */\n\tpublic add<T extends IDisposable>(o: T): T {\n\t\tif (!o) {\n\t\t\treturn o;\n\t\t}\n\t\tif ((o as unknown as DisposableStore) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\n\t\tsetParentOfDisposable(o, this);\n\t\tif (this._isDisposed) {\n\t\t\tif (!DisposableStore.DISABLE_DISPOSED_WARNING) {\n\t\t\t\tconsole.warn(new Error('Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!').stack);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._toDispose.add(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t/**\n\t * Deletes a disposable from store and disposes of it. This will not throw or warn and proceed to dispose the\n\t * disposable even when the disposable is not part in the store.\n\t */\n\tpublic delete<T extends IDisposable>(o: T): void {\n\t\tif (!o) {\n\t\t\treturn;\n\t\t}\n\t\tif ((o as unknown as DisposableStore) === this) {\n\t\t\tthrow new Error('Cannot dispose a disposable on itself!');\n\t\t}\n\t\tthis._toDispose.delete(o);\n\t\to.dispose();\n\t}\n\n\t/**\n\t * Deletes the value from the store, but does not dispose it.\n\t */\n\tpublic deleteAndLeak<T extends IDisposable>(o: T): void {\n\t\tif (!o) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._toDispose.has(o)) {\n\t\t\tthis._toDispose.delete(o);\n\t\t\tsetParentOfDisposable(o, null);\n\t\t}\n\t}\n}\n\n/**\n * Abstract base class for a {@link IDisposable disposable} object.\n *\n * Subclasses can {@linkcode _register} disposables that will be automatically cleaned up when this object is disposed of.\n */\nexport abstract class Disposable implements IDisposable {\n\n\t/**\n\t * A disposable that does nothing when it is disposed of.\n\t *\n\t * TODO: This should not be a static property.\n\t */\n\tstatic readonly None = Object.freeze<IDisposable>({ dispose() { } });\n\n\tprotected readonly _store = new DisposableStore();\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t\tsetParentOfDisposable(this._store, this);\n\t}\n\n\tpublic dispose(): void {\n\t\tmarkAsDisposed(this);\n\n\t\tthis._store.dispose();\n\t}\n\n\t/**\n\t * Adds `o` to the collection of disposables managed by this object.\n\t */\n\tprotected _register<T extends IDisposable>(o: T): T {\n\t\tif ((o as unknown as Disposable) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\t\treturn this._store.add(o);\n\t}\n}\n\n/**\n * Manages the lifecycle of a disposable value that may be changed.\n *\n * This ensures that when the disposable value is changed, the previously held disposable is disposed of. You can\n * also register a `MutableDisposable` on a `Disposable` to ensure it is automatically cleaned up.\n */\nexport class MutableDisposable<T extends IDisposable> implements IDisposable {\n\tprivate _value?: T;\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tget value(): T | undefined {\n\t\treturn this._isDisposed ? undefined : this._value;\n\t}\n\n\tset value(value: T | undefined) {\n\t\tif (this._isDisposed || value === this._value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._value?.dispose();\n\t\tif (value) {\n\t\t\tsetParentOfDisposable(value, this);\n\t\t}\n\t\tthis._value = value;\n\t}\n\n\t/**\n\t * Resets the stored value and disposed of the previously stored value.\n\t */\n\tclear(): void {\n\t\tthis.value = undefined;\n\t}\n\n\tdispose(): void {\n\t\tthis._isDisposed = true;\n\t\tmarkAsDisposed(this);\n\t\tthis._value?.dispose();\n\t\tthis._value = undefined;\n\t}\n\n\t/**\n\t * Clears the value, but does not dispose it.\n\t * The old value is returned.\n\t*/\n\tclearAndLeak(): T | undefined {\n\t\tconst oldValue = this._value;\n\t\tthis._value = undefined;\n\t\tif (oldValue) {\n\t\t\tsetParentOfDisposable(oldValue, null);\n\t\t}\n\t\treturn oldValue;\n\t}\n}\n\n/**\n * Manages the lifecycle of a disposable value that may be changed like {@link MutableDisposable}, but the value must\n * exist and cannot be undefined.\n */\nexport class MandatoryMutableDisposable<T extends IDisposable> implements IDisposable {\n\tprivate _disposable = new MutableDisposable<T>();\n\tprivate _isDisposed = false;\n\n\tconstructor(initialValue: T) {\n\t\tthis._disposable.value = initialValue;\n\t}\n\n\tget value(): T {\n\t\treturn this._disposable.value!;\n\t}\n\n\tset value(value: T) {\n\t\tif (this._isDisposed || value === this._disposable.value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._disposable.value = value;\n\t}\n\n\tdispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._disposable.dispose();\n\t}\n}\n\nexport class RefCountedDisposable {\n\n\tprivate _counter: number = 1;\n\n\tconstructor(\n\t\tprivate readonly _disposable: IDisposable,\n\t) { }\n\n\tacquire() {\n\t\tthis._counter++;\n\t\treturn this;\n\t}\n\n\trelease() {\n\t\tif (--this._counter === 0) {\n\t\t\tthis._disposable.dispose();\n\t\t}\n\t\treturn this;\n\t}\n}\n\n/**\n * A safe disposable can be `unset` so that a leaked reference (listener)\n * can be cut-off.\n */\nexport class SafeDisposable implements IDisposable {\n\n\tdispose: () => void = () => { };\n\tunset: () => void = () => { };\n\tisset: () => boolean = () => false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tset(fn: Function) {\n\t\tlet callback: Function | undefined = fn;\n\t\tthis.unset = () => callback = undefined;\n\t\tthis.isset = () => callback !== undefined;\n\t\tthis.dispose = () => {\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t\tcallback = undefined;\n\t\t\t\tmarkAsDisposed(this);\n\t\t\t}\n\t\t};\n\t\treturn this;\n\t}\n}\n\nexport interface IReference<T> extends IDisposable {\n\treadonly object: T;\n}\n\nexport abstract class ReferenceCollection<T> {\n\n\tprivate readonly references: Map<string, { readonly object: T; counter: number }> = new Map();\n\n\tacquire(key: string, ...args: any[]): IReference<T> {\n\t\tlet reference = this.references.get(key);\n\n\t\tif (!reference) {\n\t\t\treference = { counter: 0, object: this.createReferencedObject(key, ...args) };\n\t\t\tthis.references.set(key, reference);\n\t\t}\n\n\t\tconst { object } = reference;\n\t\tconst dispose = createSingleCallFunction(() => {\n\t\t\tif (--reference.counter === 0) {\n\t\t\t\tthis.destroyReferencedObject(key, reference.object);\n\t\t\t\tthis.references.delete(key);\n\t\t\t}\n\t\t});\n\n\t\treference.counter++;\n\n\t\treturn { object, dispose };\n\t}\n\n\tprotected abstract createReferencedObject(key: string, ...args: any[]): T;\n\tprotected abstract destroyReferencedObject(key: string, object: T): void;\n}\n\n/**\n * Unwraps a reference collection of promised values. Makes sure\n * references are disposed whenever promises get rejected.\n */\nexport class AsyncReferenceCollection<T> {\n\n\tconstructor(private referenceCollection: ReferenceCollection<Promise<T>>) { }\n\n\tasync acquire(key: string, ...args: any[]): Promise<IReference<T>> {\n\t\tconst ref = this.referenceCollection.acquire(key, ...args);\n\n\t\ttry {\n\t\t\tconst object = await ref.object;\n\n\t\t\treturn {\n\t\t\t\tobject,\n\t\t\t\tdispose: () => ref.dispose()\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tref.dispose();\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nexport class ImmortalReference<T> implements IReference<T> {\n\tconstructor(public object: T) { }\n\tdispose(): void { /* noop */ }\n}\n\nexport function disposeOnReturn(fn: (store: DisposableStore) => void): void {\n\tconst store = new DisposableStore();\n\ttry {\n\t\tfn(store);\n\t} finally {\n\t\tstore.dispose();\n\t}\n}\n\n/**\n * A map the manages the lifecycle of the values that it stores.\n */\nexport class DisposableMap<K, V extends IDisposable = IDisposable> implements IDisposable {\n\n\tprivate readonly _store = new Map<K, V>();\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\t/**\n\t * Disposes of all stored values and mark this object as disposed.\n\t *\n\t * Trying to use this object after it has been disposed of is an error.\n\t */\n\tdispose(): void {\n\t\tmarkAsDisposed(this);\n\t\tthis._isDisposed = true;\n\t\tthis.clearAndDisposeAll();\n\t}\n\n\t/**\n\t * Disposes of all stored values and clear the map, but DO NOT mark this object as disposed.\n\t */\n\tclearAndDisposeAll(): void {\n\t\tif (!this._store.size) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tdispose(this._store.values());\n\t\t} finally {\n\t\t\tthis._store.clear();\n\t\t}\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this._store.has(key);\n\t}\n\n\tget size(): number {\n\t\treturn this._store.size;\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this._store.get(key);\n\t}\n\n\tset(key: K, value: V, skipDisposeOnOverwrite = false): void {\n\t\tif (this._isDisposed) {\n\t\t\tconsole.warn(new Error('Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!').stack);\n\t\t}\n\n\t\tif (!skipDisposeOnOverwrite) {\n\t\t\tthis._store.get(key)?.dispose();\n\t\t}\n\n\t\tthis._store.set(key, value);\n\t}\n\n\t/**\n\t * Delete the value stored for `key` from this map and also dispose of it.\n\t */\n\tdeleteAndDispose(key: K): void {\n\t\tthis._store.get(key)?.dispose();\n\t\tthis._store.delete(key);\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\treturn this._store.keys();\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\treturn this._store.values();\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this._store[Symbol.iterator]();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const LANGUAGE_DEFAULT = 'en';\n\nlet _isWindows = false;\nlet _isMacintosh = false;\nlet _isLinux = false;\nlet _isLinuxSnap = false;\nlet _isNative = false;\nlet _isWeb = false;\nlet _isElectron = false;\nlet _isIOS = false;\nlet _isCI = false;\nlet _isMobile = false;\nlet _locale: string | undefined = undefined;\nlet _language: string = LANGUAGE_DEFAULT;\nlet _platformLocale: string = LANGUAGE_DEFAULT;\nlet _translationsConfigFile: string | undefined = undefined;\nlet _userAgent: string | undefined = undefined;\n\ninterface NLSConfig {\n\tlocale: string;\n\tosLocale: string;\n\tavailableLanguages: { [key: string]: string };\n\t_translationsConfigFile: string;\n}\n\nexport interface IProcessEnvironment {\n\t[key: string]: string | undefined;\n}\n\n/**\n * This interface is intentionally not identical to node.js\n * process because it also works in sandboxed environments\n * where the process object is implemented differently. We\n * define the properties here that we need for `platform`\n * to work and nothing else.\n */\nexport interface INodeProcess {\n\tplatform: string;\n\tarch: string;\n\tenv: IProcessEnvironment;\n\tversions?: {\n\t\telectron?: string;\n\t\tchrome?: string;\n\t};\n\ttype?: string;\n\tcwd: () => string;\n}\n\ndeclare const process: INodeProcess;\n\nconst $globalThis: any = globalThis;\n\nlet nodeProcess: INodeProcess | undefined = undefined;\nif (typeof $globalThis.vscode !== 'undefined' && typeof $globalThis.vscode.process !== 'undefined') {\n\t// Native environment (sandboxed)\n\tnodeProcess = $globalThis.vscode.process;\n} else if (typeof process !== 'undefined') {\n\t// Native environment (non-sandboxed)\n\tnodeProcess = process;\n}\n\nconst isElectronProcess = typeof nodeProcess?.versions?.electron === 'string';\nconst isElectronRenderer = isElectronProcess && nodeProcess?.type === 'renderer';\n\ninterface INavigator {\n\tuserAgent: string;\n\tmaxTouchPoints?: number;\n\tlanguage: string;\n}\ndeclare const navigator: INavigator;\n\n// Native environment\nif (typeof nodeProcess === 'object') {\n\t_isWindows = (nodeProcess.platform === 'win32');\n\t_isMacintosh = (nodeProcess.platform === 'darwin');\n\t_isLinux = (nodeProcess.platform === 'linux');\n\t_isLinuxSnap = _isLinux && !!nodeProcess.env['SNAP'] && !!nodeProcess.env['SNAP_REVISION'];\n\t_isElectron = isElectronProcess;\n\t_isCI = !!nodeProcess.env['CI'] || !!nodeProcess.env['BUILD_ARTIFACTSTAGINGDIRECTORY'];\n\t_locale = LANGUAGE_DEFAULT;\n\t_language = LANGUAGE_DEFAULT;\n\tconst rawNlsConfig = nodeProcess.env['VSCODE_NLS_CONFIG'];\n\tif (rawNlsConfig) {\n\t\ttry {\n\t\t\tconst nlsConfig: NLSConfig = JSON.parse(rawNlsConfig);\n\t\t\tconst resolved = nlsConfig.availableLanguages['*'];\n\t\t\t_locale = nlsConfig.locale;\n\t\t\t_platformLocale = nlsConfig.osLocale;\n\t\t\t// VSCode's default language is 'en'\n\t\t\t_language = resolved ? resolved : LANGUAGE_DEFAULT;\n\t\t\t_translationsConfigFile = nlsConfig._translationsConfigFile;\n\t\t} catch (e) {\n\t\t}\n\t}\n\t_isNative = true;\n}\n\n// Web environment\nelse if (typeof navigator === 'object' && !isElectronRenderer) {\n\t_userAgent = navigator.userAgent;\n\t_isWindows = _userAgent.indexOf('Windows') >= 0;\n\t_isMacintosh = _userAgent.indexOf('Macintosh') >= 0;\n\t_isIOS = (_userAgent.indexOf('Macintosh') >= 0 || _userAgent.indexOf('iPad') >= 0 || _userAgent.indexOf('iPhone') >= 0) && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0;\n\t_isLinux = _userAgent.indexOf('Linux') >= 0;\n\t_isMobile = _userAgent?.indexOf('Mobi') >= 0;\n\t_isWeb = true;\n\n\t_locale = LANGUAGE_DEFAULT;\n\t_language = _locale;\n\t_platformLocale = navigator.language;\n\tconst el = typeof document !== 'undefined' && document.getElementById('vscode-remote-nls-configuration');\n\tconst rawNlsConfig = el && el.getAttribute('data-settings');\n\tif (rawNlsConfig) {\n\t\ttry {\n\t\t\tconst nlsConfig: NLSConfig = JSON.parse(rawNlsConfig);\n\t\t\tconst resolved = nlsConfig.availableLanguages['*'];\n\t\t\t_locale = nlsConfig.locale;\n\t\t\t_platformLocale = nlsConfig.osLocale;\n\t\t\t_language = resolved ? resolved : LANGUAGE_DEFAULT;\n\t\t\t_translationsConfigFile = nlsConfig._translationsConfigFile;\n\t\t} catch (error) { /* Oh well. */ }\n\t}\n}\n\n// Unknown environment\nelse {\n\tconsole.error('Unable to resolve platform.');\n}\n\nexport const enum Platform {\n\tWeb,\n\tMac,\n\tLinux,\n\tWindows\n}\nexport type PlatformName = 'Web' | 'Windows' | 'Mac' | 'Linux';\n\nexport function PlatformToString(platform: Platform): PlatformName {\n\tswitch (platform) {\n\t\tcase Platform.Web: return 'Web';\n\t\tcase Platform.Mac: return 'Mac';\n\t\tcase Platform.Linux: return 'Linux';\n\t\tcase Platform.Windows: return 'Windows';\n\t}\n}\n\nlet _platform: Platform = Platform.Web;\nif (_isMacintosh) {\n\t_platform = Platform.Mac;\n} else if (_isWindows) {\n\t_platform = Platform.Windows;\n} else if (_isLinux) {\n\t_platform = Platform.Linux;\n}\n\nexport const isWindows = _isWindows;\nexport const isMacintosh = _isMacintosh;\nexport const isLinux = _isLinux;\nexport const isLinuxSnap = _isLinuxSnap;\nexport const isNative = _isNative;\nexport const isElectron = _isElectron;\nexport const isWeb = _isWeb;\nexport const isWebWorker = (_isWeb && typeof $globalThis.importScripts === 'function');\nexport const webWorkerOrigin = isWebWorker ? $globalThis.origin : undefined;\nexport const isIOS = _isIOS;\nexport const isMobile = _isMobile;\n/**\n * Whether we run inside a CI environment, such as\n * GH actions or Azure Pipelines.\n */\nexport const isCI = _isCI;\nexport const platform = _platform;\nexport const userAgent = _userAgent;\n\n/**\n * The language used for the user interface. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese)\n */\nexport const language = _language;\n\nexport namespace Language {\n\n\texport function value(): string {\n\t\treturn language;\n\t}\n\n\texport function isDefaultVariant(): boolean {\n\t\tif (language.length === 2) {\n\t\t\treturn language === 'en';\n\t\t} else if (language.length >= 3) {\n\t\t\treturn language[0] === 'e' && language[1] === 'n' && language[2] === '-';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\texport function isDefault(): boolean {\n\t\treturn language === 'en';\n\t}\n}\n\n/**\n * The OS locale or the locale specified by --locale. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese). The UI is not necessarily shown in the provided locale.\n */\nexport const locale = _locale;\n\n/**\n * This will always be set to the OS/browser's locale regardless of\n * what was specified by --locale. The format of the string is all\n * lower case (e.g. zh-tw for Traditional Chinese). The UI is not\n * necessarily shown in the provided locale.\n */\nexport const platformLocale = _platformLocale;\n\n/**\n * The translations that are available through language packs.\n */\nexport const translationsConfigFile = _translationsConfigFile;\n\nexport const setTimeout0IsFaster = (typeof $globalThis.postMessage === 'function' && !$globalThis.importScripts);\n\n/**\n * See https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#:~:text=than%204%2C%20then-,set%20timeout%20to%204,-.\n *\n * Works similarly to `setTimeout(0)` but doesn't suffer from the 4ms artificial delay\n * that browsers set when the nesting level is > 5.\n */\nexport const setTimeout0 = (() => {\n\tif (setTimeout0IsFaster) {\n\t\tinterface IQueueElement {\n\t\t\tid: number;\n\t\t\tcallback: () => void;\n\t\t}\n\t\tconst pending: IQueueElement[] = [];\n\n\t\t$globalThis.addEventListener('message', (e: any) => {\n\t\t\tif (e.data && e.data.vscodeScheduleAsyncWork) {\n\t\t\t\tfor (let i = 0, len = pending.length; i < len; i++) {\n\t\t\t\t\tconst candidate = pending[i];\n\t\t\t\t\tif (candidate.id === e.data.vscodeScheduleAsyncWork) {\n\t\t\t\t\t\tpending.splice(i, 1);\n\t\t\t\t\t\tcandidate.callback();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet lastId = 0;\n\t\treturn (callback: () => void) => {\n\t\t\tconst myId = ++lastId;\n\t\t\tpending.push({\n\t\t\t\tid: myId,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t\t$globalThis.postMessage({ vscodeScheduleAsyncWork: myId }, '*');\n\t\t};\n\t}\n\treturn (callback: () => void) => setTimeout(callback);\n})();\n\nexport const enum OperatingSystem {\n\tWindows = 1,\n\tMacintosh = 2,\n\tLinux = 3\n}\nexport const OS = (_isMacintosh || _isIOS ? OperatingSystem.Macintosh : (_isWindows ? OperatingSystem.Windows : OperatingSystem.Linux));\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nexport function isLittleEndian(): boolean {\n\tif (!_isLittleEndianComputed) {\n\t\t_isLittleEndianComputed = true;\n\t\tconst test = new Uint8Array(2);\n\t\ttest[0] = 1;\n\t\ttest[1] = 2;\n\t\tconst view = new Uint16Array(test.buffer);\n\t\t_isLittleEndian = (view[0] === (2 << 8) + 1);\n\t}\n\treturn _isLittleEndian;\n}\n\nexport const isChrome = !!(userAgent && userAgent.indexOf('Chrome') >= 0);\nexport const isFirefox = !!(userAgent && userAgent.indexOf('Firefox') >= 0);\nexport const isSafari = !!(!isChrome && (userAgent && userAgent.indexOf('Safari') >= 0));\nexport const isEdge = !!(userAgent && userAgent.indexOf('Edg/') >= 0);\nexport const isAndroid = !!(userAgent && userAgent.indexOf('Android') >= 0);\n\nexport function isBigSurOrNewer(osVersion: string): boolean {\n\treturn parseFloat(osVersion) >= 20;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// fake definition so that the valid layers check won't trip on this\ndeclare const globalThis: { performance?: { now(): number } };\n\nconst hasPerformanceNow = (globalThis.performance && typeof globalThis.performance.now === 'function');\n\nexport class StopWatch {\n\n\tprivate _startTime: number;\n\tprivate _stopTime: number;\n\n\tprivate readonly _now: () => number;\n\n\tpublic static create(highResolution?: boolean): StopWatch {\n\t\treturn new StopWatch(highResolution);\n\t}\n\n\tconstructor(highResolution?: boolean) {\n\t\tthis._now = hasPerformanceNow && highResolution === false ? Date.now : globalThis.performance!.now.bind(globalThis.performance);\n\t\tthis._startTime = this._now();\n\t\tthis._stopTime = -1;\n\t}\n\n\tpublic stop(): void {\n\t\tthis._stopTime = this._now();\n\t}\n\n\tpublic reset(): void {\n\t\tthis._startTime = this._now();\n\t\tthis._stopTime = -1;\n\t}\n\n\tpublic elapsed(): number {\n\t\tif (this._stopTime !== -1) {\n\t\t\treturn this._stopTime - this._startTime;\n\t\t}\n\t\treturn this._now() - this._startTime;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { createSingleCallFunction } from 'vs/base/common/functional';\nimport { combinedDisposable, Disposable, DisposableMap, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { LinkedList } from 'vs/base/common/linkedList';\nimport { IObservable, IObserver } from 'vs/base/common/observable';\nimport { StopWatch } from 'vs/base/common/stopwatch';\nimport { MicrotaskDelay } from 'vs/base/common/symbols';\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever an emitter with listeners is disposed. That is a sign of code smell.\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableDisposeWithListenerWarning = false;\n// _enableDisposeWithListenerWarning = Boolean(\"TRUE\"); // causes a linter warning so that it cannot be pushed\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever a snapshotted event is used repeatedly without cleanup.\n// See https://github.com/microsoft/vscode/issues/142851\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableSnapshotPotentialLeakWarning = false;\n// _enableSnapshotPotentialLeakWarning = Boolean(\"TRUE\"); // causes a linter warning so that it cannot be pushed\n\n/**\n * An event with zero or one parameters that can be subscribed to. The event is a function itself.\n */\nexport interface Event<T> {\n\t(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n}\n\nexport namespace Event {\n\texport const None: Event<any> = () => Disposable.None;\n\n\tfunction _addLeakageTraceLogic(options: EmitterOptions) {\n\t\tif (_enableSnapshotPotentialLeakWarning) {\n\t\t\tconst { onDidAddListener: origListenerDidAdd } = options;\n\t\t\tconst stack = Stacktrace.create();\n\t\t\tlet count = 0;\n\t\t\toptions.onDidAddListener = () => {\n\t\t\t\tif (++count === 2) {\n\t\t\t\t\tconsole.warn('snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here');\n\t\t\t\t\tstack.print();\n\t\t\t\t}\n\t\t\t\torigListenerDidAdd?.();\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Given an event, returns another event which debounces calls and defers the listeners to a later task via a shared\n\t * `setTimeout`. The event is converted into a signal (`Event<void>`) to avoid additional object creation as a\n\t * result of merging events and to try prevent race conditions that could arise when using related deferred and\n\t * non-deferred events.\n\t *\n\t * This is useful for deferring non-critical work (eg. general UI updates) to ensure it does not block critical work\n\t * (eg. latency of keypress to text rendered).\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function defer(event: Event<unknown>, disposable?: DisposableStore): Event<void> {\n\t\treturn debounce<unknown, void>(event, () => void 0, 0, undefined, true, undefined, disposable);\n\t}\n\n\t/**\n\t * Given an event, returns another event which only fires once.\n\t *\n\t * @param event The event source for the new event.\n\t */\n\texport function once<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\t// we need this, in case the event fires during the listener call\n\t\t\tlet didFire = false;\n\t\t\tlet result: IDisposable | undefined = undefined;\n\t\t\tresult = event(e => {\n\t\t\t\tif (didFire) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (result) {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tdidFire = true;\n\t\t\t\t}\n\n\t\t\t\treturn listener.call(thisArgs, e);\n\t\t\t}, null, disposables);\n\n\t\t\tif (didFire) {\n\t\t\t\tresult.dispose();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\t/**\n\t * Maps an event of one type into an event of another type using a mapping function, similar to how\n\t * `Array.prototype.map` works.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param map The mapping function.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function map<I, O>(event: Event<I>, map: (i: I) => O, disposable?: DisposableStore): Event<O> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => listener.call(thisArgs, map(i)), null, disposables), disposable);\n\t}\n\n\t/**\n\t * Wraps an event in another event that performs some function on the event object before firing.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param each The function to perform on the event object.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function forEach<I>(event: Event<I>, each: (i: I) => void, disposable?: DisposableStore): Event<I> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => { each(i); listener.call(thisArgs, i); }, null, disposables), disposable);\n\t}\n\n\t/**\n\t * Wraps an event in another event that fires only when some condition is met.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param filter The filter function that defines the condition. The event will fire for the object if this function\n\t * returns true.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function filter<T, U>(event: Event<T | U>, filter: (e: T | U) => e is T, disposable?: DisposableStore): Event<T>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T>;\n\texport function filter<T, R>(event: Event<T | R>, filter: (e: T | R) => e is R, disposable?: DisposableStore): Event<R>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables), disposable);\n\t}\n\n\t/**\n\t * Given an event, returns the same event but typed as `Event<void>`.\n\t */\n\texport function signal<T>(event: Event<T>): Event<void> {\n\t\treturn event as Event<any> as Event<void>;\n\t}\n\n\t/**\n\t * Given a collection of events, returns a single event which emits whenever any of the provided events emit.\n\t */\n\texport function any<T>(...events: Event<T>[]): Event<T>;\n\texport function any(...events: Event<any>[]): Event<void>;\n\texport function any<T>(...events: Event<T>[]): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\tconst disposable = combinedDisposable(...events.map(event => event(e => listener.call(thisArgs, e))));\n\t\t\treturn addAndReturnDisposable(disposable, disposables);\n\t\t};\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function reduce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, initial?: O, disposable?: DisposableStore): Event<O> {\n\t\tlet output: O | undefined = initial;\n\n\t\treturn map<I, O>(event, e => {\n\t\t\toutput = merge(output, e);\n\t\t\treturn output;\n\t\t}, disposable);\n\t}\n\n\tfunction snapshot<T>(event: Event<T>, disposable: DisposableStore | undefined): Event<T> {\n\t\tlet listener: IDisposable | undefined;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tlistener = event(emitter.fire, emitter);\n\t\t\t},\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tlistener?.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<T>(options);\n\n\t\tdisposable?.add(emitter);\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Adds the IDisposable to the store if it's set, and returns it. Useful to\n\t * Event function implementation.\n\t */\n\tfunction addAndReturnDisposable<T extends IDisposable>(d: T, store: DisposableStore | IDisposable[] | undefined): T {\n\t\tif (store instanceof Array) {\n\t\t\tstore.push(d);\n\t\t} else if (store) {\n\t\t\tstore.add(d);\n\t\t}\n\t\treturn d;\n\t}\n\n\t/**\n\t * Given an event, creates a new emitter that event that will debounce events based on {@link delay} and give an\n\t * array event object of all events that fired.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The original event to debounce.\n\t * @param merge A function that reduces all events into a single event.\n\t * @param delay The number of milliseconds to debounce.\n\t * @param leading Whether to fire a leading event without debouncing.\n\t * @param flushOnListenerRemove Whether to fire all debounced events when a listener is removed. If this is not\n\t * specified, some events could go missing. Use this if it's important that all events are processed, even if the\n\t * listener gets disposed before the debounced event fires.\n\t * @param leakWarningThreshold See {@link EmitterOptions.leakWarningThreshold}.\n\t * @param disposable A disposable store to register the debounce emitter to.\n\t */\n\texport function debounce<T>(event: Event<T>, merge: (last: T | undefined, event: T) => T, delay?: number | typeof MicrotaskDelay, leading?: boolean, flushOnListenerRemove?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<T>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay?: number | typeof MicrotaskDelay, leading?: boolean, flushOnListenerRemove?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay: number | typeof MicrotaskDelay = 100, leading = false, flushOnListenerRemove = false, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O> {\n\t\tlet subscription: IDisposable;\n\t\tlet output: O | undefined = undefined;\n\t\tlet handle: any = undefined;\n\t\tlet numDebouncedCalls = 0;\n\t\tlet doFire: (() => void) | undefined;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tleakWarningThreshold,\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tsubscription = event(cur => {\n\t\t\t\t\tnumDebouncedCalls++;\n\t\t\t\t\toutput = merge(output, cur);\n\n\t\t\t\t\tif (leading && !handle) {\n\t\t\t\t\t\temitter.fire(output);\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tdoFire = () => {\n\t\t\t\t\t\tconst _output = output;\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t\thandle = undefined;\n\t\t\t\t\t\tif (!leading || numDebouncedCalls > 1) {\n\t\t\t\t\t\t\temitter.fire(_output!);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnumDebouncedCalls = 0;\n\t\t\t\t\t};\n\n\t\t\t\t\tif (typeof delay === 'number') {\n\t\t\t\t\t\tclearTimeout(handle);\n\t\t\t\t\t\thandle = setTimeout(doFire, delay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (handle === undefined) {\n\t\t\t\t\t\t\thandle = 0;\n\t\t\t\t\t\t\tqueueMicrotask(doFire);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tonWillRemoveListener() {\n\t\t\t\tif (flushOnListenerRemove && numDebouncedCalls > 0) {\n\t\t\t\t\tdoFire?.();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tdoFire = undefined;\n\t\t\t\tsubscription.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<O>(options);\n\n\t\tdisposable?.add(emitter);\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Debounces an event, firing after some delay (default=0) with an array of all event original objects.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function accumulate<T>(event: Event<T>, delay: number = 0, disposable?: DisposableStore): Event<T[]> {\n\t\treturn Event.debounce<T, T[]>(event, (last, e) => {\n\t\t\tif (!last) {\n\t\t\t\treturn [e];\n\t\t\t}\n\t\t\tlast.push(e);\n\t\t\treturn last;\n\t\t}, delay, undefined, true, undefined, disposable);\n\t}\n\n\t/**\n\t * Filters an event such that some condition is _not_ met more than once in a row, effectively ensuring duplicate\n\t * event objects from different sources do not fire the same event object.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param equals The equality condition.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t *\n\t * @example\n\t * ```\n\t * // Fire only one time when a single window is opened or focused\n\t * Event.latch(Event.any(onDidOpenWindow, onDidFocusWindow))\n\t * ```\n\t */\n\texport function latch<T>(event: Event<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b, disposable?: DisposableStore): Event<T> {\n\t\tlet firstCall = true;\n\t\tlet cache: T;\n\n\t\treturn filter(event, value => {\n\t\t\tconst shouldEmit = firstCall || !equals(value, cache);\n\t\t\tfirstCall = false;\n\t\t\tcache = value;\n\t\t\treturn shouldEmit;\n\t\t}, disposable);\n\t}\n\n\t/**\n\t * Splits an event whose parameter is a union type into 2 separate events for each type in the union.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @example\n\t * ```\n\t * const event = new EventEmitter<number | undefined>().event;\n\t * const [numberEvent, undefinedEvent] = Event.split(event, isUndefined);\n\t * ```\n\t *\n\t * @param event The event source for the new event.\n\t * @param isT A function that determines what event is of the first type.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function split<T, U>(event: Event<T | U>, isT: (e: T | U) => e is T, disposable?: DisposableStore): [Event<T>, Event<U>] {\n\t\treturn [\n\t\t\tEvent.filter(event, isT, disposable),\n\t\t\tEvent.filter(event, e => !isT(e), disposable) as Event<U>,\n\t\t];\n\t}\n\n\t/**\n\t * Buffers an event until it has a listener attached.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param flushAfterTimeout Determines whether to flush the buffer after a timeout immediately or after a\n\t * `setTimeout` when the first event listener is added.\n\t * @param _buffer Internal: A source event array used for tests.\n\t *\n\t * @example\n\t * ```\n\t * // Start accumulating events, when the first listener is attached, flush\n\t * // the event after a timeout such that multiple listeners attached before\n\t * // the timeout would receive the event\n\t * this.onInstallExtension = Event.buffer(service.onInstallExtension, true);\n\t * ```\n\t */\n\texport function buffer<T>(event: Event<T>, flushAfterTimeout = false, _buffer: T[] = [], disposable?: DisposableStore): Event<T> {\n\t\tlet buffer: T[] | null = _buffer.slice();\n\n\t\tlet listener: IDisposable | null = event(e => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.push(e);\n\t\t\t} else {\n\t\t\t\temitter.fire(e);\n\t\t\t}\n\t\t});\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(listener);\n\t\t}\n\n\t\tconst flush = () => {\n\t\t\tbuffer?.forEach(e => emitter.fire(e));\n\t\t\tbuffer = null;\n\t\t};\n\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tif (!listener) {\n\t\t\t\t\tlistener = event(e => emitter.fire(e));\n\t\t\t\t\tif (disposable) {\n\t\t\t\t\t\tdisposable.add(listener);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDidAddFirstListener() {\n\t\t\t\tif (buffer) {\n\t\t\t\t\tif (flushAfterTimeout) {\n\t\t\t\t\t\tsetTimeout(flush);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflush();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tif (listener) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t\tlistener = null;\n\t\t\t}\n\t\t});\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(emitter);\n\t\t}\n\n\t\treturn emitter.event;\n\t}\n\t/**\n\t * Wraps the event in an {@link IChainableEvent}, allowing a more functional programming style.\n\t *\n\t * @example\n\t * ```\n\t * // Normal\n\t * const onEnterPressNormal = Event.filter(\n\t *   Event.map(onKeyPress.event, e => new StandardKeyboardEvent(e)),\n\t *   e.keyCode === KeyCode.Enter\n\t * ).event;\n\t *\n\t * // Using chain\n\t * const onEnterPressChain = Event.chain(onKeyPress.event, $ => $\n\t *   .map(e => new StandardKeyboardEvent(e))\n\t *   .filter(e => e.keyCode === KeyCode.Enter)\n\t * );\n\t * ```\n\t */\n\texport function chain<T, R>(event: Event<T>, sythensize: ($: IChainableSythensis<T>) => IChainableSythensis<R>): Event<R> {\n\t\tconst fn: Event<R> = (listener, thisArgs, disposables) => {\n\t\t\tconst cs = sythensize(new ChainableSynthesis()) as ChainableSynthesis;\n\t\t\treturn event(function (value) {\n\t\t\t\tconst result = cs.evaluate(value);\n\t\t\t\tif (result !== HaltChainable) {\n\t\t\t\t\tlistener.call(thisArgs, result);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\n\t\treturn fn;\n\t}\n\n\tconst HaltChainable = Symbol('HaltChainable');\n\n\tclass ChainableSynthesis implements IChainableSythensis<any> {\n\t\tprivate readonly steps: ((input: any) => any)[] = [];\n\n\t\tmap<O>(fn: (i: any) => O): this {\n\t\t\tthis.steps.push(fn);\n\t\t\treturn this;\n\t\t}\n\n\t\tforEach(fn: (i: any) => void): this {\n\t\t\tthis.steps.push(v => {\n\t\t\t\tfn(v);\n\t\t\t\treturn v;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tfilter(fn: (e: any) => boolean): this {\n\t\t\tthis.steps.push(v => fn(v) ? v : HaltChainable);\n\t\t\treturn this;\n\t\t}\n\n\t\treduce<R>(merge: (last: R | undefined, event: any) => R, initial?: R | undefined): this {\n\t\t\tlet last = initial;\n\t\t\tthis.steps.push(v => {\n\t\t\t\tlast = merge(last, v);\n\t\t\t\treturn last;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tlatch(equals: (a: any, b: any) => boolean = (a, b) => a === b): ChainableSynthesis {\n\t\t\tlet firstCall = true;\n\t\t\tlet cache: any;\n\t\t\tthis.steps.push(value => {\n\t\t\t\tconst shouldEmit = firstCall || !equals(value, cache);\n\t\t\t\tfirstCall = false;\n\t\t\t\tcache = value;\n\t\t\t\treturn shouldEmit ? value : HaltChainable;\n\t\t\t});\n\n\t\t\treturn this;\n\t\t}\n\n\t\tpublic evaluate(value: any) {\n\t\t\tfor (const step of this.steps) {\n\t\t\t\tvalue = step(value);\n\t\t\t\tif (value === HaltChainable) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t}\n\n\texport interface IChainableSythensis<T> {\n\t\tmap<O>(fn: (i: T) => O): IChainableSythensis<O>;\n\t\tforEach(fn: (i: T) => void): IChainableSythensis<T>;\n\t\tfilter<R extends T>(fn: (e: T) => e is R): IChainableSythensis<R>;\n\t\tfilter(fn: (e: T) => boolean): IChainableSythensis<T>;\n\t\treduce<R>(merge: (last: R, event: T) => R, initial: R): IChainableSythensis<R>;\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R): IChainableSythensis<R>;\n\t\tlatch(equals?: (a: T, b: T) => boolean): IChainableSythensis<T>;\n\t}\n\n\texport interface NodeEventEmitter {\n\t\ton(event: string | symbol, listener: Function): unknown;\n\t\tremoveListener(event: string | symbol, listener: Function): unknown;\n\t}\n\n\t/**\n\t * Creates an {@link Event} from a node event emitter.\n\t */\n\texport function fromNodeEventEmitter<T>(emitter: NodeEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.on(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport interface DOMEventEmitter {\n\t\taddEventListener(event: string | symbol, listener: Function): void;\n\t\tremoveEventListener(event: string | symbol, listener: Function): void;\n\t}\n\n\t/**\n\t * Creates an {@link Event} from a DOM event emitter.\n\t */\n\texport function fromDOMEventEmitter<T>(emitter: DOMEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.addEventListener(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeEventListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\t/**\n\t * Creates a promise out of an event, using the {@link Event.once} helper.\n\t */\n\texport function toPromise<T>(event: Event<T>): Promise<T> {\n\t\treturn new Promise(resolve => once(event)(resolve));\n\t}\n\n\t/**\n\t * Creates an event out of a promise that fires once when the promise is\n\t * resolved with the result of the promise or `undefined`.\n\t */\n\texport function fromPromise<T>(promise: Promise<T>): Event<T | undefined> {\n\t\tconst result = new Emitter<T | undefined>();\n\n\t\tpromise.then(res => {\n\t\t\tresult.fire(res);\n\t\t}, () => {\n\t\t\tresult.fire(undefined);\n\t\t}).finally(() => {\n\t\t\tresult.dispose();\n\t\t});\n\n\t\treturn result.event;\n\t}\n\n\t/**\n\t * Adds a listener to an event and calls the listener immediately with undefined as the event object.\n\t *\n\t * @example\n\t * ```\n\t * // Initialize the UI and update it when dataChangeEvent fires\n\t * runAndSubscribe(dataChangeEvent, () => this._updateUI());\n\t * ```\n\t */\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T) => any, initial: T): IDisposable;\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T | undefined) => any): IDisposable;\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T | undefined) => any, initial?: T): IDisposable {\n\t\thandler(initial);\n\t\treturn event(e => handler(e));\n\t}\n\n\tclass EmitterObserver<T> implements IObserver {\n\n\t\treadonly emitter: Emitter<T>;\n\n\t\tprivate _counter = 0;\n\t\tprivate _hasChanged = false;\n\n\t\tconstructor(readonly _observable: IObservable<T, any>, store: DisposableStore | undefined) {\n\t\t\tconst options: EmitterOptions = {\n\t\t\t\tonWillAddFirstListener: () => {\n\t\t\t\t\t_observable.addObserver(this);\n\t\t\t\t},\n\t\t\t\tonDidRemoveLastListener: () => {\n\t\t\t\t\t_observable.removeObserver(this);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (!store) {\n\t\t\t\t_addLeakageTraceLogic(options);\n\t\t\t}\n\t\t\tthis.emitter = new Emitter<T>(options);\n\t\t\tif (store) {\n\t\t\t\tstore.add(this.emitter);\n\t\t\t}\n\t\t}\n\n\t\tbeginUpdate<T>(_observable: IObservable<T, void>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._counter++;\n\t\t}\n\n\t\thandlePossibleChange<T>(_observable: IObservable<T, unknown>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t}\n\n\t\thandleChange<T, TChange>(_observable: IObservable<T, TChange>, _change: TChange): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._hasChanged = true;\n\t\t}\n\n\t\tendUpdate<T>(_observable: IObservable<T, void>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._counter--;\n\t\t\tif (this._counter === 0) {\n\t\t\t\tthis._observable.reportChanges();\n\t\t\t\tif (this._hasChanged) {\n\t\t\t\t\tthis._hasChanged = false;\n\t\t\t\t\tthis.emitter.fire(this._observable.get());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates an event emitter that is fired when the observable changes.\n\t * Each listeners subscribes to the emitter.\n\t */\n\texport function fromObservable<T>(obs: IObservable<T, any>, store?: DisposableStore): Event<T> {\n\t\tconst observer = new EmitterObserver(obs, store);\n\t\treturn observer.emitter.event;\n\t}\n\n\t/**\n\t * Each listener is attached to the observable directly.\n\t */\n\texport function fromObservableLight(observable: IObservable<any>): Event<void> {\n\t\treturn (listener, thisArgs, disposables) => {\n\t\t\tlet count = 0;\n\t\t\tlet didChange = false;\n\t\t\tconst observer: IObserver = {\n\t\t\t\tbeginUpdate() {\n\t\t\t\t\tcount++;\n\t\t\t\t},\n\t\t\t\tendUpdate() {\n\t\t\t\t\tcount--;\n\t\t\t\t\tif (count === 0) {\n\t\t\t\t\t\tobservable.reportChanges();\n\t\t\t\t\t\tif (didChange) {\n\t\t\t\t\t\t\tdidChange = false;\n\t\t\t\t\t\t\tlistener.call(thisArgs);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thandlePossibleChange() {\n\t\t\t\t\t// noop\n\t\t\t\t},\n\t\t\t\thandleChange() {\n\t\t\t\t\tdidChange = true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tobservable.addObserver(observer);\n\t\t\tobservable.reportChanges();\n\t\t\tconst disposable = {\n\t\t\t\tdispose() {\n\t\t\t\t\tobservable.removeObserver(observer);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\tdisposables.add(disposable);\n\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\tdisposables.push(disposable);\n\t\t\t}\n\n\t\t\treturn disposable;\n\t\t};\n\t}\n}\n\nexport interface EmitterOptions {\n\t/**\n\t * Optional function that's called *before* the very first listener is added\n\t */\n\tonWillAddFirstListener?: Function;\n\t/**\n\t * Optional function that's called *after* the very first listener is added\n\t */\n\tonDidAddFirstListener?: Function;\n\t/**\n\t * Optional function that's called after a listener is added\n\t */\n\tonDidAddListener?: Function;\n\t/**\n\t * Optional function that's called *after* remove the very last listener\n\t */\n\tonDidRemoveLastListener?: Function;\n\t/**\n\t * Optional function that's called *before* a listener is removed\n\t */\n\tonWillRemoveListener?: Function;\n\t/**\n\t * Optional function that's called when a listener throws an error. Defaults to\n\t * {@link onUnexpectedError}\n\t */\n\tonListenerError?: (e: any) => void;\n\t/**\n\t * Number of listeners that are allowed before assuming a leak. Default to\n\t * a globally configured value\n\t *\n\t * @see setGlobalLeakWarningThreshold\n\t */\n\tleakWarningThreshold?: number;\n\t/**\n\t * Pass in a delivery queue, which is useful for ensuring\n\t * in order event delivery across multiple emitters.\n\t */\n\tdeliveryQueue?: EventDeliveryQueue;\n\n\t/** ONLY enable this during development */\n\t_profName?: string;\n}\n\n\nexport class EventProfiling {\n\n\tstatic readonly all = new Set<EventProfiling>();\n\n\tprivate static _idPool = 0;\n\n\treadonly name: string;\n\tpublic listenerCount: number = 0;\n\tpublic invocationCount = 0;\n\tpublic elapsedOverall = 0;\n\tpublic durations: number[] = [];\n\n\tprivate _stopWatch?: StopWatch;\n\n\tconstructor(name: string) {\n\t\tthis.name = `${name}_${EventProfiling._idPool++}`;\n\t\tEventProfiling.all.add(this);\n\t}\n\n\tstart(listenerCount: number): void {\n\t\tthis._stopWatch = new StopWatch();\n\t\tthis.listenerCount = listenerCount;\n\t}\n\n\tstop(): void {\n\t\tif (this._stopWatch) {\n\t\t\tconst elapsed = this._stopWatch.elapsed();\n\t\t\tthis.durations.push(elapsed);\n\t\t\tthis.elapsedOverall += elapsed;\n\t\t\tthis.invocationCount += 1;\n\t\t\tthis._stopWatch = undefined;\n\t\t}\n\t}\n}\n\nlet _globalLeakWarningThreshold = -1;\nexport function setGlobalLeakWarningThreshold(n: number): IDisposable {\n\tconst oldValue = _globalLeakWarningThreshold;\n\t_globalLeakWarningThreshold = n;\n\treturn {\n\t\tdispose() {\n\t\t\t_globalLeakWarningThreshold = oldValue;\n\t\t}\n\t};\n}\n\nclass LeakageMonitor {\n\n\tprivate _stacks: Map<string, number> | undefined;\n\tprivate _warnCountdown: number = 0;\n\n\tconstructor(\n\t\treadonly threshold: number,\n\t\treadonly name: string = Math.random().toString(18).slice(2, 5),\n\t) { }\n\n\tdispose(): void {\n\t\tthis._stacks?.clear();\n\t}\n\n\tcheck(stack: Stacktrace, listenerCount: number): undefined | (() => void) {\n\n\t\tconst threshold = this.threshold;\n\t\tif (threshold <= 0 || listenerCount < threshold) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this._stacks) {\n\t\t\tthis._stacks = new Map();\n\t\t}\n\t\tconst count = (this._stacks.get(stack.value) || 0);\n\t\tthis._stacks.set(stack.value, count + 1);\n\t\tthis._warnCountdown -= 1;\n\n\t\tif (this._warnCountdown <= 0) {\n\t\t\t// only warn on first exceed and then every time the limit\n\t\t\t// is exceeded by 50% again\n\t\t\tthis._warnCountdown = threshold * 0.5;\n\n\t\t\t// find most frequent listener and print warning\n\t\t\tlet topStack: string | undefined;\n\t\t\tlet topCount: number = 0;\n\t\t\tfor (const [stack, count] of this._stacks) {\n\t\t\t\tif (!topStack || topCount < count) {\n\t\t\t\t\ttopStack = stack;\n\t\t\t\t\ttopCount = count;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.warn(`[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`);\n\t\t\tconsole.warn(topStack!);\n\t\t}\n\n\t\treturn () => {\n\t\t\tconst count = (this._stacks!.get(stack.value) || 0);\n\t\t\tthis._stacks!.set(stack.value, count - 1);\n\t\t};\n\t}\n}\n\nclass Stacktrace {\n\n\tstatic create() {\n\t\treturn new Stacktrace(new Error().stack ?? '');\n\t}\n\n\tprivate constructor(readonly value: string) { }\n\n\tprint() {\n\t\tconsole.warn(this.value.split('\\n').slice(2).join('\\n'));\n\t}\n}\n\nlet id = 0;\nclass UniqueContainer<T> {\n\tstack?: Stacktrace;\n\tpublic id = id++;\n\tconstructor(public readonly value: T) { }\n}\nconst compactionThreshold = 2;\n\ntype ListenerContainer<T> = UniqueContainer<(data: T) => void>;\ntype ListenerOrListeners<T> = (ListenerContainer<T> | undefined)[] | ListenerContainer<T>;\n\nconst forEachListener = <T>(listeners: ListenerOrListeners<T>, fn: (c: ListenerContainer<T>) => void) => {\n\tif (listeners instanceof UniqueContainer) {\n\t\tfn(listeners);\n\t} else {\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tconst l = listeners[i];\n\t\t\tif (l) {\n\t\t\t\tfn(l);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * The Emitter can be used to expose an Event to the public\n * to fire it from the insides.\n * Sample:\n\tclass Document {\n\n\t\tprivate readonly _onDidChange = new Emitter<(value:string)=>any>();\n\n\t\tpublic onDidChange = this._onDidChange.event;\n\n\t\t// getter-style\n\t\t// get onDidChange(): Event<(value:string)=>any> {\n\t\t// \treturn this._onDidChange.event;\n\t\t// }\n\n\t\tprivate _doIt() {\n\t\t\t//...\n\t\t\tthis._onDidChange.fire(value);\n\t\t}\n\t}\n */\nexport class Emitter<T> {\n\n\tprivate readonly _options?: EmitterOptions;\n\tprivate readonly _leakageMon?: LeakageMonitor;\n\tprivate readonly _perfMon?: EventProfiling;\n\tprivate _disposed?: true;\n\tprivate _event?: Event<T>;\n\n\t/**\n\t * A listener, or list of listeners. A single listener is the most common\n\t * for event emitters (#185789), so we optimize that special case to avoid\n\t * wrapping it in an array (just like Node.js itself.)\n\t *\n\t * A list of listeners never 'downgrades' back to a plain function if\n\t * listeners are removed, for two reasons:\n\t *\n\t *  1. That's complicated (especially with the deliveryQueue)\n\t *  2. A listener with >1 listener is likely to have >1 listener again at\n\t *     some point, and swapping between arrays and functions may[citation needed]\n\t *     introduce unnecessary work and garbage.\n\t *\n\t * The array listeners can be 'sparse', to avoid reallocating the array\n\t * whenever any listener is added or removed. If more than `1 / compactionThreshold`\n\t * of the array is empty, only then is it resized.\n\t */\n\tprotected _listeners?: ListenerOrListeners<T>;\n\n\t/**\n\t * Always to be defined if _listeners is an array. It's no longer a true\n\t * queue, but holds the dispatching 'state'. If `fire()` is called on an\n\t * emitter, any work left in the _deliveryQueue is finished first.\n\t */\n\tprivate _deliveryQueue?: EventDeliveryQueuePrivate;\n\tprotected _size = 0;\n\n\tconstructor(options?: EmitterOptions) {\n\t\tthis._options = options;\n\t\tthis._leakageMon = _globalLeakWarningThreshold > 0 || this._options?.leakWarningThreshold ? new LeakageMonitor(this._options?.leakWarningThreshold ?? _globalLeakWarningThreshold) : undefined;\n\t\tthis._perfMon = this._options?._profName ? new EventProfiling(this._options._profName) : undefined;\n\t\tthis._deliveryQueue = this._options?.deliveryQueue as EventDeliveryQueuePrivate | undefined;\n\t}\n\n\tdispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\n\t\t\t// It is bad to have listeners at the time of disposing an emitter, it is worst to have listeners keep the emitter\n\t\t\t// alive via the reference that's embedded in their disposables. Therefore we loop over all remaining listeners and\n\t\t\t// unset their subscriptions/disposables. Looping and blaming remaining listeners is done on next tick because the\n\t\t\t// the following programming pattern is very popular:\n\t\t\t//\n\t\t\t// const someModel = this._disposables.add(new ModelObject()); // (1) create and register model\n\t\t\t// this._disposables.add(someModel.onDidChange(() => { ... }); // (2) subscribe and register model-event listener\n\t\t\t// ...later...\n\t\t\t// this._disposables.dispose(); disposes (1) then (2): don't warn after (1) but after the \"overall dispose\" is done\n\n\t\t\tif (this._deliveryQueue?.current === this) {\n\t\t\t\tthis._deliveryQueue.reset();\n\t\t\t}\n\t\t\tif (this._listeners) {\n\t\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\t\tconst listeners = this._listeners;\n\t\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\t\tforEachListener(listeners, l => l.stack?.print());\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._listeners = undefined;\n\t\t\t\tthis._size = 0;\n\t\t\t}\n\t\t\tthis._options?.onDidRemoveLastListener?.();\n\t\t\tthis._leakageMon?.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * For the public to allow to subscribe\n\t * to events from this Emitter\n\t */\n\tget event(): Event<T> {\n\t\tthis._event ??= (callback: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore) => {\n\t\t\tif (this._leakageMon && this._size > this._leakageMon.threshold * 3) {\n\t\t\t\tconsole.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`);\n\t\t\t\treturn Disposable.None;\n\t\t\t}\n\n\t\t\tif (this._disposed) {\n\t\t\t\t// todo: should we warn if a listener is added to a disposed emitter? This happens often\n\t\t\t\treturn Disposable.None;\n\t\t\t}\n\n\t\t\tif (thisArgs) {\n\t\t\t\tcallback = callback.bind(thisArgs);\n\t\t\t}\n\n\t\t\tconst contained = new UniqueContainer(callback);\n\n\t\t\tlet removeMonitor: Function | undefined;\n\t\t\tlet stack: Stacktrace | undefined;\n\t\t\tif (this._leakageMon && this._size >= Math.ceil(this._leakageMon.threshold * 0.2)) {\n\t\t\t\t// check and record this emitter for potential leakage\n\t\t\t\tcontained.stack = Stacktrace.create();\n\t\t\t\tremoveMonitor = this._leakageMon.check(contained.stack, this._size + 1);\n\t\t\t}\n\n\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\tcontained.stack = stack ?? Stacktrace.create();\n\t\t\t}\n\n\t\t\tif (!this._listeners) {\n\t\t\t\tthis._options?.onWillAddFirstListener?.(this);\n\t\t\t\tthis._listeners = contained;\n\t\t\t\tthis._options?.onDidAddFirstListener?.(this);\n\t\t\t} else if (this._listeners instanceof UniqueContainer) {\n\t\t\t\tthis._deliveryQueue ??= new EventDeliveryQueuePrivate();\n\t\t\t\tthis._listeners = [this._listeners, contained];\n\t\t\t} else {\n\t\t\t\tthis._listeners.push(contained);\n\t\t\t}\n\n\t\t\tthis._size++;\n\n\t\t\tconst result = toDisposable(() => { removeMonitor?.(); this._removeListener(contained); });\n\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\tdisposables.add(result);\n\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\tdisposables.push(result);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\treturn this._event;\n\t}\n\n\tprivate _removeListener(listener: ListenerContainer<T>) {\n\t\tthis._options?.onWillRemoveListener?.(this);\n\n\t\tif (!this._listeners) {\n\t\t\treturn; // expected if a listener gets disposed\n\t\t}\n\n\t\tif (this._size === 1) {\n\t\t\tthis._listeners = undefined;\n\t\t\tthis._options?.onDidRemoveLastListener?.(this);\n\t\t\tthis._size = 0;\n\t\t\treturn;\n\t\t}\n\n\t\t// size > 1 which requires that listeners be a list:\n\t\tconst listeners = this._listeners as (ListenerContainer<T> | undefined)[];\n\n\t\tconst index = listeners.indexOf(listener);\n\t\tif (index === -1) {\n\t\t\tconsole.log('disposed?', this._disposed);\n\t\t\tconsole.log('size?', this._size);\n\t\t\tconsole.log('arr?', JSON.stringify(this._listeners));\n\t\t\tthrow new Error('Attempted to dispose unknown listener');\n\t\t}\n\n\t\tthis._size--;\n\t\tlisteners[index] = undefined;\n\n\t\tconst adjustDeliveryQueue = this._deliveryQueue!.current === this;\n\t\tif (this._size * compactionThreshold <= listeners.length) {\n\t\t\tlet n = 0;\n\t\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\t\tif (listeners[i]) {\n\t\t\t\t\tlisteners[n++] = listeners[i];\n\t\t\t\t} else if (adjustDeliveryQueue) {\n\t\t\t\t\tthis._deliveryQueue!.end--;\n\t\t\t\t\tif (n < this._deliveryQueue!.i) {\n\t\t\t\t\t\tthis._deliveryQueue!.i--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlisteners.length = n;\n\t\t}\n\t}\n\n\tprivate _deliver(listener: undefined | UniqueContainer<(value: T) => void>, value: T) {\n\t\tif (!listener) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorHandler = this._options?.onListenerError || onUnexpectedError;\n\t\tif (!errorHandler) {\n\t\t\tlistener.value(value);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlistener.value(value);\n\t\t} catch (e) {\n\t\t\terrorHandler(e);\n\t\t}\n\t}\n\n\t/** Delivers items in the queue. Assumes the queue is ready to go. */\n\tprivate _deliverQueue(dq: EventDeliveryQueuePrivate) {\n\t\tconst listeners = dq.current!._listeners! as (ListenerContainer<T> | undefined)[];\n\t\twhile (dq.i < dq.end) {\n\t\t\t// important: dq.i is incremented before calling deliver() because it might reenter deliverQueue()\n\t\t\tthis._deliver(listeners[dq.i++], dq.value as T);\n\t\t}\n\t\tdq.reset();\n\t}\n\n\t/**\n\t * To be kept private to fire an event to\n\t * subscribers\n\t */\n\tfire(event: T): void {\n\t\tif (this._deliveryQueue?.current) {\n\t\t\tthis._deliverQueue(this._deliveryQueue);\n\t\t\tthis._perfMon?.stop(); // last fire() will have starting perfmon, stop it before starting the next dispatch\n\t\t}\n\n\t\tthis._perfMon?.start(this._size);\n\n\t\tif (!this._listeners) {\n\t\t\t// no-op\n\t\t} else if (this._listeners instanceof UniqueContainer) {\n\t\t\tthis._deliver(this._listeners, event);\n\t\t} else {\n\t\t\tconst dq = this._deliveryQueue!;\n\t\t\tdq.enqueue(this, event, this._listeners.length);\n\t\t\tthis._deliverQueue(dq);\n\t\t}\n\n\t\tthis._perfMon?.stop();\n\t}\n\n\thasListeners(): boolean {\n\t\treturn this._size > 0;\n\t}\n}\n\nexport interface EventDeliveryQueue {\n\t_isEventDeliveryQueue: true;\n}\n\nexport const createEventDeliveryQueue = (): EventDeliveryQueue => new EventDeliveryQueuePrivate();\n\nclass EventDeliveryQueuePrivate implements EventDeliveryQueue {\n\tdeclare _isEventDeliveryQueue: true;\n\n\t/**\n\t * Index in current's listener list.\n\t */\n\tpublic i = -1;\n\n\t/**\n\t * The last index in the listener's list to deliver.\n\t */\n\tpublic end = 0;\n\n\t/**\n\t * Emitter currently being dispatched on. Emitter._listeners is always an array.\n\t */\n\tpublic current?: Emitter<any>;\n\t/**\n\t * Currently emitting value. Defined whenever `current` is.\n\t */\n\tpublic value?: unknown;\n\n\tpublic enqueue<T>(emitter: Emitter<T>, value: T, end: number) {\n\t\tthis.i = 0;\n\t\tthis.end = end;\n\t\tthis.current = emitter;\n\t\tthis.value = value;\n\t}\n\n\tpublic reset() {\n\t\tthis.i = this.end; // force any current emission loop to stop, mainly for during dispose\n\t\tthis.current = undefined;\n\t\tthis.value = undefined;\n\t}\n}\n\nexport interface IWaitUntil {\n\ttoken: CancellationToken;\n\twaitUntil(thenable: Promise<unknown>): void;\n}\n\nexport type IWaitUntilData<T> = Omit<Omit<T, 'waitUntil'>, 'token'>;\n\nexport class AsyncEmitter<T extends IWaitUntil> extends Emitter<T> {\n\n\tprivate _asyncDeliveryQueue?: LinkedList<[(ev: T) => void, IWaitUntilData<T>]>;\n\n\tasync fireAsync(data: IWaitUntilData<T>, token: CancellationToken, promiseJoin?: (p: Promise<unknown>, listener: Function) => Promise<unknown>): Promise<void> {\n\t\tif (!this._listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncDeliveryQueue) {\n\t\t\tthis._asyncDeliveryQueue = new LinkedList();\n\t\t}\n\n\t\tforEachListener(this._listeners, listener => this._asyncDeliveryQueue!.push([listener.value, data]));\n\n\t\twhile (this._asyncDeliveryQueue.size > 0 && !token.isCancellationRequested) {\n\n\t\t\tconst [listener, data] = this._asyncDeliveryQueue.shift()!;\n\t\t\tconst thenables: Promise<unknown>[] = [];\n\n\t\t\tconst event = <T>{\n\t\t\t\t...data,\n\t\t\t\ttoken,\n\t\t\t\twaitUntil: (p: Promise<unknown>): void => {\n\t\t\t\t\tif (Object.isFrozen(thenables)) {\n\t\t\t\t\t\tthrow new Error('waitUntil can NOT be called asynchronous');\n\t\t\t\t\t}\n\t\t\t\t\tif (promiseJoin) {\n\t\t\t\t\t\tp = promiseJoin(p, listener);\n\t\t\t\t\t}\n\t\t\t\t\tthenables.push(p);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tlistener(event);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// freeze thenables-collection to enforce sync-calls to\n\t\t\t// wait until and then wait for all thenables to resolve\n\t\t\tObject.freeze(thenables);\n\n\t\t\tawait Promise.allSettled(thenables).then(values => {\n\t\t\t\tfor (const value of values) {\n\t\t\t\t\tif (value.status === 'rejected') {\n\t\t\t\t\t\tonUnexpectedError(value.reason);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n\nexport class PauseableEmitter<T> extends Emitter<T> {\n\n\tprivate _isPaused = 0;\n\tprotected _eventQueue = new LinkedList<T>();\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tpublic get isPaused(): boolean {\n\t\treturn this._isPaused !== 0;\n\t}\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\n\tpause(): void {\n\t\tthis._isPaused++;\n\t}\n\n\tresume(): void {\n\t\tif (this._isPaused !== 0 && --this._isPaused === 0) {\n\t\t\tif (this._mergeFn) {\n\t\t\t\t// use the merge function to create a single composite\n\t\t\t\t// event. make a copy in case firing pauses this emitter\n\t\t\t\tif (this._eventQueue.size > 0) {\n\t\t\t\t\tconst events = Array.from(this._eventQueue);\n\t\t\t\t\tthis._eventQueue.clear();\n\t\t\t\t\tsuper.fire(this._mergeFn(events));\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// no merging, fire each event individually and test\n\t\t\t\t// that this emitter isn't paused halfway through\n\t\t\t\twhile (!this._isPaused && this._eventQueue.size !== 0) {\n\t\t\t\t\tsuper.fire(this._eventQueue.shift()!);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (this._size) {\n\t\t\tif (this._isPaused !== 0) {\n\t\t\t\tthis._eventQueue.push(event);\n\t\t\t} else {\n\t\t\t\tsuper.fire(event);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class DebounceEmitter<T> extends PauseableEmitter<T> {\n\n\tprivate readonly _delay: number;\n\tprivate _handle: any | undefined;\n\n\tconstructor(options: EmitterOptions & { merge: (input: T[]) => T; delay?: number }) {\n\t\tsuper(options);\n\t\tthis._delay = options.delay ?? 100;\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (!this._handle) {\n\t\t\tthis.pause();\n\t\t\tthis._handle = setTimeout(() => {\n\t\t\t\tthis._handle = undefined;\n\t\t\t\tthis.resume();\n\t\t\t}, this._delay);\n\t\t}\n\t\tsuper.fire(event);\n\t}\n}\n\n/**\n * An emitter which queue all events and then process them at the\n * end of the event loop.\n */\nexport class MicrotaskEmitter<T> extends Emitter<T> {\n\tprivate _queuedEvents: T[] = [];\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\toverride fire(event: T): void {\n\n\t\tif (!this.hasListeners()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._queuedEvents.push(event);\n\t\tif (this._queuedEvents.length === 1) {\n\t\t\tqueueMicrotask(() => {\n\t\t\t\tif (this._mergeFn) {\n\t\t\t\t\tsuper.fire(this._mergeFn(this._queuedEvents));\n\t\t\t\t} else {\n\t\t\t\t\tthis._queuedEvents.forEach(e => super.fire(e));\n\t\t\t\t}\n\t\t\t\tthis._queuedEvents = [];\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * An event emitter that multiplexes many events into a single event.\n *\n * @example Listen to the `onData` event of all `Thing`s, dynamically adding and removing `Thing`s\n * to the multiplexer as needed.\n *\n * ```typescript\n * const anythingDataMultiplexer = new EventMultiplexer<{ data: string }>();\n *\n * const thingListeners = DisposableMap<Thing, IDisposable>();\n *\n * thingService.onDidAddThing(thing => {\n *   thingListeners.set(thing, anythingDataMultiplexer.add(thing.onData);\n * });\n * thingService.onDidRemoveThing(thing => {\n *   thingListeners.deleteAndDispose(thing);\n * });\n *\n * anythingDataMultiplexer.event(e => {\n *   console.log('Something fired data ' + e.data)\n * });\n * ```\n */\nexport class EventMultiplexer<T> implements IDisposable {\n\n\tprivate readonly emitter: Emitter<T>;\n\tprivate hasListeners = false;\n\tprivate events: { event: Event<T>; listener: IDisposable | null }[] = [];\n\n\tconstructor() {\n\t\tthis.emitter = new Emitter<T>({\n\t\t\tonWillAddFirstListener: () => this.onFirstListenerAdd(),\n\t\t\tonDidRemoveLastListener: () => this.onLastListenerRemove()\n\t\t});\n\t}\n\n\tget event(): Event<T> {\n\t\treturn this.emitter.event;\n\t}\n\n\tadd(event: Event<T>): IDisposable {\n\t\tconst e = { event: event, listener: null };\n\t\tthis.events.push(e);\n\n\t\tif (this.hasListeners) {\n\t\t\tthis.hook(e);\n\t\t}\n\n\t\tconst dispose = () => {\n\t\t\tif (this.hasListeners) {\n\t\t\t\tthis.unhook(e);\n\t\t\t}\n\n\t\t\tconst idx = this.events.indexOf(e);\n\t\t\tthis.events.splice(idx, 1);\n\t\t};\n\n\t\treturn toDisposable(createSingleCallFunction(dispose));\n\t}\n\n\tprivate onFirstListenerAdd(): void {\n\t\tthis.hasListeners = true;\n\t\tthis.events.forEach(e => this.hook(e));\n\t}\n\n\tprivate onLastListenerRemove(): void {\n\t\tthis.hasListeners = false;\n\t\tthis.events.forEach(e => this.unhook(e));\n\t}\n\n\tprivate hook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\te.listener = e.event(r => this.emitter.fire(r));\n\t}\n\n\tprivate unhook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\te.listener?.dispose();\n\t\te.listener = null;\n\t}\n\n\tdispose(): void {\n\t\tthis.emitter.dispose();\n\n\t\tfor (const e of this.events) {\n\t\t\te.listener?.dispose();\n\t\t}\n\t\tthis.events = [];\n\t}\n}\n\nexport interface IDynamicListEventMultiplexer<TEventType> extends IDisposable {\n\treadonly event: Event<TEventType>;\n}\nexport class DynamicListEventMultiplexer<TItem, TEventType> implements IDynamicListEventMultiplexer<TEventType> {\n\tprivate readonly _store = new DisposableStore();\n\n\treadonly event: Event<TEventType>;\n\n\tconstructor(\n\t\titems: TItem[],\n\t\tonAddItem: Event<TItem>,\n\t\tonRemoveItem: Event<TItem>,\n\t\tgetEvent: (item: TItem) => Event<TEventType>\n\t) {\n\t\tconst multiplexer = this._store.add(new EventMultiplexer<TEventType>());\n\t\tconst itemListeners = this._store.add(new DisposableMap<TItem, IDisposable>());\n\n\t\tfunction addItem(instance: TItem) {\n\t\t\titemListeners.set(instance, multiplexer.add(getEvent(instance)));\n\t\t}\n\n\t\t// Existing items\n\t\tfor (const instance of items) {\n\t\t\taddItem(instance);\n\t\t}\n\n\t\t// Added items\n\t\tthis._store.add(onAddItem(instance => {\n\t\t\taddItem(instance);\n\t\t}));\n\n\t\t// Removed items\n\t\tthis._store.add(onRemoveItem(instance => {\n\t\t\titemListeners.deleteAndDispose(instance);\n\t\t}));\n\n\t\tthis.event = multiplexer.event;\n\t}\n\n\tdispose() {\n\t\tthis._store.dispose();\n\t}\n}\n\n/**\n * The EventBufferer is useful in situations in which you want\n * to delay firing your events during some code.\n * You can wrap that code and be sure that the event will not\n * be fired during that wrap.\n *\n * ```\n * const emitter: Emitter;\n * const delayer = new EventDelayer();\n * const delayedEvent = delayer.wrapEvent(emitter.event);\n *\n * delayedEvent(console.log);\n *\n * delayer.bufferEvents(() => {\n *   emitter.fire(); // event will not be fired yet\n * });\n *\n * // event will only be fired at this point\n * ```\n */\nexport class EventBufferer {\n\n\tprivate buffers: Function[][] = [];\n\n\twrapEvent<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs?, disposables?) => {\n\t\t\treturn event(i => {\n\t\t\t\tconst buffer = this.buffers[this.buffers.length - 1];\n\n\t\t\t\tif (buffer) {\n\t\t\t\t\tbuffer.push(() => listener.call(thisArgs, i));\n\t\t\t\t} else {\n\t\t\t\t\tlistener.call(thisArgs, i);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\t}\n\n\tbufferEvents<R = void>(fn: () => R): R {\n\t\tconst buffer: Array<() => R> = [];\n\t\tthis.buffers.push(buffer);\n\t\tconst r = fn();\n\t\tthis.buffers.pop();\n\t\tbuffer.forEach(flush => flush());\n\t\treturn r;\n\t}\n}\n\n/**\n * A Relay is an event forwarder which functions as a replugabble event pipe.\n * Once created, you can connect an input event to it and it will simply forward\n * events from that input event through its own `event` property. The `input`\n * can be changed at any point in time.\n */\nexport class Relay<T> implements IDisposable {\n\n\tprivate listening = false;\n\tprivate inputEvent: Event<T> = Event.None;\n\tprivate inputEventListener: IDisposable = Disposable.None;\n\n\tprivate readonly emitter = new Emitter<T>({\n\t\tonDidAddFirstListener: () => {\n\t\t\tthis.listening = true;\n\t\t\tthis.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);\n\t\t},\n\t\tonDidRemoveLastListener: () => {\n\t\t\tthis.listening = false;\n\t\t\tthis.inputEventListener.dispose();\n\t\t}\n\t});\n\n\treadonly event: Event<T> = this.emitter.event;\n\n\tset input(event: Event<T>) {\n\t\tthis.inputEvent = event;\n\n\t\tif (this.listening) {\n\t\t\tthis.inputEventListener.dispose();\n\t\t\tthis.inputEventListener = event(this.emitter.fire, this.emitter);\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.inputEventListener.dispose();\n\t\tthis.emitter.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IDisposable } from 'vs/base/common/lifecycle';\n\nexport interface CancellationToken {\n\n\t/**\n\t * A flag signalling is cancellation has been requested.\n\t */\n\treadonly isCancellationRequested: boolean;\n\n\t/**\n\t * An event which fires when cancellation is requested. This event\n\t * only ever fires `once` as cancellation can only happen once. Listeners\n\t * that are registered after cancellation will be called (next event loop run),\n\t * but also only once.\n\t *\n\t * @event\n\t */\n\treadonly onCancellationRequested: (listener: (e: any) => any, thisArgs?: any, disposables?: IDisposable[]) => IDisposable;\n}\n\nconst shortcutEvent: Event<any> = Object.freeze(function (callback, context?): IDisposable {\n\tconst handle = setTimeout(callback.bind(context), 0);\n\treturn { dispose() { clearTimeout(handle); } };\n});\n\nexport namespace CancellationToken {\n\n\texport function isCancellationToken(thing: unknown): thing is CancellationToken {\n\t\tif (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n\t\t\treturn true;\n\t\t}\n\t\tif (thing instanceof MutableToken) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing || typeof thing !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (thing as CancellationToken).isCancellationRequested === 'boolean'\n\t\t\t&& typeof (thing as CancellationToken).onCancellationRequested === 'function';\n\t}\n\n\n\texport const None = Object.freeze<CancellationToken>({\n\t\tisCancellationRequested: false,\n\t\tonCancellationRequested: Event.None\n\t});\n\n\texport const Cancelled = Object.freeze<CancellationToken>({\n\t\tisCancellationRequested: true,\n\t\tonCancellationRequested: shortcutEvent\n\t});\n}\n\nclass MutableToken implements CancellationToken {\n\n\tprivate _isCancelled: boolean = false;\n\tprivate _emitter: Emitter<any> | null = null;\n\n\tpublic cancel() {\n\t\tif (!this._isCancelled) {\n\t\t\tthis._isCancelled = true;\n\t\t\tif (this._emitter) {\n\t\t\t\tthis._emitter.fire(undefined);\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tget isCancellationRequested(): boolean {\n\t\treturn this._isCancelled;\n\t}\n\n\tget onCancellationRequested(): Event<any> {\n\t\tif (this._isCancelled) {\n\t\t\treturn shortcutEvent;\n\t\t}\n\t\tif (!this._emitter) {\n\t\t\tthis._emitter = new Emitter<any>();\n\t\t}\n\t\treturn this._emitter.event;\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._emitter) {\n\t\t\tthis._emitter.dispose();\n\t\t\tthis._emitter = null;\n\t\t}\n\t}\n}\n\nexport class CancellationTokenSource {\n\n\tprivate _token?: CancellationToken = undefined;\n\tprivate _parentListener?: IDisposable = undefined;\n\n\tconstructor(parent?: CancellationToken) {\n\t\tthis._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\n\t}\n\n\tget token(): CancellationToken {\n\t\tif (!this._token) {\n\t\t\t// be lazy and create the token only when\n\t\t\t// actually needed\n\t\t\tthis._token = new MutableToken();\n\t\t}\n\t\treturn this._token;\n\t}\n\n\tcancel(): void {\n\t\tif (!this._token) {\n\t\t\t// save an object by returning the default\n\t\t\t// cancelled token when cancellation happens\n\t\t\t// before someone asks for the token\n\t\t\tthis._token = CancellationToken.Cancelled;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually cancel\n\t\t\tthis._token.cancel();\n\t\t}\n\t}\n\n\tdispose(cancel: boolean = false): void {\n\t\tif (cancel) {\n\t\t\tthis.cancel();\n\t\t}\n\t\tthis._parentListener?.dispose();\n\t\tif (!this._token) {\n\t\t\t// ensure to initialize with an empty token if we had none\n\t\t\tthis._token = CancellationToken.None;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually dispose\n\t\t\tthis._token.dispose();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { IDisposable } from 'vs/base/common/lifecycle';\n\nexport interface CacheResult<T> extends IDisposable {\n\tpromise: Promise<T>;\n}\n\nexport class Cache<T> {\n\n\tprivate result: CacheResult<T> | null = null;\n\tconstructor(private task: (ct: CancellationToken) => Promise<T>) { }\n\n\tget(): CacheResult<T> {\n\t\tif (this.result) {\n\t\t\treturn this.result;\n\t\t}\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst promise = this.task(cts.token);\n\n\t\tthis.result = {\n\t\t\tpromise,\n\t\t\tdispose: () => {\n\t\t\t\tthis.result = null;\n\t\t\t\tcts.cancel();\n\t\t\t\tcts.dispose();\n\t\t\t}\n\t\t};\n\n\t\treturn this.result;\n\t}\n}\n\n/**\n * Uses a LRU cache to make a given parametrized function cached.\n * Caches just the last value.\n * The key must be JSON serializable.\n*/\nexport class LRUCachedFunction<TArg, TComputed> {\n\tprivate lastCache: TComputed | undefined = undefined;\n\tprivate lastArgKey: string | undefined = undefined;\n\n\tconstructor(private readonly fn: (arg: TArg) => TComputed) {\n\t}\n\n\tpublic get(arg: TArg): TComputed {\n\t\tconst key = JSON.stringify(arg);\n\t\tif (this.lastArgKey !== key) {\n\t\t\tthis.lastArgKey = key;\n\t\t\tthis.lastCache = this.fn(arg);\n\t\t}\n\t\treturn this.lastCache!;\n\t}\n}\n\n/**\n * Uses an unbounded cache (referential equality) to memoize the results of the given function.\n*/\nexport class CachedFunction<TArg, TValue> {\n\tprivate readonly _map = new Map<TArg, TValue>();\n\tpublic get cachedValues(): ReadonlyMap<TArg, TValue> {\n\t\treturn this._map;\n\t}\n\n\tconstructor(private readonly fn: (arg: TArg) => TValue) { }\n\n\tpublic get(arg: TArg): TValue {\n\t\tif (this._map.has(arg)) {\n\t\t\treturn this._map.get(arg)!;\n\t\t}\n\t\tconst value = this.fn(arg);\n\t\tthis._map.set(arg, value);\n\t\treturn value;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { LRUCachedFunction } from 'vs/base/common/cache';\nimport { CharCode } from 'vs/base/common/charCode';\nimport { Lazy } from 'vs/base/common/lazy';\nimport { Constants } from 'vs/base/common/uint';\n\nexport function isFalsyOrWhitespace(str: string | undefined): boolean {\n\tif (!str || typeof str !== 'string') {\n\t\treturn true;\n\t}\n\treturn str.trim().length === 0;\n}\n\nconst _formatRegexp = /{(\\d+)}/g;\n\n/**\n * Helper to produce a string with a variable number of arguments. Insert variable segments\n * into the string using the {n} notation where N is the index of the argument following the string.\n * @param value string to which formatting is applied\n * @param args replacements for {n}-entries\n */\nexport function format(value: string, ...args: any[]): string {\n\tif (args.length === 0) {\n\t\treturn value;\n\t}\n\treturn value.replace(_formatRegexp, function (match, group) {\n\t\tconst idx = parseInt(group, 10);\n\t\treturn isNaN(idx) || idx < 0 || idx >= args.length ?\n\t\t\tmatch :\n\t\t\targs[idx];\n\t});\n}\n\nconst _format2Regexp = /{([^}]+)}/g;\n\n/**\n * Helper to create a string from a template and a string record.\n * Similar to `format` but with objects instead of positional arguments.\n */\nexport function format2(template: string, values: Record<string, unknown>): string {\n\tif (Object.keys(values).length === 0) {\n\t\treturn template;\n\t}\n\treturn template.replace(_format2Regexp, (match, group) => (values[group] ?? match) as string);\n}\n\n/**\n * Encodes the given value so that it can be used as literal value in html attributes.\n *\n * In other words, computes `$val`, such that `attr` in `<div attr=\"$val\" />` has the runtime value `value`.\n * This prevents XSS injection.\n */\nexport function htmlAttributeEncodeValue(value: string): string {\n\treturn value.replace(/[<>\"'&]/g, ch => {\n\t\tswitch (ch) {\n\t\t\tcase '<': return '&lt;';\n\t\t\tcase '>': return '&gt;';\n\t\t\tcase '\"': return '&quot;';\n\t\t\tcase '\\'': return '&apos;';\n\t\t\tcase '&': return '&amp;';\n\t\t}\n\t\treturn ch;\n\t});\n}\n\n/**\n * Converts HTML characters inside the string to use entities instead. Makes the string safe from\n * being used e.g. in HTMLElement.innerHTML.\n */\nexport function escape(html: string): string {\n\treturn html.replace(/[<>&]/g, function (match) {\n\t\tswitch (match) {\n\t\t\tcase '<': return '&lt;';\n\t\t\tcase '>': return '&gt;';\n\t\t\tcase '&': return '&amp;';\n\t\t\tdefault: return match;\n\t\t}\n\t});\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n\treturn value.replace(/[\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)]/g, '\\\\$&');\n}\n\n/**\n * Counts how often `character` occurs inside `value`.\n */\nexport function count(value: string, character: string): number {\n\tlet result = 0;\n\tconst ch = character.charCodeAt(0);\n\tfor (let i = value.length - 1; i >= 0; i--) {\n\t\tif (value.charCodeAt(i) === ch) {\n\t\t\tresult++;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport function truncate(value: string, maxLength: number, suffix = '…'): string {\n\tif (value.length <= maxLength) {\n\t\treturn value;\n\t}\n\n\treturn `${value.substr(0, maxLength)}${suffix}`;\n}\n\nexport function truncateMiddle(value: string, maxLength: number, suffix = '…'): string {\n\tif (value.length <= maxLength) {\n\t\treturn value;\n\t}\n\n\tconst prefixLength = Math.ceil(maxLength / 2) - suffix.length / 2;\n\tconst suffixLength = Math.floor(maxLength / 2) - suffix.length / 2;\n\n\treturn `${value.substr(0, prefixLength)}${suffix}${value.substr(value.length - suffixLength)}`;\n}\n\n/**\n * Removes all occurrences of needle from the beginning and end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim (default is a blank)\n */\nexport function trim(haystack: string, needle: string = ' '): string {\n\tconst trimmed = ltrim(haystack, needle);\n\treturn rtrim(trimmed, needle);\n}\n\n/**\n * Removes all occurrences of needle from the beginning of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function ltrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length;\n\tif (needleLen === 0 || haystack.length === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = 0;\n\n\twhile (haystack.indexOf(needle, offset) === offset) {\n\t\toffset = offset + needleLen;\n\t}\n\treturn haystack.substring(offset);\n}\n\n/**\n * Removes all occurrences of needle from the end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function rtrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length,\n\t\thaystackLen = haystack.length;\n\n\tif (needleLen === 0 || haystackLen === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = haystackLen,\n\t\tidx = -1;\n\n\twhile (true) {\n\t\tidx = haystack.lastIndexOf(needle, offset - 1);\n\t\tif (idx === -1 || idx + needleLen !== offset) {\n\t\t\tbreak;\n\t\t}\n\t\tif (idx === 0) {\n\t\t\treturn '';\n\t\t}\n\t\toffset = idx;\n\t}\n\n\treturn haystack.substring(0, offset);\n}\n\nexport function convertSimple2RegExpPattern(pattern: string): string {\n\treturn pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\n\nexport function stripWildcards(pattern: string): string {\n\treturn pattern.replace(/\\*/g, '');\n}\n\nexport interface RegExpOptions {\n\tmatchCase?: boolean;\n\twholeWord?: boolean;\n\tmultiline?: boolean;\n\tglobal?: boolean;\n\tunicode?: boolean;\n}\n\nexport function createRegExp(searchString: string, isRegex: boolean, options: RegExpOptions = {}): RegExp {\n\tif (!searchString) {\n\t\tthrow new Error('Cannot create regex from empty string');\n\t}\n\tif (!isRegex) {\n\t\tsearchString = escapeRegExpCharacters(searchString);\n\t}\n\tif (options.wholeWord) {\n\t\tif (!/\\B/.test(searchString.charAt(0))) {\n\t\t\tsearchString = '\\\\b' + searchString;\n\t\t}\n\t\tif (!/\\B/.test(searchString.charAt(searchString.length - 1))) {\n\t\t\tsearchString = searchString + '\\\\b';\n\t\t}\n\t}\n\tlet modifiers = '';\n\tif (options.global) {\n\t\tmodifiers += 'g';\n\t}\n\tif (!options.matchCase) {\n\t\tmodifiers += 'i';\n\t}\n\tif (options.multiline) {\n\t\tmodifiers += 'm';\n\t}\n\tif (options.unicode) {\n\t\tmodifiers += 'u';\n\t}\n\n\treturn new RegExp(searchString, modifiers);\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n\t// Exit early if it's one of these special cases which are meant to match\n\t// against an empty string\n\tif (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n\t\treturn false;\n\t}\n\n\t// We check against an empty string. If the regular expression doesn't advance\n\t// (e.g. ends in an endless loop) it will match an empty string.\n\tconst match = regexp.exec('');\n\treturn !!(match && regexp.lastIndex === 0);\n}\n\nexport function splitLines(str: string): string[] {\n\treturn str.split(/\\r\\n|\\r|\\n/);\n}\n\nexport function splitLinesIncludeSeparators(str: string): string[] {\n\tconst linesWithSeparators: string[] = [];\n\tconst splitLinesAndSeparators = str.split(/(\\r\\n|\\r|\\n)/);\n\tfor (let i = 0; i < Math.ceil(splitLinesAndSeparators.length / 2); i++) {\n\t\tlinesWithSeparators.push(splitLinesAndSeparators[2 * i] + (splitLinesAndSeparators[2 * i + 1] ?? ''));\n\t}\n\treturn linesWithSeparators;\n}\n\n/**\n * Returns first index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function firstNonWhitespaceIndex(str: string): number {\n\tfor (let i = 0, len = str.length; i < len; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Returns the leading whitespace of the string.\n * If the string contains only whitespaces, returns entire string\n */\nexport function getLeadingWhitespace(str: string, start: number = 0, end: number = str.length): string {\n\tfor (let i = start; i < end; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn str.substring(start, i);\n\t\t}\n\t}\n\treturn str.substring(start, end);\n}\n\n/**\n * Returns last index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function lastNonWhitespaceIndex(str: string, startIndex: number = str.length - 1): number {\n\tfor (let i = startIndex; i >= 0; i--) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Function that works identically to String.prototype.replace, except, the\n * replace function is allowed to be async and return a Promise.\n */\nexport function replaceAsync(str: string, search: RegExp, replacer: (match: string, ...args: any[]) => Promise<string>): Promise<string> {\n\tconst parts: (string | Promise<string>)[] = [];\n\n\tlet last = 0;\n\tfor (const match of str.matchAll(search)) {\n\t\tparts.push(str.slice(last, match.index));\n\t\tif (match.index === undefined) {\n\t\t\tthrow new Error('match.index should be defined');\n\t\t}\n\n\t\tlast = match.index + match[0].length;\n\t\tparts.push(replacer(match[0], ...match.slice(1), match.index, str, match.groups));\n\t}\n\n\tparts.push(str.slice(last));\n\n\treturn Promise.all(parts).then(p => p.join(''));\n}\n\nexport function compare(a: string, b: string): number {\n\tif (a < b) {\n\t\treturn -1;\n\t} else if (a > b) {\n\t\treturn 1;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\t\tconst codeA = a.charCodeAt(aStart);\n\t\tconst codeB = b.charCodeAt(bStart);\n\t\tif (codeA < codeB) {\n\t\t\treturn -1;\n\t\t} else if (codeA > codeB) {\n\t\t\treturn 1;\n\t\t}\n\t}\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n\treturn compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n\t\tlet codeA = a.charCodeAt(aStart);\n\t\tlet codeB = b.charCodeAt(bStart);\n\n\t\tif (codeA === codeB) {\n\t\t\t// equal\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (codeA >= 128 || codeB >= 128) {\n\t\t\t// not ASCII letters -> fallback to lower-casing strings\n\t\t\treturn compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n\t\t}\n\n\t\t// mapper lower-case ascii letter onto upper-case varinats\n\t\t// [97-122] (lower ascii) --> [65-90] (upper ascii)\n\t\tif (isLowerAsciiLetter(codeA)) {\n\t\t\tcodeA -= 32;\n\t\t}\n\t\tif (isLowerAsciiLetter(codeB)) {\n\t\t\tcodeB -= 32;\n\t\t}\n\n\t\t// compare both code points\n\t\tconst diff = codeA - codeB;\n\t\tif (diff === 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn diff;\n\t}\n\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n}\n\nexport function isAsciiDigit(code: number): boolean {\n\treturn code >= CharCode.Digit0 && code <= CharCode.Digit9;\n}\n\nexport function isLowerAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.A && code <= CharCode.Z;\n}\n\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n\treturn a.length === b.length && compareSubstringIgnoreCase(a, b) === 0;\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n\tconst candidateLength = candidate.length;\n\tif (candidate.length > str.length) {\n\t\treturn false;\n\t}\n\n\treturn compareSubstringIgnoreCase(str, candidate, 0, candidateLength) === 0;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n\tconst len = Math.min(a.length, b.length);\n\tlet i: number;\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(i) !== b.charCodeAt(i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * @returns the length of the common suffix of the two strings.\n */\nexport function commonSuffixLength(a: string, b: string): number {\n\n\tconst len = Math.min(a.length, b.length);\n\tlet i: number;\n\n\tconst aLastIndex = a.length - 1;\n\tconst bLastIndex = b.length - 1;\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(aLastIndex - i) !== b.charCodeAt(bLastIndex - i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isHighSurrogate(charCode: number): boolean {\n\treturn (0xD800 <= charCode && charCode <= 0xDBFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isLowSurrogate(charCode: number): boolean {\n\treturn (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function computeCodePoint(highSurrogate: number, lowSurrogate: number): number {\n\treturn ((highSurrogate - 0xD800) << 10) + (lowSurrogate - 0xDC00) + 0x10000;\n}\n\n/**\n * get the code point that begins at offset `offset`\n */\nexport function getNextCodePoint(str: string, len: number, offset: number): number {\n\tconst charCode = str.charCodeAt(offset);\n\tif (isHighSurrogate(charCode) && offset + 1 < len) {\n\t\tconst nextCharCode = str.charCodeAt(offset + 1);\n\t\tif (isLowSurrogate(nextCharCode)) {\n\t\t\treturn computeCodePoint(charCode, nextCharCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\n/**\n * get the code point that ends right before offset `offset`\n */\nfunction getPrevCodePoint(str: string, offset: number): number {\n\tconst charCode = str.charCodeAt(offset - 1);\n\tif (isLowSurrogate(charCode) && offset > 1) {\n\t\tconst prevCharCode = str.charCodeAt(offset - 2);\n\t\tif (isHighSurrogate(prevCharCode)) {\n\t\t\treturn computeCodePoint(prevCharCode, charCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\nexport class CodePointIterator {\n\n\tprivate readonly _str: string;\n\tprivate readonly _len: number;\n\tprivate _offset: number;\n\n\tpublic get offset(): number {\n\t\treturn this._offset;\n\t}\n\n\tconstructor(str: string, offset: number = 0) {\n\t\tthis._str = str;\n\t\tthis._len = str.length;\n\t\tthis._offset = offset;\n\t}\n\n\tpublic setOffset(offset: number): void {\n\t\tthis._offset = offset;\n\t}\n\n\tpublic prevCodePoint(): number {\n\t\tconst codePoint = getPrevCodePoint(this._str, this._offset);\n\t\tthis._offset -= (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\treturn codePoint;\n\t}\n\n\tpublic nextCodePoint(): number {\n\t\tconst codePoint = getNextCodePoint(this._str, this._len, this._offset);\n\t\tthis._offset += (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\treturn codePoint;\n\t}\n\n\tpublic eol(): boolean {\n\t\treturn (this._offset >= this._len);\n\t}\n}\n\nexport class GraphemeIterator {\n\n\tprivate readonly _iterator: CodePointIterator;\n\n\tpublic get offset(): number {\n\t\treturn this._iterator.offset;\n\t}\n\n\tconstructor(str: string, offset: number = 0) {\n\t\tthis._iterator = new CodePointIterator(str, offset);\n\t}\n\n\tpublic nextGraphemeLength(): number {\n\t\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\t\tconst iterator = this._iterator;\n\t\tconst initialOffset = iterator.offset;\n\n\t\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.nextCodePoint());\n\t\twhile (!iterator.eol()) {\n\t\t\tconst offset = iterator.offset;\n\t\t\tconst nextGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.nextCodePoint());\n\t\t\tif (breakBetweenGraphemeBreakType(graphemeBreakType, nextGraphemeBreakType)) {\n\t\t\t\t// move iterator back\n\t\t\t\titerator.setOffset(offset);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tgraphemeBreakType = nextGraphemeBreakType;\n\t\t}\n\t\treturn (iterator.offset - initialOffset);\n\t}\n\n\tpublic prevGraphemeLength(): number {\n\t\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\t\tconst iterator = this._iterator;\n\t\tconst initialOffset = iterator.offset;\n\n\t\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.prevCodePoint());\n\t\twhile (iterator.offset > 0) {\n\t\t\tconst offset = iterator.offset;\n\t\t\tconst prevGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.prevCodePoint());\n\t\t\tif (breakBetweenGraphemeBreakType(prevGraphemeBreakType, graphemeBreakType)) {\n\t\t\t\t// move iterator back\n\t\t\t\titerator.setOffset(offset);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tgraphemeBreakType = prevGraphemeBreakType;\n\t\t}\n\t\treturn (initialOffset - iterator.offset);\n\t}\n\n\tpublic eol(): boolean {\n\t\treturn this._iterator.eol();\n\t}\n}\n\nexport function nextCharLength(str: string, initialOffset: number): number {\n\tconst iterator = new GraphemeIterator(str, initialOffset);\n\treturn iterator.nextGraphemeLength();\n}\n\nexport function prevCharLength(str: string, initialOffset: number): number {\n\tconst iterator = new GraphemeIterator(str, initialOffset);\n\treturn iterator.prevGraphemeLength();\n}\n\nexport function getCharContainingOffset(str: string, offset: number): [number, number] {\n\tif (offset > 0 && isLowSurrogate(str.charCodeAt(offset))) {\n\t\toffset--;\n\t}\n\tconst endOffset = offset + nextCharLength(str, offset);\n\tconst startOffset = endOffset - prevCharLength(str, endOffset);\n\treturn [startOffset, endOffset];\n}\n\nexport function charCount(str: string): number {\n\tconst iterator = new GraphemeIterator(str);\n\tlet length = 0;\n\twhile (!iterator.eol()) {\n\t\tlength++;\n\t\titerator.nextGraphemeLength();\n\t}\n\treturn length;\n}\n\nlet CONTAINS_RTL: RegExp | undefined = undefined;\n\nfunction makeContainsRtl() {\n\t// Generated using https://github.com/alexdima/unicode-utils/blob/main/rtl-test.js\n\treturn /(?:[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1-\\u07EA\\u07F4\\u07F5\\u07FA\\u07FE-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E-\\u088E\\u08A0-\\u08C9\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFD3D\\uFD50-\\uFDC7\\uFDF0-\\uFDFC\\uFE70-\\uFEFC]|\\uD802[\\uDC00-\\uDD1B\\uDD20-\\uDE00\\uDE10-\\uDE35\\uDE40-\\uDEE4\\uDEEB-\\uDF35\\uDF40-\\uDFFF]|\\uD803[\\uDC00-\\uDD23\\uDE80-\\uDEA9\\uDEAD-\\uDF45\\uDF51-\\uDF81\\uDF86-\\uDFF6]|\\uD83A[\\uDC00-\\uDCCF\\uDD00-\\uDD43\\uDD4B-\\uDFFF]|\\uD83B[\\uDC00-\\uDEBB])/;\n}\n\n/**\n * Returns true if `str` contains any Unicode character that is classified as \"R\" or \"AL\".\n */\nexport function containsRTL(str: string): boolean {\n\tif (!CONTAINS_RTL) {\n\t\tCONTAINS_RTL = makeContainsRtl();\n\t}\n\n\treturn CONTAINS_RTL.test(str);\n}\n\nconst IS_BASIC_ASCII = /^[\\t\\n\\r\\x20-\\x7E]*$/;\n/**\n * Returns true if `str` contains only basic ASCII characters in the range 32 - 126 (including 32 and 126) or \\n, \\r, \\t\n */\nexport function isBasicASCII(str: string): boolean {\n\treturn IS_BASIC_ASCII.test(str);\n}\n\nexport const UNUSUAL_LINE_TERMINATORS = /[\\u2028\\u2029]/; // LINE SEPARATOR (LS) or PARAGRAPH SEPARATOR (PS)\n/**\n * Returns true if `str` contains unusual line terminators, like LS or PS\n */\nexport function containsUnusualLineTerminators(str: string): boolean {\n\treturn UNUSUAL_LINE_TERMINATORS.test(str);\n}\n\nexport function isFullWidthCharacter(charCode: number): boolean {\n\t// Do a cheap trick to better support wrapping of wide characters, treat them as 2 columns\n\t// http://jrgraphix.net/research/unicode_blocks.php\n\t//          2E80 - 2EFF   CJK Radicals Supplement\n\t//          2F00 - 2FDF   Kangxi Radicals\n\t//          2FF0 - 2FFF   Ideographic Description Characters\n\t//          3000 - 303F   CJK Symbols and Punctuation\n\t//          3040 - 309F   Hiragana\n\t//          30A0 - 30FF   Katakana\n\t//          3100 - 312F   Bopomofo\n\t//          3130 - 318F   Hangul Compatibility Jamo\n\t//          3190 - 319F   Kanbun\n\t//          31A0 - 31BF   Bopomofo Extended\n\t//          31F0 - 31FF   Katakana Phonetic Extensions\n\t//          3200 - 32FF   Enclosed CJK Letters and Months\n\t//          3300 - 33FF   CJK Compatibility\n\t//          3400 - 4DBF   CJK Unified Ideographs Extension A\n\t//          4DC0 - 4DFF   Yijing Hexagram Symbols\n\t//          4E00 - 9FFF   CJK Unified Ideographs\n\t//          A000 - A48F   Yi Syllables\n\t//          A490 - A4CF   Yi Radicals\n\t//          AC00 - D7AF   Hangul Syllables\n\t// [IGNORE] D800 - DB7F   High Surrogates\n\t// [IGNORE] DB80 - DBFF   High Private Use Surrogates\n\t// [IGNORE] DC00 - DFFF   Low Surrogates\n\t// [IGNORE] E000 - F8FF   Private Use Area\n\t//          F900 - FAFF   CJK Compatibility Ideographs\n\t// [IGNORE] FB00 - FB4F   Alphabetic Presentation Forms\n\t// [IGNORE] FB50 - FDFF   Arabic Presentation Forms-A\n\t// [IGNORE] FE00 - FE0F   Variation Selectors\n\t// [IGNORE] FE20 - FE2F   Combining Half Marks\n\t// [IGNORE] FE30 - FE4F   CJK Compatibility Forms\n\t// [IGNORE] FE50 - FE6F   Small Form Variants\n\t// [IGNORE] FE70 - FEFF   Arabic Presentation Forms-B\n\t//          FF00 - FFEF   Halfwidth and Fullwidth Forms\n\t//               [https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms]\n\t//               of which FF01 - FF5E fullwidth ASCII of 21 to 7E\n\t// [IGNORE]    and FF65 - FFDC halfwidth of Katakana and Hangul\n\t// [IGNORE] FFF0 - FFFF   Specials\n\treturn (\n\t\t(charCode >= 0x2E80 && charCode <= 0xD7AF)\n\t\t|| (charCode >= 0xF900 && charCode <= 0xFAFF)\n\t\t|| (charCode >= 0xFF01 && charCode <= 0xFF5E)\n\t);\n}\n\n/**\n * A fast function (therefore imprecise) to check if code points are emojis.\n * Generated using https://github.com/alexdima/unicode-utils/blob/main/emoji-test.js\n */\nexport function isEmojiImprecise(x: number): boolean {\n\treturn (\n\t\t(x >= 0x1F1E6 && x <= 0x1F1FF) || (x === 8986) || (x === 8987) || (x === 9200)\n\t\t|| (x === 9203) || (x >= 9728 && x <= 10175) || (x === 11088) || (x === 11093)\n\t\t|| (x >= 127744 && x <= 128591) || (x >= 128640 && x <= 128764)\n\t\t|| (x >= 128992 && x <= 129008) || (x >= 129280 && x <= 129535)\n\t\t|| (x >= 129648 && x <= 129782)\n\t);\n}\n\n/**\n * Given a string and a max length returns a shorted version. Shorting\n * happens at favorable positions - such as whitespace or punctuation characters.\n * The return value can be longer than the given value of `n`. Leading whitespace is always trimmed.\n */\nexport function lcut(text: string, n: number, prefix = '') {\n\tconst trimmed = text.trimStart();\n\n\tif (trimmed.length < n) {\n\t\treturn trimmed;\n\t}\n\n\tconst re = /\\b/g;\n\tlet i = 0;\n\twhile (re.test(trimmed)) {\n\t\tif (trimmed.length - re.lastIndex < n) {\n\t\t\tbreak;\n\t\t}\n\n\t\ti = re.lastIndex;\n\t\tre.lastIndex += 1;\n\t}\n\n\tif (i === 0) {\n\t\treturn trimmed;\n\t}\n\n\treturn prefix + trimmed.substring(i).trimStart();\n}\n\n// Escape codes, compiled from https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h3-Functions-using-CSI-_-ordered-by-the-final-character_s_\nconst CSI_SEQUENCE = /(:?\\x1b\\[|\\x9B)[=?>!]?[\\d;:]*[\"$#'* ]?[a-zA-Z@^`{}|~]/g;\n\n// Plus additional markers for custom `\\x1b]...\\x07` instructions.\nconst CSI_CUSTOM_SEQUENCE = /\\x1b\\].*?\\x07/g;\n\nexport function removeAnsiEscapeCodes(str: string): string {\n\tif (str) {\n\t\tstr = str.replace(CSI_SEQUENCE, '').replace(CSI_CUSTOM_SEQUENCE, '');\n\t}\n\n\treturn str;\n}\n\n// -- UTF-8 BOM\n\nexport const UTF8_BOM_CHARACTER = String.fromCharCode(CharCode.UTF8_BOM);\n\nexport function startsWithUTF8BOM(str: string): boolean {\n\treturn !!(str && str.length > 0 && str.charCodeAt(0) === CharCode.UTF8_BOM);\n}\n\nexport function stripUTF8BOM(str: string): string {\n\treturn startsWithUTF8BOM(str) ? str.substr(1) : str;\n}\n\n/**\n * Checks if the characters of the provided query string are included in the\n * target string. The characters do not have to be contiguous within the string.\n */\nexport function fuzzyContains(target: string, query: string): boolean {\n\tif (!target || !query) {\n\t\treturn false; // return early if target or query are undefined\n\t}\n\n\tif (target.length < query.length) {\n\t\treturn false; // impossible for query to be contained in target\n\t}\n\n\tconst queryLen = query.length;\n\tconst targetLower = target.toLowerCase();\n\n\tlet index = 0;\n\tlet lastIndexOf = -1;\n\twhile (index < queryLen) {\n\t\tconst indexOf = targetLower.indexOf(query[index], lastIndexOf + 1);\n\t\tif (indexOf < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlastIndexOf = indexOf;\n\n\t\tindex++;\n\t}\n\n\treturn true;\n}\n\nexport function containsUppercaseCharacter(target: string, ignoreEscapedChars = false): boolean {\n\tif (!target) {\n\t\treturn false;\n\t}\n\n\tif (ignoreEscapedChars) {\n\t\ttarget = target.replace(/\\\\./g, '');\n\t}\n\n\treturn target.toLowerCase() !== target;\n}\n\nexport function uppercaseFirstLetter(str: string): string {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function getNLines(str: string, n = 1): string {\n\tif (n === 0) {\n\t\treturn '';\n\t}\n\n\tlet idx = -1;\n\tdo {\n\t\tidx = str.indexOf('\\n', idx + 1);\n\t\tn--;\n\t} while (n > 0 && idx >= 0);\n\n\tif (idx === -1) {\n\t\treturn str;\n\t}\n\n\tif (str[idx - 1] === '\\r') {\n\t\tidx--;\n\t}\n\n\treturn str.substr(0, idx);\n}\n\n/**\n * Produces 'a'-'z', followed by 'A'-'Z'... followed by 'a'-'z', etc.\n */\nexport function singleLetterHash(n: number): string {\n\tconst LETTERS_CNT = (CharCode.Z - CharCode.A + 1);\n\n\tn = n % (2 * LETTERS_CNT);\n\n\tif (n < LETTERS_CNT) {\n\t\treturn String.fromCharCode(CharCode.a + n);\n\t}\n\n\treturn String.fromCharCode(CharCode.A + n - LETTERS_CNT);\n}\n\n//#region Unicode Grapheme Break\n\nexport function getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\treturn graphemeBreakTree.getGraphemeBreakType(codePoint);\n}\n\nfunction breakBetweenGraphemeBreakType(breakTypeA: GraphemeBreakType, breakTypeB: GraphemeBreakType): boolean {\n\t// http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules\n\n\t// !!! Let's make the common case a bit faster\n\tif (breakTypeA === GraphemeBreakType.Other) {\n\t\t// see https://www.unicode.org/Public/13.0.0/ucd/auxiliary/GraphemeBreakTest-13.0.0d10.html#table\n\t\treturn (breakTypeB !== GraphemeBreakType.Extend && breakTypeB !== GraphemeBreakType.SpacingMark);\n\t}\n\n\t// Do not break between a CR and LF. Otherwise, break before and after controls.\n\t// GB3                                        CR × LF\n\t// GB4                       (Control | CR | LF) ÷\n\t// GB5                                           ÷ (Control | CR | LF)\n\tif (breakTypeA === GraphemeBreakType.CR) {\n\t\tif (breakTypeB === GraphemeBreakType.LF) {\n\t\t\treturn false; // GB3\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.Control || breakTypeA === GraphemeBreakType.CR || breakTypeA === GraphemeBreakType.LF) {\n\t\treturn true; // GB4\n\t}\n\tif (breakTypeB === GraphemeBreakType.Control || breakTypeB === GraphemeBreakType.CR || breakTypeB === GraphemeBreakType.LF) {\n\t\treturn true; // GB5\n\t}\n\n\t// Do not break Hangul syllable sequences.\n\t// GB6                                         L × (L | V | LV | LVT)\n\t// GB7                                  (LV | V) × (V | T)\n\t// GB8                                 (LVT | T) × T\n\tif (breakTypeA === GraphemeBreakType.L) {\n\t\tif (breakTypeB === GraphemeBreakType.L || breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.LV || breakTypeB === GraphemeBreakType.LVT) {\n\t\t\treturn false; // GB6\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LV || breakTypeA === GraphemeBreakType.V) {\n\t\tif (breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB7\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LVT || breakTypeA === GraphemeBreakType.T) {\n\t\tif (breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB8\n\t\t}\n\t}\n\n\t// Do not break before extending characters or ZWJ.\n\t// GB9                                           × (Extend | ZWJ)\n\tif (breakTypeB === GraphemeBreakType.Extend || breakTypeB === GraphemeBreakType.ZWJ) {\n\t\treturn false; // GB9\n\t}\n\n\t// The GB9a and GB9b rules only apply to extended grapheme clusters:\n\t// Do not break before SpacingMarks, or after Prepend characters.\n\t// GB9a                                          × SpacingMark\n\t// GB9b                                  Prepend ×\n\tif (breakTypeB === GraphemeBreakType.SpacingMark) {\n\t\treturn false; // GB9a\n\t}\n\tif (breakTypeA === GraphemeBreakType.Prepend) {\n\t\treturn false; // GB9b\n\t}\n\n\t// Do not break within emoji modifier sequences or emoji zwj sequences.\n\t// GB11    \\p{Extended_Pictographic} Extend* ZWJ × \\p{Extended_Pictographic}\n\tif (breakTypeA === GraphemeBreakType.ZWJ && breakTypeB === GraphemeBreakType.Extended_Pictographic) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB11\n\t}\n\n\t// GB12                          sot (RI RI)* RI × RI\n\t// GB13                        [^RI] (RI RI)* RI × RI\n\tif (breakTypeA === GraphemeBreakType.Regional_Indicator && breakTypeB === GraphemeBreakType.Regional_Indicator) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB12 & GB13\n\t}\n\n\t// GB999                                     Any ÷ Any\n\treturn true;\n}\n\nexport const enum GraphemeBreakType {\n\tOther = 0,\n\tPrepend = 1,\n\tCR = 2,\n\tLF = 3,\n\tControl = 4,\n\tExtend = 5,\n\tRegional_Indicator = 6,\n\tSpacingMark = 7,\n\tL = 8,\n\tV = 9,\n\tT = 10,\n\tLV = 11,\n\tLVT = 12,\n\tZWJ = 13,\n\tExtended_Pictographic = 14\n}\n\nclass GraphemeBreakTree {\n\n\tprivate static _INSTANCE: GraphemeBreakTree | null = null;\n\tpublic static getInstance(): GraphemeBreakTree {\n\t\tif (!GraphemeBreakTree._INSTANCE) {\n\t\t\tGraphemeBreakTree._INSTANCE = new GraphemeBreakTree();\n\t\t}\n\t\treturn GraphemeBreakTree._INSTANCE;\n\t}\n\n\tprivate readonly _data: number[];\n\n\tconstructor() {\n\t\tthis._data = getGraphemeBreakRawData();\n\t}\n\n\tpublic getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\t\t// !!! Let's make 7bit ASCII a bit faster: 0..31\n\t\tif (codePoint < 32) {\n\t\t\tif (codePoint === CharCode.LineFeed) {\n\t\t\t\treturn GraphemeBreakType.LF;\n\t\t\t}\n\t\t\tif (codePoint === CharCode.CarriageReturn) {\n\t\t\t\treturn GraphemeBreakType.CR;\n\t\t\t}\n\t\t\treturn GraphemeBreakType.Control;\n\t\t}\n\t\t// !!! Let's make 7bit ASCII a bit faster: 32..126\n\t\tif (codePoint < 127) {\n\t\t\treturn GraphemeBreakType.Other;\n\t\t}\n\n\t\tconst data = this._data;\n\t\tconst nodeCount = data.length / 3;\n\t\tlet nodeIndex = 1;\n\t\twhile (nodeIndex <= nodeCount) {\n\t\t\tif (codePoint < data[3 * nodeIndex]) {\n\t\t\t\t// go left\n\t\t\t\tnodeIndex = 2 * nodeIndex;\n\t\t\t} else if (codePoint > data[3 * nodeIndex + 1]) {\n\t\t\t\t// go right\n\t\t\t\tnodeIndex = 2 * nodeIndex + 1;\n\t\t\t} else {\n\t\t\t\t// hit\n\t\t\t\treturn data[3 * nodeIndex + 2];\n\t\t\t}\n\t\t}\n\n\t\treturn GraphemeBreakType.Other;\n\t}\n}\n\nfunction getGraphemeBreakRawData(): number[] {\n\t// generated using https://github.com/alexdima/unicode-utils/blob/main/grapheme-break.js\n\treturn JSON.parse('[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]');\n}\n\n//#endregion\n\n/**\n * Computes the offset after performing a left delete on the given string,\n * while considering unicode grapheme/emoji rules.\n*/\nexport function getLeftDeleteOffset(offset: number, str: string): number {\n\tif (offset === 0) {\n\t\treturn 0;\n\t}\n\n\t// Try to delete emoji part.\n\tconst emojiOffset = getOffsetBeforeLastEmojiComponent(offset, str);\n\tif (emojiOffset !== undefined) {\n\t\treturn emojiOffset;\n\t}\n\n\t// Otherwise, just skip a single code point.\n\tconst iterator = new CodePointIterator(str, offset);\n\titerator.prevCodePoint();\n\treturn iterator.offset;\n}\n\nfunction getOffsetBeforeLastEmojiComponent(initialOffset: number, str: string): number | undefined {\n\t// See https://www.unicode.org/reports/tr51/tr51-14.html#EBNF_and_Regex for the\n\t// structure of emojis.\n\tconst iterator = new CodePointIterator(str, initialOffset);\n\tlet codePoint = iterator.prevCodePoint();\n\n\t// Skip modifiers\n\twhile ((isEmojiModifier(codePoint) || codePoint === CodePoint.emojiVariantSelector || codePoint === CodePoint.enclosingKeyCap)) {\n\t\tif (iterator.offset === 0) {\n\t\t\t// Cannot skip modifier, no preceding emoji base.\n\t\t\treturn undefined;\n\t\t}\n\t\tcodePoint = iterator.prevCodePoint();\n\t}\n\n\t// Expect base emoji\n\tif (!isEmojiImprecise(codePoint)) {\n\t\t// Unexpected code point, not a valid emoji.\n\t\treturn undefined;\n\t}\n\n\tlet resultOffset = iterator.offset;\n\n\tif (resultOffset > 0) {\n\t\t// Skip optional ZWJ code points that combine multiple emojis.\n\t\t// In theory, we should check if that ZWJ actually combines multiple emojis\n\t\t// to prevent deleting ZWJs in situations we didn't account for.\n\t\tconst optionalZwjCodePoint = iterator.prevCodePoint();\n\t\tif (optionalZwjCodePoint === CodePoint.zwj) {\n\t\t\tresultOffset = iterator.offset;\n\t\t}\n\t}\n\n\treturn resultOffset;\n}\n\nfunction isEmojiModifier(codePoint: number): boolean {\n\treturn 0x1F3FB <= codePoint && codePoint <= 0x1F3FF;\n}\n\nconst enum CodePoint {\n\tzwj = 0x200D,\n\n\t/**\n\t * Variation Selector-16 (VS16)\n\t*/\n\temojiVariantSelector = 0xFE0F,\n\n\t/**\n\t * Combining Enclosing Keycap\n\t */\n\tenclosingKeyCap = 0x20E3,\n}\n\nexport const noBreakWhitespace = '\\xa0';\n\nexport class AmbiguousCharacters {\n\tprivate static readonly ambiguousCharacterData = new Lazy<\n\t\tRecord<\n\t\t\tstring | '_common' | '_default',\n\t\t\t/* code point -> ascii code point */ number[]\n\t\t>\n\t>(() => {\n\t\t// Generated using https://github.com/hediet/vscode-unicode-data\n\t\t// Stored as key1, value1, key2, value2, ...\n\t\treturn JSON.parse(\n\t\t\t'{\\\"_common\\\":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],\\\"_default\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"cs\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"de\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"es\\\":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"fr\\\":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"it\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"ja\\\":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],\\\"ko\\\":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"pl\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"pt-BR\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"qps-ploc\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"ru\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"tr\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"zh-hans\\\":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],\\\"zh-hant\\\":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'\n\t\t);\n\t});\n\n\tprivate static readonly cache = new LRUCachedFunction<\n\t\tstring[],\n\t\tAmbiguousCharacters\n\t>((locales) => {\n\t\tfunction arrayToMap(arr: number[]): Map<number, number> {\n\t\t\tconst result = new Map<number, number>();\n\t\t\tfor (let i = 0; i < arr.length; i += 2) {\n\t\t\t\tresult.set(arr[i], arr[i + 1]);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tfunction mergeMaps(\n\t\t\tmap1: Map<number, number>,\n\t\t\tmap2: Map<number, number>\n\t\t): Map<number, number> {\n\t\t\tconst result = new Map<number, number>(map1);\n\t\t\tfor (const [key, value] of map2) {\n\t\t\t\tresult.set(key, value);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tfunction intersectMaps(\n\t\t\tmap1: Map<number, number> | undefined,\n\t\t\tmap2: Map<number, number>\n\t\t) {\n\t\t\tif (!map1) {\n\t\t\t\treturn map2;\n\t\t\t}\n\t\t\tconst result = new Map<number, number>();\n\t\t\tfor (const [key, value] of map1) {\n\t\t\t\tif (map2.has(key)) {\n\t\t\t\t\tresult.set(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst data = this.ambiguousCharacterData.value;\n\n\t\tlet filteredLocales = locales.filter(\n\t\t\t(l) => !l.startsWith('_') && l in data\n\t\t);\n\t\tif (filteredLocales.length === 0) {\n\t\t\tfilteredLocales = ['_default'];\n\t\t}\n\n\t\tlet languageSpecificMap: Map<number, number> | undefined = undefined;\n\t\tfor (const locale of filteredLocales) {\n\t\t\tconst map = arrayToMap(data[locale]);\n\t\t\tlanguageSpecificMap = intersectMaps(languageSpecificMap, map);\n\t\t}\n\n\t\tconst commonMap = arrayToMap(data['_common']);\n\t\tconst map = mergeMaps(commonMap, languageSpecificMap!);\n\n\t\treturn new AmbiguousCharacters(map);\n\t});\n\n\tpublic static getInstance(locales: Set<string>): AmbiguousCharacters {\n\t\treturn AmbiguousCharacters.cache.get(Array.from(locales));\n\t}\n\n\tprivate static _locales = new Lazy<string[]>(() =>\n\t\tObject.keys(AmbiguousCharacters.ambiguousCharacterData.value).filter(\n\t\t\t(k) => !k.startsWith('_')\n\t\t)\n\t);\n\tpublic static getLocales(): string[] {\n\t\treturn AmbiguousCharacters._locales.value;\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly confusableDictionary: Map<number, number>\n\t) { }\n\n\tpublic isAmbiguous(codePoint: number): boolean {\n\t\treturn this.confusableDictionary.has(codePoint);\n\t}\n\n\t/**\n\t * Returns the non basic ASCII code point that the given code point can be confused,\n\t * or undefined if such code point does note exist.\n\t */\n\tpublic getPrimaryConfusable(codePoint: number): number | undefined {\n\t\treturn this.confusableDictionary.get(codePoint);\n\t}\n\n\tpublic getConfusableCodePoints(): ReadonlySet<number> {\n\t\treturn new Set(this.confusableDictionary.keys());\n\t}\n}\n\nexport class InvisibleCharacters {\n\tprivate static getRawData(): number[] {\n\t\t// Generated using https://github.com/hediet/vscode-unicode-data\n\t\treturn JSON.parse('[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]');\n\t}\n\n\tprivate static _data: Set<number> | undefined = undefined;\n\n\tprivate static getData() {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Set(InvisibleCharacters.getRawData());\n\t\t}\n\t\treturn this._data;\n\t}\n\n\tpublic static isInvisibleCharacter(codePoint: number): boolean {\n\t\treturn InvisibleCharacters.getData().has(codePoint);\n\t}\n\n\tpublic static get codePoints(): ReadonlySet<number> {\n\t\treturn InvisibleCharacters.getData();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * @returns whether the provided parameter is a JavaScript String or not.\n */\nexport function isString(str: unknown): str is string {\n\treturn (typeof str === 'string');\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Array and each element in the array is a string.\n */\nexport function isStringArray(value: unknown): value is string[] {\n\treturn Array.isArray(value) && (<unknown[]>value).every(elem => isString(elem));\n}\n\n/**\n * @returns whether the provided parameter is of type `object` but **not**\n *\t`null`, an `array`, a `regexp`, nor a `date`.\n */\nexport function isObject(obj: unknown): obj is Object {\n\t// The method can't do a type cast since there are type (like strings) which\n\t// are subclasses of any put not positvely matched by the function. Hence type\n\t// narrowing results in wrong results.\n\treturn typeof obj === 'object'\n\t\t&& obj !== null\n\t\t&& !Array.isArray(obj)\n\t\t&& !(obj instanceof RegExp)\n\t\t&& !(obj instanceof Date);\n}\n\n/**\n * @returns whether the provided parameter is of type `Buffer` or Uint8Array dervived type\n */\nexport function isTypedArray(obj: unknown): obj is Object {\n\tconst TypedArray = Object.getPrototypeOf(Uint8Array);\n\treturn typeof obj === 'object'\n\t\t&& obj instanceof TypedArray;\n}\n\n/**\n * In **contrast** to just checking `typeof` this will return `false` for `NaN`.\n * @returns whether the provided parameter is a JavaScript Number or not.\n */\nexport function isNumber(obj: unknown): obj is number {\n\treturn (typeof obj === 'number' && !isNaN(obj));\n}\n\n/**\n * @returns whether the provided parameter is an Iterable, casting to the given generic\n */\nexport function isIterable<T>(obj: unknown): obj is Iterable<T> {\n\treturn !!obj && typeof (obj as any)[Symbol.iterator] === 'function';\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Boolean or not.\n */\nexport function isBoolean(obj: unknown): obj is boolean {\n\treturn (obj === true || obj === false);\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: unknown): obj is undefined {\n\treturn (typeof obj === 'undefined');\n}\n\n/**\n * @returns whether the provided parameter is defined.\n */\nexport function isDefined<T>(arg: T | null | undefined): arg is T {\n\treturn !isUndefinedOrNull(arg);\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: unknown): obj is undefined | null {\n\treturn (isUndefined(obj) || obj === null);\n}\n\n\nexport function assertType(condition: unknown, type?: string): asserts condition {\n\tif (!condition) {\n\t\tthrow new Error(type ? `Unexpected type, expected '${type}'` : 'Unexpected type');\n\t}\n}\n\n/**\n * Asserts that the argument passed in is neither undefined nor null.\n */\nexport function assertIsDefined<T>(arg: T | null | undefined): T {\n\tif (isUndefinedOrNull(arg)) {\n\t\tthrow new Error('Assertion Failed: argument is undefined or null');\n\t}\n\n\treturn arg;\n}\n\n/**\n * Asserts that each argument passed in is neither undefined nor null.\n */\nexport function assertAllDefined<T1, T2>(t1: T1 | null | undefined, t2: T2 | null | undefined): [T1, T2];\nexport function assertAllDefined<T1, T2, T3>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined): [T1, T2, T3];\nexport function assertAllDefined<T1, T2, T3, T4>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined, t4: T4 | null | undefined): [T1, T2, T3, T4];\nexport function assertAllDefined(...args: (unknown | null | undefined)[]): unknown[] {\n\tconst result = [];\n\n\tfor (let i = 0; i < args.length; i++) {\n\t\tconst arg = args[i];\n\n\t\tif (isUndefinedOrNull(arg)) {\n\t\t\tthrow new Error(`Assertion Failed: argument at index ${i} is undefined or null`);\n\t\t}\n\n\t\tresult.push(arg);\n\t}\n\n\treturn result;\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * @returns whether the provided parameter is an empty JavaScript Object or not.\n */\nexport function isEmptyObject(obj: unknown): obj is object {\n\tif (!isObject(obj)) {\n\t\treturn false;\n\t}\n\n\tfor (const key in obj) {\n\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Function or not.\n */\nexport function isFunction(obj: unknown): obj is Function {\n\treturn (typeof obj === 'function');\n}\n\n/**\n * @returns whether the provided parameters is are JavaScript Function or not.\n */\nexport function areFunctions(...objects: unknown[]): boolean {\n\treturn objects.length > 0 && objects.every(isFunction);\n}\n\nexport type TypeConstraint = string | Function;\n\nexport function validateConstraints(args: unknown[], constraints: Array<TypeConstraint | undefined>): void {\n\tconst len = Math.min(args.length, constraints.length);\n\tfor (let i = 0; i < len; i++) {\n\t\tvalidateConstraint(args[i], constraints[i]);\n\t}\n}\n\nexport function validateConstraint(arg: unknown, constraint: TypeConstraint | undefined): void {\n\n\tif (isString(constraint)) {\n\t\tif (typeof arg !== constraint) {\n\t\t\tthrow new Error(`argument does not match constraint: typeof ${constraint}`);\n\t\t}\n\t} else if (isFunction(constraint)) {\n\t\ttry {\n\t\t\tif (arg instanceof constraint) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t\tif (!isUndefinedOrNull(arg) && (arg as any).constructor === constraint) {\n\t\t\treturn;\n\t\t}\n\t\tif (constraint.length === 1 && constraint.call(undefined, arg) === true) {\n\t\t\treturn;\n\t\t}\n\t\tthrow new Error(`argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true`);\n\t}\n}\n\ntype AddFirstParameterToFunction<T, TargetFunctionsReturnType, FirstParameter> = T extends (...args: any[]) => TargetFunctionsReturnType ?\n\t// Function: add param to function\n\t(firstArg: FirstParameter, ...args: Parameters<T>) => ReturnType<T> :\n\n\t// Else: just leave as is\n\tT;\n\n/**\n * Allows to add a first parameter to functions of a type.\n */\nexport type AddFirstParameterToFunctions<Target, TargetFunctionsReturnType, FirstParameter> = {\n\t// For every property\n\t[K in keyof Target]: AddFirstParameterToFunction<Target[K], TargetFunctionsReturnType, FirstParameter>;\n};\n\n/**\n * Given an object with all optional properties, requires at least one to be defined.\n * i.e. AtLeastOne<MyObject>;\n */\nexport type AtLeastOne<T, U = { [K in keyof T]: Pick<T, K> }> = Partial<T> & U[keyof U];\n\n/**\n * Only picks the non-optional properties of a type.\n */\nexport type OmitOptional<T> = { [K in keyof T as T[K] extends Required<T>[K] ? K : never]: T[K] };\n\n/**\n * A type that removed readonly-less from all properties of `T`\n */\nexport type Mutable<T> = {\n\t-readonly [P in keyof T]: T[P]\n};\n\n/**\n * A single object or an array of the objects.\n */\nexport type SingleOrMany<T> = T | T[];\n\n\n/**\n * A type that recursively makes all properties of `T` required\n */\nexport type DeepRequiredNonNullable<T> = {\n\t[P in keyof T]-?: T[P] extends object ? DeepRequiredNonNullable<T[P]> : Required<NonNullable<T[P]>>;\n};\n\n\n/**\n * Represents a type that is a partial version of a given type `T`, where all properties are optional and can be deeply nested.\n */\nexport type DeepPartial<T> = {\n\t[P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : Partial<T[P]>;\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isTypedArray, isObject, isUndefinedOrNull } from 'vs/base/common/types';\n\nexport function deepClone<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tif (obj instanceof RegExp) {\n\t\treturn obj;\n\t}\n\tconst result: any = Array.isArray(obj) ? [] : {};\n\tObject.entries(obj).forEach(([key, value]) => {\n\t\tresult[key] = value && typeof value === 'object' ? deepClone(value) : value;\n\t});\n\treturn result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tconst stack: any[] = [obj];\n\twhile (stack.length > 0) {\n\t\tconst obj = stack.shift();\n\t\tObject.freeze(obj);\n\t\tfor (const key in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, key)) {\n\t\t\t\tconst prop = obj[key];\n\t\t\t\tif (typeof prop === 'object' && !Object.isFrozen(prop) && !isTypedArray(prop)) {\n\t\t\t\t\tstack.push(prop);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n\treturn _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n\tif (isUndefinedOrNull(obj)) {\n\t\treturn obj;\n\t}\n\n\tconst changed = changer(obj);\n\tif (typeof changed !== 'undefined') {\n\t\treturn changed;\n\t}\n\n\tif (Array.isArray(obj)) {\n\t\tconst r1: any[] = [];\n\t\tfor (const e of obj) {\n\t\t\tr1.push(_cloneAndChange(e, changer, seen));\n\t\t}\n\t\treturn r1;\n\t}\n\n\tif (isObject(obj)) {\n\t\tif (seen.has(obj)) {\n\t\t\tthrow new Error('Cannot clone recursive data-structure');\n\t\t}\n\t\tseen.add(obj);\n\t\tconst r2 = {};\n\t\tfor (const i2 in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, i2)) {\n\t\t\t\t(r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n\t\t\t}\n\t\t}\n\t\tseen.delete(obj);\n\t\treturn r2;\n\t}\n\n\treturn obj;\n}\n\n/**\n * Copies all properties of source into destination. The optional parameter \"overwrite\" allows to control\n * if existing properties on the destination should be overwritten or not. Defaults to true (overwrite).\n */\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n\tif (!isObject(destination)) {\n\t\treturn source;\n\t}\n\n\tif (isObject(source)) {\n\t\tObject.keys(source).forEach(key => {\n\t\t\tif (key in destination) {\n\t\t\t\tif (overwrite) {\n\t\t\t\t\tif (isObject(destination[key]) && isObject(source[key])) {\n\t\t\t\t\t\tmixin(destination[key], source[key], overwrite);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdestination[key] = source[key];\n\t\t\t}\n\t\t});\n\t}\n\treturn destination;\n}\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif ((Array.isArray(one)) !== (Array.isArray(other))) {\n\t\treturn false;\n\t}\n\n\tlet i: number;\n\tlet key: string;\n\n\tif (Array.isArray(one)) {\n\t\tif (one.length !== other.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < one.length; i++) {\n\t\t\tif (!equals(one[i], other[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\n\t\tfor (key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < oneKeys.length; i++) {\n\t\t\tif (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * Calls `JSON.Stringify` with a replacer to break apart any circular references.\n * This prevents `JSON`.stringify` from throwing the exception\n *  \"Uncaught TypeError: Converting circular structure to JSON\"\n */\nexport function safeStringify(obj: any): string {\n\tconst seen = new Set<any>();\n\treturn JSON.stringify(obj, (key, value) => {\n\t\tif (isObject(value) || Array.isArray(value)) {\n\t\t\tif (seen.has(value)) {\n\t\t\t\treturn '[Circular]';\n\t\t\t} else {\n\t\t\t\tseen.add(value);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t});\n}\n\ntype obj = { [key: string]: any };\n/**\n * Returns an object that has keys for each value that is different in the base object. Keys\n * that do not exist in the target but in the base object are not considered.\n *\n * Note: This is not a deep-diffing method, so the values are strictly taken into the resulting\n * object if they differ.\n *\n * @param base the object to diff against\n * @param obj the object to use for diffing\n */\nexport function distinct(base: obj, target: obj): obj {\n\tconst result = Object.create(null);\n\n\tif (!base || !target) {\n\t\treturn result;\n\t}\n\n\tconst targetKeys = Object.keys(target);\n\ttargetKeys.forEach(k => {\n\t\tconst baseValue = base[k];\n\t\tconst targetValue = target[k];\n\n\t\tif (!equals(baseValue, targetValue)) {\n\t\t\tresult[k] = targetValue;\n\t\t}\n\t});\n\n\treturn result;\n}\n\nexport function getCaseInsensitive(target: obj, key: string): any {\n\tconst lowercaseKey = key.toLowerCase();\n\tconst equivalentKey = Object.keys(target).find(k => k.toLowerCase() === lowercaseKey);\n\treturn equivalentKey ? target[equivalentKey] : target[key];\n}\n\nexport function filter(obj: obj, predicate: (key: string, value: any) => boolean): obj {\n\tconst result = Object.create(null);\n\tfor (const [key, value] of Object.entries(obj)) {\n\t\tif (predicate(key, value)) {\n\t\t\tresult[key] = value;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport function getAllPropertyNames(obj: object): string[] {\n\tlet res: string[] = [];\n\twhile (Object.prototype !== obj) {\n\t\tres = res.concat(Object.getOwnPropertyNames(obj));\n\t\tobj = Object.getPrototypeOf(obj);\n\t}\n\treturn res;\n}\n\nexport function getAllMethodNames(obj: object): string[] {\n\tconst methods: string[] = [];\n\tfor (const prop of getAllPropertyNames(obj)) {\n\t\tif (typeof (obj as any)[prop] === 'function') {\n\t\t\tmethods.push(prop);\n\t\t}\n\t}\n\treturn methods;\n}\n\nexport function createProxyObject<T extends object>(methodNames: string[], invoke: (method: string, args: unknown[]) => unknown): T {\n\tconst createProxyMethod = (method: string): () => unknown => {\n\t\treturn function () {\n\t\t\tconst args = Array.prototype.slice.call(arguments, 0);\n\t\t\treturn invoke(method, args);\n\t\t};\n\t};\n\n\tconst result = {} as T;\n\tfor (const methodName of methodNames) {\n\t\t(<any>result)[methodName] = createProxyMethod(methodName);\n\t}\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { transformErrorForSerialization } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport { getAllMethodNames } from 'vs/base/common/objects';\nimport { isWeb } from 'vs/base/common/platform';\nimport * as strings from 'vs/base/common/strings';\n\nconst INITIALIZE = '$initialize';\n\nexport interface IWorker extends IDisposable {\n\tgetId(): number;\n\tpostMessage(message: Message, transfer: ArrayBuffer[]): void;\n}\n\nexport interface IWorkerCallback {\n\t(message: Message): void;\n}\n\nexport interface IWorkerFactory {\n\tcreate(moduleId: string, callback: IWorkerCallback, onErrorCallback: (err: any) => void): IWorker;\n}\n\nlet webWorkerWarningLogged = false;\nexport function logOnceWebWorkerWarning(err: any): void {\n\tif (!isWeb) {\n\t\t// running tests\n\t\treturn;\n\t}\n\tif (!webWorkerWarningLogged) {\n\t\twebWorkerWarningLogged = true;\n\t\tconsole.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq');\n\t}\n\tconsole.warn(err.message);\n}\n\nconst enum MessageType {\n\tRequest,\n\tReply,\n\tSubscribeEvent,\n\tEvent,\n\tUnsubscribeEvent\n}\nclass RequestMessage {\n\tpublic readonly type = MessageType.Request;\n\tconstructor(\n\t\tpublic readonly vsWorker: number,\n\t\tpublic readonly req: string,\n\t\tpublic readonly method: string,\n\t\tpublic readonly args: any[]\n\t) { }\n}\nclass ReplyMessage {\n\tpublic readonly type = MessageType.Reply;\n\tconstructor(\n\t\tpublic readonly vsWorker: number,\n\t\tpublic readonly seq: string,\n\t\tpublic readonly res: any,\n\t\tpublic readonly err: any\n\t) { }\n}\nclass SubscribeEventMessage {\n\tpublic readonly type = MessageType.SubscribeEvent;\n\tconstructor(\n\t\tpublic readonly vsWorker: number,\n\t\tpublic readonly req: string,\n\t\tpublic readonly eventName: string,\n\t\tpublic readonly arg: any\n\t) { }\n}\nclass EventMessage {\n\tpublic readonly type = MessageType.Event;\n\tconstructor(\n\t\tpublic readonly vsWorker: number,\n\t\tpublic readonly req: string,\n\t\tpublic readonly event: any\n\t) { }\n}\nclass UnsubscribeEventMessage {\n\tpublic readonly type = MessageType.UnsubscribeEvent;\n\tconstructor(\n\t\tpublic readonly vsWorker: number,\n\t\tpublic readonly req: string\n\t) { }\n}\ntype Message = RequestMessage | ReplyMessage | SubscribeEventMessage | EventMessage | UnsubscribeEventMessage;\n\ninterface IMessageReply {\n\tresolve: (value?: any) => void;\n\treject: (error?: any) => void;\n}\n\ninterface IMessageHandler {\n\tsendMessage(msg: any, transfer?: ArrayBuffer[]): void;\n\thandleMessage(method: string, args: any[]): Promise<any>;\n\thandleEvent(eventName: string, arg: any): Event<any>;\n}\n\nclass SimpleWorkerProtocol {\n\n\tprivate _workerId: number;\n\tprivate _lastSentReq: number;\n\tprivate _pendingReplies: { [req: string]: IMessageReply };\n\tprivate _pendingEmitters: Map<string, Emitter<any>>;\n\tprivate _pendingEvents: Map<string, IDisposable>;\n\tprivate _handler: IMessageHandler;\n\n\tconstructor(handler: IMessageHandler) {\n\t\tthis._workerId = -1;\n\t\tthis._handler = handler;\n\t\tthis._lastSentReq = 0;\n\t\tthis._pendingReplies = Object.create(null);\n\t\tthis._pendingEmitters = new Map<string, Emitter<any>>();\n\t\tthis._pendingEvents = new Map<string, IDisposable>();\n\t}\n\n\tpublic setWorkerId(workerId: number): void {\n\t\tthis._workerId = workerId;\n\t}\n\n\tpublic sendMessage(method: string, args: any[]): Promise<any> {\n\t\tconst req = String(++this._lastSentReq);\n\t\treturn new Promise<any>((resolve, reject) => {\n\t\t\tthis._pendingReplies[req] = {\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t};\n\t\t\tthis._send(new RequestMessage(this._workerId, req, method, args));\n\t\t});\n\t}\n\n\tpublic listen(eventName: string, arg: any): Event<any> {\n\t\tlet req: string | null = null;\n\t\tconst emitter = new Emitter<any>({\n\t\t\tonWillAddFirstListener: () => {\n\t\t\t\treq = String(++this._lastSentReq);\n\t\t\t\tthis._pendingEmitters.set(req, emitter);\n\t\t\t\tthis._send(new SubscribeEventMessage(this._workerId, req, eventName, arg));\n\t\t\t},\n\t\t\tonDidRemoveLastListener: () => {\n\t\t\t\tthis._pendingEmitters.delete(req!);\n\t\t\t\tthis._send(new UnsubscribeEventMessage(this._workerId, req!));\n\t\t\t\treq = null;\n\t\t\t}\n\t\t});\n\t\treturn emitter.event;\n\t}\n\n\tpublic handleMessage(message: Message): void {\n\t\tif (!message || !message.vsWorker) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._workerId !== -1 && message.vsWorker !== this._workerId) {\n\t\t\treturn;\n\t\t}\n\t\tthis._handleMessage(message);\n\t}\n\n\tprivate _handleMessage(msg: Message): void {\n\t\tswitch (msg.type) {\n\t\t\tcase MessageType.Reply:\n\t\t\t\treturn this._handleReplyMessage(msg);\n\t\t\tcase MessageType.Request:\n\t\t\t\treturn this._handleRequestMessage(msg);\n\t\t\tcase MessageType.SubscribeEvent:\n\t\t\t\treturn this._handleSubscribeEventMessage(msg);\n\t\t\tcase MessageType.Event:\n\t\t\t\treturn this._handleEventMessage(msg);\n\t\t\tcase MessageType.UnsubscribeEvent:\n\t\t\t\treturn this._handleUnsubscribeEventMessage(msg);\n\t\t}\n\t}\n\n\tprivate _handleReplyMessage(replyMessage: ReplyMessage): void {\n\t\tif (!this._pendingReplies[replyMessage.seq]) {\n\t\t\tconsole.warn('Got reply to unknown seq');\n\t\t\treturn;\n\t\t}\n\n\t\tconst reply = this._pendingReplies[replyMessage.seq];\n\t\tdelete this._pendingReplies[replyMessage.seq];\n\n\t\tif (replyMessage.err) {\n\t\t\tlet err = replyMessage.err;\n\t\t\tif (replyMessage.err.$isError) {\n\t\t\t\terr = new Error();\n\t\t\t\terr.name = replyMessage.err.name;\n\t\t\t\terr.message = replyMessage.err.message;\n\t\t\t\terr.stack = replyMessage.err.stack;\n\t\t\t}\n\t\t\treply.reject(err);\n\t\t\treturn;\n\t\t}\n\n\t\treply.resolve(replyMessage.res);\n\t}\n\n\tprivate _handleRequestMessage(requestMessage: RequestMessage): void {\n\t\tconst req = requestMessage.req;\n\t\tconst result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\n\t\tresult.then((r) => {\n\t\t\tthis._send(new ReplyMessage(this._workerId, req, r, undefined));\n\t\t}, (e) => {\n\t\t\tif (e.detail instanceof Error) {\n\t\t\t\t// Loading errors have a detail property that points to the actual error\n\t\t\t\te.detail = transformErrorForSerialization(e.detail);\n\t\t\t}\n\t\t\tthis._send(new ReplyMessage(this._workerId, req, undefined, transformErrorForSerialization(e)));\n\t\t});\n\t}\n\n\tprivate _handleSubscribeEventMessage(msg: SubscribeEventMessage): void {\n\t\tconst req = msg.req;\n\t\tconst disposable = this._handler.handleEvent(msg.eventName, msg.arg)((event) => {\n\t\t\tthis._send(new EventMessage(this._workerId, req, event));\n\t\t});\n\t\tthis._pendingEvents.set(req, disposable);\n\t}\n\n\tprivate _handleEventMessage(msg: EventMessage): void {\n\t\tif (!this._pendingEmitters.has(msg.req)) {\n\t\t\tconsole.warn('Got event for unknown req');\n\t\t\treturn;\n\t\t}\n\t\tthis._pendingEmitters.get(msg.req)!.fire(msg.event);\n\t}\n\n\tprivate _handleUnsubscribeEventMessage(msg: UnsubscribeEventMessage): void {\n\t\tif (!this._pendingEvents.has(msg.req)) {\n\t\t\tconsole.warn('Got unsubscribe for unknown req');\n\t\t\treturn;\n\t\t}\n\t\tthis._pendingEvents.get(msg.req)!.dispose();\n\t\tthis._pendingEvents.delete(msg.req);\n\t}\n\n\tprivate _send(msg: Message): void {\n\t\tconst transfer: ArrayBuffer[] = [];\n\t\tif (msg.type === MessageType.Request) {\n\t\t\tfor (let i = 0; i < msg.args.length; i++) {\n\t\t\t\tif (msg.args[i] instanceof ArrayBuffer) {\n\t\t\t\t\ttransfer.push(msg.args[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (msg.type === MessageType.Reply) {\n\t\t\tif (msg.res instanceof ArrayBuffer) {\n\t\t\t\ttransfer.push(msg.res);\n\t\t\t}\n\t\t}\n\t\tthis._handler.sendMessage(msg, transfer);\n\t}\n}\n\nexport interface IWorkerClient<W> {\n\tgetProxyObject(): Promise<W>;\n\tdispose(): void;\n}\n\n/**\n * Main thread side\n */\nexport class SimpleWorkerClient<W extends object, H extends object> extends Disposable implements IWorkerClient<W> {\n\n\tprivate readonly _worker: IWorker;\n\tprivate readonly _onModuleLoaded: Promise<string[]>;\n\tprivate readonly _protocol: SimpleWorkerProtocol;\n\tprivate readonly _lazyProxy: Promise<W>;\n\n\tconstructor(workerFactory: IWorkerFactory, moduleId: string, host: H) {\n\t\tsuper();\n\n\t\tlet lazyProxyReject: ((err: any) => void) | null = null;\n\n\t\tthis._worker = this._register(workerFactory.create(\n\t\t\t'vs/base/common/worker/simpleWorker',\n\t\t\t(msg: Message) => {\n\t\t\t\tthis._protocol.handleMessage(msg);\n\t\t\t},\n\t\t\t(err: any) => {\n\t\t\t\t// in Firefox, web workers fail lazily :(\n\t\t\t\t// we will reject the proxy\n\t\t\t\tlazyProxyReject?.(err);\n\t\t\t}\n\t\t));\n\n\t\tthis._protocol = new SimpleWorkerProtocol({\n\t\t\tsendMessage: (msg: any, transfer: ArrayBuffer[]): void => {\n\t\t\t\tthis._worker.postMessage(msg, transfer);\n\t\t\t},\n\t\t\thandleMessage: (method: string, args: any[]): Promise<any> => {\n\t\t\t\tif (typeof (host as any)[method] !== 'function') {\n\t\t\t\t\treturn Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\treturn Promise.resolve((host as any)[method].apply(host, args));\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn Promise.reject(e);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleEvent: (eventName: string, arg: any): Event<any> => {\n\t\t\t\tif (propertyIsDynamicEvent(eventName)) {\n\t\t\t\t\tconst event = (host as any)[eventName].call(host, arg);\n\t\t\t\t\tif (typeof event !== 'function') {\n\t\t\t\t\t\tthrow new Error(`Missing dynamic event ${eventName} on main thread host.`);\n\t\t\t\t\t}\n\t\t\t\t\treturn event;\n\t\t\t\t}\n\t\t\t\tif (propertyIsEvent(eventName)) {\n\t\t\t\t\tconst event = (host as any)[eventName];\n\t\t\t\t\tif (typeof event !== 'function') {\n\t\t\t\t\t\tthrow new Error(`Missing event ${eventName} on main thread host.`);\n\t\t\t\t\t}\n\t\t\t\t\treturn event;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Malformed event name ${eventName}`);\n\t\t\t}\n\t\t});\n\t\tthis._protocol.setWorkerId(this._worker.getId());\n\n\t\t// Gather loader configuration\n\t\tlet loaderConfiguration: any = null;\n\n\t\tconst globalRequire: { getConfig?(): object } | undefined = (globalThis as any).require;\n\t\tif (typeof globalRequire !== 'undefined' && typeof globalRequire.getConfig === 'function') {\n\t\t\t// Get the configuration from the Monaco AMD Loader\n\t\t\tloaderConfiguration = globalRequire.getConfig();\n\t\t} else if (typeof (globalThis as any).requirejs !== 'undefined') {\n\t\t\t// Get the configuration from requirejs\n\t\t\tloaderConfiguration = (globalThis as any).requirejs.s.contexts._.config;\n\t\t}\n\n\t\tconst hostMethods = getAllMethodNames(host);\n\n\t\t// Send initialize message\n\t\tthis._onModuleLoaded = this._protocol.sendMessage(INITIALIZE, [\n\t\t\tthis._worker.getId(),\n\t\t\tJSON.parse(JSON.stringify(loaderConfiguration)),\n\t\t\tmoduleId,\n\t\t\thostMethods,\n\t\t]);\n\n\t\t// Create proxy to loaded code\n\t\tconst proxyMethodRequest = (method: string, args: any[]): Promise<any> => {\n\t\t\treturn this._request(method, args);\n\t\t};\n\t\tconst proxyListen = (eventName: string, arg: any): Event<any> => {\n\t\t\treturn this._protocol.listen(eventName, arg);\n\t\t};\n\n\t\tthis._lazyProxy = new Promise<W>((resolve, reject) => {\n\t\t\tlazyProxyReject = reject;\n\t\t\tthis._onModuleLoaded.then((availableMethods: string[]) => {\n\t\t\t\tresolve(createProxyObject<W>(availableMethods, proxyMethodRequest, proxyListen));\n\t\t\t}, (e) => {\n\t\t\t\treject(e);\n\t\t\t\tthis._onError('Worker failed to load ' + moduleId, e);\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic getProxyObject(): Promise<W> {\n\t\treturn this._lazyProxy;\n\t}\n\n\tprivate _request(method: string, args: any[]): Promise<any> {\n\t\treturn new Promise<any>((resolve, reject) => {\n\t\t\tthis._onModuleLoaded.then(() => {\n\t\t\t\tthis._protocol.sendMessage(method, args).then(resolve, reject);\n\t\t\t}, reject);\n\t\t});\n\t}\n\n\tprivate _onError(message: string, error?: any): void {\n\t\tconsole.error(message);\n\t\tconsole.info(error);\n\t}\n}\n\nfunction propertyIsEvent(name: string): boolean {\n\t// Assume a property is an event if it has a form of \"onSomething\"\n\treturn name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\n}\n\nfunction propertyIsDynamicEvent(name: string): boolean {\n\t// Assume a property is a dynamic event (a method that returns an event) if it has a form of \"onDynamicSomething\"\n\treturn /^onDynamic/.test(name) && strings.isUpperAsciiLetter(name.charCodeAt(9));\n}\n\nfunction createProxyObject<T extends object>(\n\tmethodNames: string[],\n\tinvoke: (method: string, args: unknown[]) => unknown,\n\tproxyListen: (eventName: string, arg: any) => Event<any>\n): T {\n\tconst createProxyMethod = (method: string): () => unknown => {\n\t\treturn function () {\n\t\t\tconst args = Array.prototype.slice.call(arguments, 0);\n\t\t\treturn invoke(method, args);\n\t\t};\n\t};\n\tconst createProxyDynamicEvent = (eventName: string): (arg: any) => Event<any> => {\n\t\treturn function (arg) {\n\t\t\treturn proxyListen(eventName, arg);\n\t\t};\n\t};\n\n\tconst result = {} as T;\n\tfor (const methodName of methodNames) {\n\t\tif (propertyIsDynamicEvent(methodName)) {\n\t\t\t(<any>result)[methodName] = createProxyDynamicEvent(methodName);\n\t\t\tcontinue;\n\t\t}\n\t\tif (propertyIsEvent(methodName)) {\n\t\t\t(<any>result)[methodName] = proxyListen(methodName, undefined);\n\t\t\tcontinue;\n\t\t}\n\t\t(<any>result)[methodName] = createProxyMethod(methodName);\n\t}\n\treturn result;\n}\n\nexport interface IRequestHandler {\n\t_requestHandlerBrand: any;\n\t[prop: string]: any;\n}\n\nexport interface IRequestHandlerFactory<H> {\n\t(host: H): IRequestHandler;\n}\n\n/**\n * Worker side\n */\nexport class SimpleWorkerServer<H extends object> {\n\n\tprivate _requestHandlerFactory: IRequestHandlerFactory<H> | null;\n\tprivate _requestHandler: IRequestHandler | null;\n\tprivate _protocol: SimpleWorkerProtocol;\n\n\tconstructor(postMessage: (msg: Message, transfer?: ArrayBuffer[]) => void, requestHandlerFactory: IRequestHandlerFactory<H> | null) {\n\t\tthis._requestHandlerFactory = requestHandlerFactory;\n\t\tthis._requestHandler = null;\n\t\tthis._protocol = new SimpleWorkerProtocol({\n\t\t\tsendMessage: (msg: any, transfer: ArrayBuffer[]): void => {\n\t\t\t\tpostMessage(msg, transfer);\n\t\t\t},\n\t\t\thandleMessage: (method: string, args: any[]): Promise<any> => this._handleMessage(method, args),\n\t\t\thandleEvent: (eventName: string, arg: any): Event<any> => this._handleEvent(eventName, arg)\n\t\t});\n\t}\n\n\tpublic onmessage(msg: any): void {\n\t\tthis._protocol.handleMessage(msg);\n\t}\n\n\tprivate _handleMessage(method: string, args: any[]): Promise<any> {\n\t\tif (method === INITIALIZE) {\n\t\t\treturn this.initialize(<number>args[0], <any>args[1], <string>args[2], <string[]>args[3]);\n\t\t}\n\n\t\tif (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\n\t\t\treturn Promise.reject(new Error('Missing requestHandler or method: ' + method));\n\t\t}\n\n\t\ttry {\n\t\t\treturn Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\n\t\t} catch (e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n\n\tprivate _handleEvent(eventName: string, arg: any): Event<any> {\n\t\tif (!this._requestHandler) {\n\t\t\tthrow new Error(`Missing requestHandler`);\n\t\t}\n\t\tif (propertyIsDynamicEvent(eventName)) {\n\t\t\tconst event = (this._requestHandler as any)[eventName].call(this._requestHandler, arg);\n\t\t\tif (typeof event !== 'function') {\n\t\t\t\tthrow new Error(`Missing dynamic event ${eventName} on request handler.`);\n\t\t\t}\n\t\t\treturn event;\n\t\t}\n\t\tif (propertyIsEvent(eventName)) {\n\t\t\tconst event = (this._requestHandler as any)[eventName];\n\t\t\tif (typeof event !== 'function') {\n\t\t\t\tthrow new Error(`Missing event ${eventName} on request handler.`);\n\t\t\t}\n\t\t\treturn event;\n\t\t}\n\t\tthrow new Error(`Malformed event name ${eventName}`);\n\t}\n\n\tprivate initialize(workerId: number, loaderConfig: any, moduleId: string, hostMethods: string[]): Promise<string[]> {\n\t\tthis._protocol.setWorkerId(workerId);\n\n\t\tconst proxyMethodRequest = (method: string, args: any[]): Promise<any> => {\n\t\t\treturn this._protocol.sendMessage(method, args);\n\t\t};\n\t\tconst proxyListen = (eventName: string, arg: any): Event<any> => {\n\t\t\treturn this._protocol.listen(eventName, arg);\n\t\t};\n\n\t\tconst hostProxy = createProxyObject<H>(hostMethods, proxyMethodRequest, proxyListen);\n\n\t\tif (this._requestHandlerFactory) {\n\t\t\t// static request handler\n\t\t\tthis._requestHandler = this._requestHandlerFactory(hostProxy);\n\t\t\treturn Promise.resolve(getAllMethodNames(this._requestHandler));\n\t\t}\n\n\t\tif (loaderConfig) {\n\t\t\t// Remove 'baseUrl', handling it is beyond scope for now\n\t\t\tif (typeof loaderConfig.baseUrl !== 'undefined') {\n\t\t\t\tdelete loaderConfig['baseUrl'];\n\t\t\t}\n\t\t\tif (typeof loaderConfig.paths !== 'undefined') {\n\t\t\t\tif (typeof loaderConfig.paths.vs !== 'undefined') {\n\t\t\t\t\tdelete loaderConfig.paths['vs'];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof loaderConfig.trustedTypesPolicy !== 'undefined') {\n\t\t\t\t// don't use, it has been destroyed during serialize\n\t\t\t\tdelete loaderConfig['trustedTypesPolicy'];\n\t\t\t}\n\n\t\t\t// Since this is in a web worker, enable catching errors\n\t\t\tloaderConfig.catchError = true;\n\t\t\tglobalThis.require.config(loaderConfig);\n\t\t}\n\n\t\treturn new Promise<string[]>((resolve, reject) => {\n\t\t\t// Use the global require to be sure to get the global config\n\n\t\t\t// ESM-comment-begin\n\t\t\tconst req = (globalThis.require || require);\n\t\t\t// ESM-comment-end\n\t\t\t// ESM-uncomment-begin\n\t\t\t// const req = globalThis.require;\n\t\t\t// ESM-uncomment-end\n\n\t\t\treq([moduleId], (module: { create: IRequestHandlerFactory<H> }) => {\n\t\t\t\tthis._requestHandler = module.create(hostProxy);\n\n\t\t\t\tif (!this._requestHandler) {\n\t\t\t\t\treject(new Error(`No RequestHandler!`));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresolve(getAllMethodNames(this._requestHandler));\n\t\t\t}, reject);\n\t\t});\n\t}\n}\n\n/**\n * Called on the worker side\n * @skipMangle\n */\nexport function create(postMessage: (msg: Message, transfer?: ArrayBuffer[]) => void): SimpleWorkerServer<any> {\n\treturn new SimpleWorkerServer(postMessage, null);\n}\n"],"mappings":"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","names":["__m","__M","deps","result","i","len","$fb","array","predicate","fromIdx","idx","$gb","exports","fromIndex","element","$hb","$ib","startIdx","endIdxEx","j","k","$jb","$kb","$lb","$mb","e","item","$nb","comparator","max","$ob","$pb","a","b","$qb","maxIdx","$rb","items","mapFn","value","mapped","$E","data","groupFn","key","target","$F","before","after","removed","added","$G","index","$H","setA","setB","elem","$W","$bb","listener","newUnexpectedErrorHandler","setUnexpectedErrorHandler","$Z","cast","$1","$4","$2","$3","error","name","message","stack","canceledName","$5","$6","$7","$8","$9","$0","err","$$","$_","$ab","msg","$cb","$sb","n","$tb","arr","$ub","one","other","itemEquals","$vb","last","$wb","$xb","length","compareToKey","low","high","mid","comp","$yb","nth","compare","pivotValue","lower","higher","pivots","val","$zb","currentGroup","$Ab","shouldBeGrouped","$Bb","f","$Cb","$Db","pushSplice","start","deleteCount","toInsert","latest","beforeIdx","afterIdx","beforeElement","afterElement","$Eb","splices","splice","top","topStep","$Gb","batch","token","resolve","reject","o","m","errors_1","arraysFind_1","$Hb","$Ib","to","$Jb","from","$Kb","obj","$Lb","$Mb","keyFn","seen","$Nb","$Ob","notFoundValue","$Pb","$Qb","equals","$Rb","$Sb","arg","$Tb","indexer","mapper","r","t","$Ub","$Vb","$Wb","insertIndex","insertArr","$Xb","_seed","rand","seed","x","temp","$Yb","$Zb","$1b","$2b","fn","$3b","$4b","$5b","newItems","getActualStartIndex","originalLength","newItemsLength","$6b","CompareResult","isLessThan","isLessThanOrEqual","isGreaterThan","isNeitherLessOrGreaterThan","$7b","selector","$8b","comparators","item1","item2","$9b","$0b","$$b","$_b","g","endIdx","count","$ac","iterate","handler","cb","first","_callback","$db","fnDidRunCallback","_this","didCall","Iterable","is","thing","_empty","empty","single","wrap","iterableOrElement","iterable","reverse","isEmpty","some","find","filter","map","concat","iterables","reduce","reducer","initialValue","slice","consume","atMost","consumed","iterator","next","asyncToArray","$V","d","Node","$4c","node","atTheEnd","newNode","oldLast","oldFirst","didRemove","res","anchor","$xc","$yc","entries","$zc","set","ResourceMapEntry","uri","isEntries","$Ac","toKey","_a","resource","clb","thisArg","_","entry","$Bc","entriesOrKey","_b","callbackfn","_value","Touch","$Cc","_c","touch","state","current","newSize","currentSize","previous","$Dc","limit","ratio","$Ec","counter","$Fc","$Gc","values","$Hc","TRACK_DISPOSABLES","disposableTracker","$Ic","child","parent","disposable","cache","cacheValue","rootParentCache","v","maxReported","preComputedLeaks","uncoveredLeakingObjs","leakingObjects","info","leakingObjsSet","l","getStackTracePath","leaking","removePrefix","linesToRemove","regexp","lines","p","stackTraceStarts","map_1","stackTracePath","arrays_1","stackTraceFormattedLines","line","prevStarts","continuations","collections_1","cont","$Jc","tracker","__is_disposable_tracked__","$Tc","$Kc","$Lc","setParentOfDisposable","setParentOfDisposables","children","$Mc","singleton","$Nc","$Oc","iterator_1","errors","$Pc","disposables","$Qc","$Rc","self","functional_1","$Sc","$Uc","oldValue","$Vc","$Wc","$Xc","callback","$Yc","args","reference","object","dispose","$Zc","ref","$1c","$2c","store","$3c","skipDisposeOnOverwrite","_isWindows","_isMacintosh","_isLinux","_isLinuxSnap","_isNative","_isWeb","_isElectron","_isIOS","_isCI","_isMobile","_locale","_language","_platformLocale","_translationsConfigFile","_userAgent","$globalThis","nodeProcess","isElectronProcess","isElectronRenderer","rawNlsConfig","nlsConfig","resolved","el","Platform","$b","platform","_platform","Language","isDefaultVariant","isDefault","pending","candidate","lastId","myId","OperatingSystem","_isLittleEndian","_isLittleEndianComputed","$x","test","$D","osVersion","hasPerformanceNow","$1d","highResolution","_enableDisposeWithListenerWarning","_enableSnapshotPotentialLeakWarning","Event","lifecycle_1","_addLeakageTraceLogic","options","origListenerDidAdd","Stacktrace","defer","event","debounce","once","thisArgs","didFire","snapshot","forEach","each","signal","any","events","addAndReturnDisposable","merge","initial","output","emitter","$5d","delay","leading","flushOnListenerRemove","leakWarningThreshold","subscription","handle","numDebouncedCalls","doFire","cur","_output","accumulate","latch","firstCall","shouldEmit","split","isT","buffer","flushAfterTimeout","_buffer","flush","chain","sythensize","cs","ChainableSynthesis","HaltChainable","step","fromNodeEventEmitter","eventName","id","onFirstListenerAdd","onLastListenerRemove","fromDOMEventEmitter","toPromise","fromPromise","promise","runAndSubscribe","EmitterObserver","_observable","_change","fromObservable","obs","fromObservableLight","observable","didChange","observer","$3d","listenerCount","stopwatch_1","elapsed","_globalLeakWarningThreshold","$4d","LeakageMonitor","threshold","topStack","topCount","UniqueContainer","compactionThreshold","forEachListener","listeners","contained","removeMonitor","EventDeliveryQueuePrivate","adjustDeliveryQueue","errorHandler","dq","$6d","end","$7d","promiseJoin","linkedList_1","thenables","$8d","$9d","$0d","$$d","$_d","onAddItem","onRemoveItem","getEvent","multiplexer","itemListeners","addItem","instance","$ae","$be","shortcutEvent","context","CancellationToken","isCancellationToken","MutableToken","event_1","$ce","cancel","$Ne","cts","cancellation_1","$Oe","c","$Pe","$Se","str","_formatRegexp","$Te","match","group","_format2Regexp","$Ue","template","$Ve","ch","$We","html","$Xe","$Ye","character","$Ze","maxLength","suffix","$1e","prefixLength","suffixLength","$2e","haystack","needle","trimmed","$3e","$4e","needleLen","offset","haystackLen","$5e","pattern","$6e","$7e","searchString","isRegex","modifiers","$8e","$9e","$0e","linesWithSeparators","splitLinesAndSeparators","$$e","chCode","$_e","$af","startIndex","$bf","search","replacer","parts","$cf","$df","aStart","aEnd","bStart","bEnd","codeA","codeB","aLen","bLen","$ef","$ff","$hf","diff","$gf","code","$if","$jf","$kf","candidateLength","$lf","$mf","aLastIndex","bLastIndex","$nf","charCode","$of","$pf","highSurrogate","lowSurrogate","$qf","nextCharCode","getPrevCodePoint","prevCharCode","$rf","codePoint","$sf","graphemeBreakTree","GraphemeBreakTree","initialOffset","graphemeBreakType","nextGraphemeBreakType","breakBetweenGraphemeBreakType","prevGraphemeBreakType","$tf","$uf","$vf","endOffset","$wf","CONTAINS_RTL","makeContainsRtl","$xf","IS_BASIC_ASCII","$yf","$Af","$Bf","$Cf","$Df","text","prefix","re","CSI_SEQUENCE","CSI_CUSTOM_SEQUENCE","$Ef","$Gf","$Hf","$If","query","queryLen","targetLower","lastIndexOf","indexOf","$Jf","ignoreEscapedChars","$Kf","$Lf","$Mf","$Nf","breakTypeA","breakTypeB","GraphemeBreakType","getGraphemeBreakRawData","nodeCount","nodeIndex","$Of","emojiOffset","getOffsetBeforeLastEmojiComponent","isEmojiModifier","resultOffset","CodePoint","$Qf","locales","lazy_1","cache_1","arrayToMap","mergeMaps","map1","map2","intersectMaps","filteredLocales","languageSpecificMap","locale","commonMap","$Rf","$Sf","$Tf","$Uf","$Vf","TypedArray","$Wf","$Xf","$Yf","$Zf","$1f","$2f","$3f","condition","type","$4f","$5f","hasOwnProperty","$6f","$7f","$8f","objects","$9f","constraints","$0f","constraint","$In","$Jn","_hasOwnProperty","prop","types_1","$Kn","changer","_cloneAndChange","changed","r1","r2","i2","$Ln","destination","source","overwrite","$Mn","oneKeys","otherKeys","$Nn","$On","base","baseValue","targetValue","$Pn","lowercaseKey","equivalentKey","$Qn","$Rn","$Sn","methods","$Tn","methodNames","invoke","createProxyMethod","method","methodName","INITIALIZE","webWorkerWarningLogged","logOnceWebWorkerWarning","platform_1","MessageType","RequestMessage","vsWorker","req","ReplyMessage","seq","SubscribeEventMessage","EventMessage","UnsubscribeEventMessage","SimpleWorkerProtocol","workerId","replyMessage","reply","requestMessage","transfer","SimpleWorkerClient","workerFactory","moduleId","host","lazyProxyReject","propertyIsDynamicEvent","propertyIsEvent","loaderConfiguration","globalRequire","hostMethods","objects_1","proxyMethodRequest","proxyListen","availableMethods","createProxyObject","strings","createProxyDynamicEvent","SimpleWorkerServer","postMessage","requestHandlerFactory","loaderConfig","hostProxy","require","module","create"],"file":"simpleWorker.js"}