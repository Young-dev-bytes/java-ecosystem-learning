"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/path","vs/base/common/platform","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ae=function(ce){for(var e=[],A=0,E=ce.length;A<E;A++)e[A]=ue[ce[A]];return e};define(ue[10],ae([0,1]),function(ce,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$be=void 0,e.$be=Symbol("MicrotaskDelay")}),define(ue[5],ae([0,1,2,3,4,16]),function(ce,e,A,E,O,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$og=m,e.$pg=y,e.$qg=q,e.$rg=K,e.$sg=W,e.$tg=n,e.$ug=r,e.$vg=h,e.$wg=I,e.$xg=U,e.$yg=$,e.$zg=L,e.$Ag=X,e.$Bg=v,e.$Cg=F,e.$Dg=C,e.$Eg=Y;function m(s){return s===47||s===92}function y(s){return s.replace(/[\\/]/g,A.$hc.sep)}function q(s){return s.indexOf("/")===-1&&(s=y(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function K(s,d=A.$hc.sep){if(!s)return"";const j=s.length,B=s.charCodeAt(0);if(m(B)){if(m(s.charCodeAt(1))&&!m(s.charCodeAt(2))){let S=3;const J=S;for(;S<j&&!m(s.charCodeAt(S));S++);if(J!==S&&!m(s.charCodeAt(S+1))){for(S+=1;S<j;S++)if(m(s.charCodeAt(S)))return s.slice(0,S+1).replace(/[\\/]/g,d)}}return d}else if(I(B)&&s.charCodeAt(1)===58)return m(s.charCodeAt(2))?s.slice(0,2)+d:s.slice(0,2);let Q=s.indexOf("://");if(Q!==-1){for(Q+=3;Q<j;Q++)if(m(s.charCodeAt(Q)))return s.slice(0,Q+1)}return""}function W(s){if(!E.$c||!s||s.length<5)return!1;let d=s.charCodeAt(0);if(d!==92||(d=s.charCodeAt(1),d!==92))return!1;let j=2;const B=j;for(;j<s.length&&(d=s.charCodeAt(j),d!==92);j++);return!(B===j||(d=s.charCodeAt(j+1),isNaN(d)||d===92))}const V=/[\\/:\*\?"<>\|]/g,G=/[\\/]/g,D=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,d=E.$c){const j=d?V:G;return!(!s||s.length===0||/^\s+$/.test(s)||(j.lastIndex=0,j.test(s))||d&&D.test(s)||s==="."||s===".."||d&&s[s.length-1]==="."||d&&s.length!==s.trim().length||s.length>255)}function r(s,d,j){const B=s===d;return!j||B?B:!s||!d?!1:(0,O.$yf)(s,d)}function h(s,d,j,B=A.sep){if(s===d)return!0;if(!s||!d||d.length>s.length)return!1;if(j){if(!(0,O.$zf)(s,d))return!1;if(d.length===s.length)return!0;let S=d.length;return d.charAt(d.length-1)===B&&S--,s.charAt(S)===B}return d.charAt(d.length-1)!==B&&(d+=B),s.indexOf(d)===0}function I(s){return s>=65&&s<=90||s>=97&&s<=122}function U(s,d){return E.$c&&s.endsWith(":")&&(s+=A.sep),(0,A.$jc)(s)||(s=(0,A.$kc)(d,s)),s=(0,A.$ic)(s),$(s)}function $(s){return E.$c?(s=(0,O.$gf)(s,A.sep),s.endsWith(":")&&(s+=A.sep)):(s=(0,O.$gf)(s,A.sep),s||(s=A.sep)),s}function L(s){const d=(0,A.$ic)(s);return E.$c?s.length>3?!1:X(d)&&(s.length===2||d.charCodeAt(2)===92):d===A.$hc.sep}function X(s,d=E.$c){return d?I(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}function v(s,d=E.$c){return X(s,d)?s[0]:void 0}function F(s,d,j){return d.length>s.length?-1:s===d?0:(j&&(s=s.toLowerCase(),d=d.toLowerCase()),s.indexOf(d))}function C(s){const d=s.split(":");let j,B,Q;for(const S of d){const J=Number(S);(0,w.$ag)(J)?B===void 0?B=J:Q===void 0&&(Q=J):j=j?[j,S].join(":"):S}if(!j)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:j,line:B!==void 0?B:void 0,column:Q!==void 0?Q:B!==void 0?1:void 0}}const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",x="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function Y(s,d,j=8){let B="";for(let S=0;S<j;S++){let J;S===0&&E.$c&&!d&&(j===3||j===4)?J=x:J=p,B+=J.charAt(Math.floor(Math.random()*J.length))}let Q;return d?Q=`${d}-${B}`:Q=B,s?(0,A.$kc)(s,Q):Q}}),define(ue[11],ae([0,1,12,3,4,6,2]),function(ce,e,A,E,O,w,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Jg=e.$Ig=e.$Hg=e.Schemas=void 0,e.$Fg=q,e.$Gg=K,e.$Kg=V;var y;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompreBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting"})(y||(e.Schemas=y={}));function q(n,r){return w.URI.isUri(n)?(0,O.$yf)(n.scheme,r):(0,O.$zf)(n,r+":")}function K(n,...r){return r.some(h=>q(n,h))}e.$Hg="vscode-tkn",e.$Ig="tkn";class W{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(r){this.d=r}setDelegate(r){this.e=r}setServerRootPath(r,h){this.f=V(r,h)}getServerRootPath(){return this.f}get g(){return m.$hc.join(this.f,y.vscodeRemoteResource)}set(r,h,I){this.a[r]=h,this.b[r]=I}setConnectionToken(r,h){this.c[r]=h}getPreferredWebSchema(){return this.d}rewrite(r){if(this.e)try{return this.e(r)}catch(X){return A.$1(X),r}const h=r.authority;let I=this.a[h];I&&I.indexOf(":")!==-1&&I.indexOf("[")===-1&&(I=`[${I}]`);const U=this.b[h],$=this.c[h];let L=`path=${encodeURIComponent(r.path)}`;return typeof $=="string"&&(L+=`&${e.$Ig}=${encodeURIComponent($)}`),w.URI.from({scheme:E.$i?this.d:y.vscodeRemoteResource,authority:`${I}:${U}`,path:E.$i?(window.location.pathname+"/"+this.g).replace(/\/\/+/g,"/"):this.g,query:L})}}e.$Jg=new W;function V(n,r){return m.$hc.join(r??"/",`${n.quality??"oss"}-${n.commit??"dev"}`)}e.$Lg="vs/../../extensions",e.$Mg="vs/../../node_modules",e.$Ng="vs/../../node_modules.asar",e.$Og="vs/../../node_modules.asar.unpacked",e.$Pg="vscode-app";class G{asBrowserUri(r){const h=this.b(r,ce);return this.uriToBrowserUri(h)}uriToBrowserUri(r){return r.scheme===y.vscodeRemote?e.$Jg.rewrite(r):r.scheme===y.file&&(E.$g||E.$k===`${y.vscodeFileResource}://${G.a}`)?r.with({scheme:y.vscodeFileResource,authority:r.authority||G.a,query:null,fragment:null}):r}asFileUri(r){const h=this.b(r,ce);return this.uriToFileUri(h)}uriToFileUri(r){return r.scheme===y.vscodeFileResource?r.with({scheme:y.file,authority:r.authority!==G.a?r.authority:null,query:null,fragment:null}):r}b(r,h){return w.URI.isUri(r)?r:w.URI.parse(h.toUrl(r))}}G.a=e.$Pg,e.$Qg=new G;var D;(function(n){const r=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(r.get("3"));const h="vscode-coi";function I($){let L;typeof $=="string"?L=new URL($).searchParams:$ instanceof URL?L=$.searchParams:w.URI.isUri($)&&(L=new URL($.toString(!0)).searchParams);const X=L?.get(h);if(X)return r.get(X)}n.getHeadersFromQuery=I;function U($,L,X){if(!globalThis.crossOriginIsolated)return;const v=L&&X?"3":X?"2":"1";$ instanceof URLSearchParams?$.set(h,v):$[h]=v}n.addSearchParam=U})(D||(e.COI=D={}))}),define(ue[7],ae([0,1,5,11,2,3,4,6]),function(ce,e,A,E,O,w,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUri=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=e.$2g=e.$1g=e.$Zg=e.$Yg=void 0,e.$Xg=q,e.$gh=W,e.$hh=G;function q(D){return(0,y.$xc)(D,!0)}class K{constructor(n){this.a=n}compare(n,r,h=!1){return n===r?0:(0,m.$rf)(this.getComparisonKey(n,h),this.getComparisonKey(r,h))}isEqual(n,r,h=!1){return n===r?!0:!n||!r?!1:this.getComparisonKey(n,h)===this.getComparisonKey(r,h)}getComparisonKey(n,r=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,r,h=!1){if(n.scheme===r.scheme){if(n.scheme===E.Schemas.file)return A.$vg(q(n),q(r),this.a(n))&&n.query===r.query&&(h||n.fragment===r.fragment);if((0,e.$ch)(n.authority,r.authority))return A.$vg(n.path,r.path,this.a(n),"/")&&n.query===r.query&&(h||n.fragment===r.fragment)}return!1}joinPath(n,...r){return y.URI.joinPath(n,...r)}basenameOrAuthority(n){return(0,e.$7g)(n)||n.authority}basename(n){return O.$hc.basename(n.path)}extname(n){return O.$hc.extname(n.path)}dirname(n){if(n.path.length===0)return n;let r;return n.scheme===E.Schemas.file?r=y.URI.file(O.$nc(q(n))).path:(r=O.$hc.dirname(n.path),n.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${n.toString})) resulted in a relative path`),r="/")),n.with({path:r})}normalizePath(n){if(!n.path.length)return n;let r;return n.scheme===E.Schemas.file?r=y.URI.file(O.$ic(q(n))).path:r=O.$hc.normalize(n.path),n.with({path:r})}relativePath(n,r){if(n.scheme!==r.scheme||!(0,e.$ch)(n.authority,r.authority))return;if(n.scheme===E.Schemas.file){const U=O.$mc(q(n),q(r));return w.$c?A.$pg(U):U}let h=n.path||"/";const I=r.path||"/";if(this.a(n)){let U=0;for(const $=Math.min(h.length,I.length);U<$&&!(h.charCodeAt(U)!==I.charCodeAt(U)&&h.charAt(U).toLowerCase()!==I.charAt(U).toLowerCase());U++);h=I.substr(0,U)+h.substr(U)}return O.$hc.relative(h,I)}resolvePath(n,r){if(n.scheme===E.Schemas.file){const h=y.URI.file(O.$lc(q(n),r));return n.with({authority:h.authority,path:h.path})}return r=A.$qg(r),n.with({path:O.$hc.resolve(n.path,r)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,r){return n===r||n!==void 0&&r!==void 0&&(0,m.$yf)(n,r)}hasTrailingPathSeparator(n,r=O.sep){if(n.scheme===E.Schemas.file){const h=q(n);return h.length>A.$rg(h).length&&h[h.length-1]===r}else{const h=n.path;return h.length>1&&h.charCodeAt(h.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,r=O.sep){return(0,e.$dh)(n,r)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,r=O.sep){let h=!1;if(n.scheme===E.Schemas.file){const I=q(n);h=I!==void 0&&I.length===A.$rg(I).length&&I[I.length-1]===r}else{r="/";const I=n.path;h=I.length===1&&I.charCodeAt(I.length-1)===47}return!h&&!(0,e.$dh)(n,r)?n.with({path:n.path+"/"}):n}}e.$Yg=K,e.$Zg=new K(()=>!1),e.$1g=new K(D=>D.scheme===E.Schemas.file?!w.$e:!0),e.$2g=new K(D=>!0),e.$3g=e.$Zg.isEqual.bind(e.$Zg),e.$4g=e.$Zg.isEqualOrParent.bind(e.$Zg),e.$5g=e.$Zg.getComparisonKey.bind(e.$Zg),e.$6g=e.$Zg.basenameOrAuthority.bind(e.$Zg),e.$7g=e.$Zg.basename.bind(e.$Zg),e.$8g=e.$Zg.extname.bind(e.$Zg),e.$9g=e.$Zg.dirname.bind(e.$Zg),e.$0g=e.$Zg.joinPath.bind(e.$Zg),e.$$g=e.$Zg.normalizePath.bind(e.$Zg),e.$_g=e.$Zg.relativePath.bind(e.$Zg),e.$ah=e.$Zg.resolvePath.bind(e.$Zg),e.$bh=e.$Zg.isAbsolutePath.bind(e.$Zg),e.$ch=e.$Zg.isEqualAuthority.bind(e.$Zg),e.$dh=e.$Zg.hasTrailingPathSeparator.bind(e.$Zg),e.$eh=e.$Zg.removeTrailingPathSeparator.bind(e.$Zg),e.$fh=e.$Zg.addTrailingPathSeparator.bind(e.$Zg);function W(D,n){const r=[];for(let h=0;h<D.length;h++){const I=n(D[h]);D.some((U,$)=>$===h?!1:(0,e.$4g)(I,n(U)))||r.push(D[h])}return r}var V;(function(D){D.META_DATA_LABEL="label",D.META_DATA_DESCRIPTION="description",D.META_DATA_SIZE="size",D.META_DATA_MIME="mime";function n(r){const h=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach($=>{const[L,X]=$.split(":");L&&X&&h.set(L,X)});const U=r.path.substring(0,r.path.indexOf(";"));return U&&h.set(D.META_DATA_MIME,U),h}D.parseMetaData=n})(V||(e.DataUri=V={}));function G(D,n,r){if(n){let h=D.path;return h&&h[0]!==O.$hc.sep&&(h=O.$hc.sep+h),D.with({scheme:r,authority:n,path:h})}return D.with({scheme:r})}}),define(ue[8],ae([0,1,13,12,17,18,7,3,10,19]),function(ce,e,A,E,O,w,m,y,q,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Zh=e.$Xh=e.$Wh=e.$Vh=e.$Uh=e.Promises=e.$Th=e.$Sh=e.$Rh=e.$Ph=e.$Oh=e.$Nh=e.$Mh=e.$Lh=e.$Kh=e.$Jh=e.$Ih=e.$Hh=e.$Gh=e.$Fh=e.$Eh=e.$Dh=e.$Ch=e.$wh=e.$vh=e.$uh=e.$th=e.$sh=e.$rh=e.$qh=void 0,e.$ih=W,e.$jh=V,e.$kh=G,e.$lh=D,e.$mh=n,e.$nh=r,e.$oh=h,e.$ph=I,e.$xh=Y,e.$yh=s,e.$zh=d,e.$Ah=j,e.$Bh=B,e.$Qh=u,e.$Yh=re;function W(l){return!!l&&typeof l.then=="function"}function V(l){const t=new A.$pe,i=l(t.token),c=new Promise((o,k)=>{const te=t.token.onCancellationRequested(()=>{te.dispose(),k(new E.$5)});Promise.resolve(i).then(ie=>{te.dispose(),t.dispose(),o(ie)},ie=>{te.dispose(),t.dispose(),k(ie)})});return new class{cancel(){t.cancel(),t.dispose()}then(o,k){return c.then(o,k)}catch(o){return this.then(void 0,o)}finally(o){return c.finally(o)}}}function G(l,t,i){return new Promise((c,o)=>{const k=t.onCancellationRequested(()=>{k.dispose(),c(i)});l.then(c,o).finally(()=>k.dispose())})}function D(l,t){return new Promise((i,c)=>{const o=t.onCancellationRequested(()=>{o.dispose(),c(new E.$5)});l.then(i,c).finally(()=>o.dispose())})}async function n(l){let t=-1;const i=l.map((c,o)=>c.then(k=>(t=o,k)));try{return await Promise.race(i)}finally{l.forEach((c,o)=>{o!==t&&c.cancel()})}}function r(l,t,i){let c;const o=setTimeout(()=>{c?.(void 0),i?.()},t);return Promise.race([l.finally(()=>clearTimeout(o)),new Promise(k=>c=k)])}function h(l){return new Promise((t,i)=>{const c=l();W(c)?c.then(t,i):t(c)})}function I(){let l,t;return{promise:new Promise((c,o)=>{l=c,t=o}),resolve:l,reject:t}}class U{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const c=this.queue(this.d);return this.d=null,c};this.b=new Promise(c=>{this.a.then(i,i).then(c)})}return new Promise((i,c)=>{this.b.then(i,c)})}return this.a=t(),new Promise((i,c)=>{this.a.then(o=>{this.a=null,i(o)},o=>{this.a=null,c(o)})})}dispose(){this.f=!0}}e.$qh=U;class ${constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$rh=$;class L{constructor(){this.a=new Map}queue(t,i){const o=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===o&&this.a.delete(t)});return this.a.set(t,o),o}}e.$sh=L;const X=(l,t)=>{let i=!0;const c=setTimeout(()=>{i=!1,t()},l);return{isTriggered:()=>i,dispose:()=>{clearTimeout(c),i=!1}}},v=l=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,l())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class F{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((o,k)=>{this.d=o,this.f=k}).then(()=>{if(this.b=null,this.d=null,this.g){const o=this.g;return this.g=null,o()}}));const c=()=>{this.a=null,this.d?.(null)};return this.a=i===q.$be?v(c):X(i,c),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new E.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$th=F;class C{constructor(t){this.a=new F(t),this.b=new U}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$uh=C;class p{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$vh=p;class x extends p{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$wh=x;function Y(l,t){return t?new Promise((i,c)=>{const o=setTimeout(()=>{k.dispose(),i()},l),k=t.onCancellationRequested(()=>{clearTimeout(o),k.dispose(),c(new E.$5)})}):V(i=>Y(l,i))}function s(l,t=0,i){const c=setTimeout(()=>{l(),i&&o.dispose()},t),o=(0,w.$Tc)(()=>{clearTimeout(c),i?.deleteAndLeak(o)});return i?.add(o),o}function d(l){const t=[];let i=0;const c=l.length;function o(){return i<c?l[i++]():null}function k(te){te!=null&&t.push(te);const ie=o();return ie?ie.then(k):Promise.resolve(t)}return Promise.resolve(null).then(k)}function j(l,t=c=>!!c,i=null){let c=0;const o=l.length,k=()=>{if(c>=o)return Promise.resolve(i);const te=l[c++];return Promise.resolve(te()).then(de=>t(de)?Promise.resolve(de):k())};return k()}function B(l,t=c=>!!c,i=null){if(l.length===0)return Promise.resolve(i);let c=l.length;const o=()=>{c=-1;for(const k of l)k.cancel?.()};return new Promise((k,te)=>{for(const ie of l)ie.then(de=>{--c>=0&&t(de)?(o(),k(de)):c===0&&k(i)}).catch(de=>{--c>=0&&(o(),te(de))})})}class Q{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new O.$ee}whenIdle(){return this.size>0?O.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,c)=>{this.g.push({factory:t,c:i,e:c}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$Ch=Q;class S extends Q{constructor(){super(1)}}e.$Dh=S;class J{constructor(){this.a=new b,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$Eh=J;class le{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new z;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=m.$Zg){const c=i.getComparisonKey(t);return this.a.get(c)?.size??0}queueFor(t,i,c=m.$Zg){const o=c.getComparisonKey(t);let k=this.a.get(o);if(!k){k=new S;const te=this.f++,ie=O.Event.once(k.onDrained)(()=>{k?.dispose(),this.a.delete(o),this.h(),this.d?.deleteAndDispose(te),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new w.$5c),this.d.set(te,ie),this.a.set(o,k)}return k.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$Fh=le;class se{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$Gh=se;class he{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,c=globalThis){this.cancel();const o=c.setInterval(()=>{t()},i);this.d=(0,w.$Tc)(()=>{c.clearInterval(o),this.d=void 0})}dispose(){this.cancel()}}e.$Hh=he;class N{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$Ih=N;class ne{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$Jh=ne;class _ extends N{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$Kh=_;class oe extends w.$Vc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new w.$Wc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new N(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$Lh=oe,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$Nh=(l,t)=>{(0,y.$v)(()=>{if(i)return;const c=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,c-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$Nh=(l,t,i)=>{const c=l.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let o=!1;return{dispose(){o||(o=!0,l.cancelIdleCallback(c))}}},e.$Mh=l=>(0,e.$Nh)(globalThis,l)}();class a{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(c){this.l=c}finally{this.g=!0}},this.f=(0,e.$Nh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$Oh=a;class f extends a{constructor(t){super(globalThis,t)}}e.$Ph=f;async function u(l,t,i){let c;for(let o=0;o<i;o++)try{return await l()}catch(k){c=k,await Y(t)}throw c}class b{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,c){return this.a={taskId:t,cancel:()=>c?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{const{promise:i,resolve:c,reject:o}=I();this.b={run:t,promise:i,promiseResolve:c,promiseReject:o}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$Rh=b;class P{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$Sh=P;var R;(function(l){l[l.Resolved=0]="Resolved",l[l.Rejected=1]="Rejected"})(R||(R={}));class z{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}cancel(){return this.error(new E.$5)}}e.$Th=z;var g;(function(l){async function t(c){let o;const k=await Promise.all(c.map(te=>te.then(ie=>ie,ie=>{o||(o=ie)})));if(typeof o<"u")throw o;return k}l.settled=t;function i(c){return new Promise(async(o,k)=>{try{await c(o,k)}catch(te){k(te)}})}l.withAsyncBody=i})(g||(e.Promises=g={}));class T{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new E.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$Uh=T;class H{constructor(t){this.b=t,this.a=new K.$V(()=>new T(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$Vh=H;var Z;(function(l){l[l.Initial=0]="Initial",l[l.DoneOK=1]="DoneOK",l[l.DoneError=2]="DoneError"})(Z||(Z={}));class M{static fromArray(t){return new M(i=>{i.emitMany(t)})}static fromPromise(t){return new M(async i=>{i.emitMany(await t)})}static fromPromises(t){return new M(async i=>{await Promise.all(t.map(async c=>i.emitOne(await c)))})}static merge(t){return new M(async i=>{await Promise.all(t.map(async c=>{for await(const o of c)i.emitOne(o)}))})}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new O.$ee,queueMicrotask(async()=>{const c={emitOne:o=>this.h(o),emitMany:o=>this.j(o),reject:o=>this.l(o)};try{await Promise.resolve(t(c)),this.k()}catch(o){this.l(o)}finally{c.emitOne=void 0,c.emitMany=void 0,c.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await O.Event.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new M(async c=>{for await(const o of t)c.emitOne(i(o))})}map(t){return M.map(this,t)}static filter(t,i){return new M(async c=>{for await(const o of t)i(o)&&c.emitOne(o)})}filter(t){return M.filter(this,t)}static coalesce(t){return M.filter(t,i=>!!i)}coalesce(){return M.coalesce(this)}static async toPromise(t){const i=[];for await(const c of t)i.push(c);return i}toPromise(){return M.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}}e.$Wh=M,M.EMPTY=M.fromArray([]);class ee extends M{constructor(t,i){super(i),this.m=t}cancel(){this.m.cancel()}}e.$Xh=ee;function re(l){const t=new A.$pe,i=l(t.token);return new ee(t,async c=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),t.dispose(),c.reject(new E.$5)});try{for await(const k of i){if(t.token.isCancellationRequested)return;c.emitOne(k)}o.dispose(),t.dispose()}catch(k){o.dispose(),t.dispose(),c.reject(k)}})}class fe{constructor(t){this.a=new z,this.b=new M(o=>{if(i){o.reject(i);return}return c&&o.emitMany(c),this.d=k=>o.reject(k),this.f=k=>o.emitOne(k),this.a.p},t);let i,c;this.f=o=>{c||(c=[]),c.push(o)},this.d=o=>{i||(i=o)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$Zh=fe}),define(ue[9],ae([0,1,20,8,5,21,2,3,4]),function(ce,e,A,E,O,w,m,y,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$nk=e.$mk=void 0,e.$lk=K,e.$ok=n,e.$pk=S,e.$qk=J,e.$rk=le,e.$sk=se,e.$tk=he,e.$uk=oe;function K(){return Object.create(null)}e.$mk="**",e.$nk="/";const W="[/\\\\]",V="[^/\\\\]",G=/\//g;function D(a,f){switch(a){case 0:return"";case 1:return`${V}*?`;default:return`(?:${W}|${V}+${W}${f?`|${W}${V}+`:""})*?`}}function n(a,f){if(!a)return[];const u=[];let b=!1,P=!1,R="";for(const z of a){switch(z){case f:if(!b&&!P){u.push(R),R="";continue}break;case"{":b=!0;break;case"}":b=!1;break;case"[":P=!0;break;case"]":P=!1;break}R+=z}return R&&u.push(R),u}function r(a){if(!a)return"";let f="";const u=n(a,e.$nk);if(u.every(b=>b===e.$mk))f=".*";else{let b=!1;u.forEach((P,R)=>{if(P===e.$mk){if(b)return;f+=D(2,R===u.length-1)}else{let z=!1,g="",T=!1,H="";for(const Z of P){if(Z!=="}"&&z){g+=Z;continue}if(T&&(Z!=="]"||!H)){let M;Z==="-"?M=Z:(Z==="^"||Z==="!")&&!H?M="^":Z===e.$nk?M="":M=(0,q.$af)(Z),H+=M;continue}switch(Z){case"{":z=!0;continue;case"[":T=!0;continue;case"}":{const ee=`(?:${n(g,",").map(re=>r(re)).join("|")})`;f+=ee,z=!1,g="";break}case"]":{f+="["+H+"]",T=!1,H="";break}case"?":f+=V;continue;case"*":f+=D(1);continue;default:f+=(0,q.$af)(Z)}}R<u.length-1&&(u[R+1]!==e.$mk||R+2<u.length)&&(f+=W)}b=P===e.$mk})}return f}const h=/^\*\*\/\*\.[\w\.-]+$/,I=/^\*\*\/([\w\.-]+)\/?$/,U=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,$=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,L=/^\*\*((\/[\w\.-]+)+)\/?$/,X=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,v=new w.$Ec(1e4),F=function(){return!1},C=function(){return null};function p(a,f){if(!a)return C;let u;typeof a!="string"?u=a.pattern:u=a,u=u.trim();const b=`${u}_${!!f.trimForExclusions}`;let P=v.get(b);if(P)return x(P,a);let R;return h.test(u)?P=s(u.substr(4),u):(R=I.exec(Y(u,f)))?P=d(R[1],u):(f.trimForExclusions?$:U).test(u)?P=j(u,f):(R=L.exec(Y(u,f)))?P=B(R[1].substr(1),u,!0):(R=X.exec(Y(u,f)))?P=B(R[1],u,!1):P=Q(u),v.set(b,P),x(P,a)}function x(a,f){if(typeof f=="string")return a;const u=function(b,P){return(0,O.$vg)(b,f.base,!y.$e)?a((0,q.$ff)(b.substr(f.base.length),m.sep),P):null};return u.allBasenames=a.allBasenames,u.allPaths=a.allPaths,u.basenames=a.basenames,u.patterns=a.patterns,u}function Y(a,f){return f.trimForExclusions&&a.endsWith("/**")?a.substr(0,a.length-2):a}function s(a,f){return function(u,b){return typeof u=="string"&&u.endsWith(a)?f:null}}function d(a,f){const u=`/${a}`,b=`\\${a}`,P=function(z,g){return typeof z!="string"?null:g?g===a?f:null:z===a||z.endsWith(u)||z.endsWith(b)?f:null},R=[a];return P.basenames=R,P.patterns=[f],P.allBasenames=R,P}function j(a,f){const u=_(a.slice(1,-1).split(",").map(g=>p(g,f)).filter(g=>g!==C),a),b=u.length;if(!b)return C;if(b===1)return u[0];const P=function(g,T){for(let H=0,Z=u.length;H<Z;H++)if(u[H](g,T))return a;return null},R=u.find(g=>!!g.allBasenames);R&&(P.allBasenames=R.allBasenames);const z=u.reduce((g,T)=>T.allPaths?g.concat(T.allPaths):g,[]);return z.length&&(P.allPaths=z),P}function B(a,f,u){const b=m.sep===m.$hc.sep,P=b?a:a.replace(G,m.sep),R=m.sep+P,z=m.$hc.sep+a;let g;return u?g=function(T,H){return typeof T=="string"&&(T===P||T.endsWith(R)||!b&&(T===a||T.endsWith(z)))?f:null}:g=function(T,H){return typeof T=="string"&&(T===P||!b&&T===a)?f:null},g.allPaths=[(u?"*/":"./")+a],g}function Q(a){try{const f=new RegExp(`^${r(a)}$`);return function(u){return f.lastIndex=0,typeof u=="string"&&f.test(u)?a:null}}catch{return C}}function S(a,f,u){return!a||typeof f!="string"?!1:J(a)(f,void 0,u)}function J(a,f={}){if(!a)return F;if(typeof a=="string"||le(a)){const u=p(a,f);if(u===C)return F;const b=function(P,R){return!!u(P,R)};return u.allBasenames&&(b.allBasenames=u.allBasenames),u.allPaths&&(b.allPaths=u.allPaths),b}return N(a,f)}function le(a){const f=a;return f?typeof f.base=="string"&&typeof f.pattern=="string":!1}function se(a){return a.allBasenames||[]}function he(a){return a.allPaths||[]}function N(a,f){const u=_(Object.getOwnPropertyNames(a).map(g=>ne(g,a[g],f)).filter(g=>g!==C)),b=u.length;if(!b)return C;if(!u.some(g=>!!g.requiresSiblings)){if(b===1)return u[0];const g=function(Z,M){let ee;for(let re=0,fe=u.length;re<fe;re++){const l=u[re](Z,M);if(typeof l=="string")return l;(0,E.$ih)(l)&&(ee||(ee=[]),ee.push(l))}return ee?(async()=>{for(const re of ee){const fe=await re;if(typeof fe=="string")return fe}return null})():null},T=u.find(Z=>!!Z.allBasenames);T&&(g.allBasenames=T.allBasenames);const H=u.reduce((Z,M)=>M.allPaths?Z.concat(M.allPaths):Z,[]);return H.length&&(g.allPaths=H),g}const P=function(g,T,H){let Z,M;for(let ee=0,re=u.length;ee<re;ee++){const fe=u[ee];fe.requiresSiblings&&H&&(T||(T=(0,m.$oc)(g)),Z||(Z=T.substr(0,T.length-(0,m.$pc)(g).length)));const l=fe(g,T,Z,H);if(typeof l=="string")return l;(0,E.$ih)(l)&&(M||(M=[]),M.push(l))}return M?(async()=>{for(const ee of M){const re=await ee;if(typeof re=="string")return re}return null})():null},R=u.find(g=>!!g.allBasenames);R&&(P.allBasenames=R.allBasenames);const z=u.reduce((g,T)=>T.allPaths?g.concat(T.allPaths):g,[]);return z.length&&(P.allPaths=z),P}function ne(a,f,u){if(f===!1)return C;const b=p(a,u);if(b===C)return C;if(typeof f=="boolean")return b;if(f){const P=f.when;if(typeof P=="string"){const R=(z,g,T,H)=>{if(!H||!b(z,g))return null;const Z=P.replace("$(basename)",()=>T),M=H(Z);return(0,E.$ih)(M)?M.then(ee=>ee?a:null):M?a:null};return R.requiresSiblings=!0,R}}return b}function _(a,f){const u=a.filter(g=>!!g.basenames);if(u.length<2)return a;const b=u.reduce((g,T)=>{const H=T.basenames;return H?g.concat(H):g},[]);let P;if(f){P=[];for(let g=0,T=b.length;g<T;g++)P.push(f)}else P=u.reduce((g,T)=>{const H=T.patterns;return H?g.concat(H):g},[]);const R=function(g,T){if(typeof g!="string")return null;if(!T){let Z;for(Z=g.length;Z>0;Z--){const M=g.charCodeAt(Z-1);if(M===47||M===92)break}T=g.substr(Z)}const H=b.indexOf(T);return H!==-1?P[H]:null};R.basenames=b,R.patterns=P,R.allBasenames=b;const z=a.filter(g=>!g.basenames);return z.push(R),z}function oe(a,f){return(0,A.$ub)(a,f,(u,b)=>typeof u=="string"&&typeof b=="string"?u===b:typeof u!="string"&&typeof b!="string"?u.base===b.base&&u.pattern===b.pattern:!1)}}),define(ue[14],ae([0,1,22]),function(ce,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dqc=void 0;const E=(O,w,m)=>{let y;if(O[0]===255&&O[1]===254)y=new TextDecoder("utf-16le").decode(O);else if(O[0]===254&&O[1]===255)y=new TextDecoder("utf-16be").decode(O);else if(y=new TextDecoder("utf8").decode(O),y.slice(0,1e3).includes("\uFFFD")&&O.includes(0))return[];const q=[],K=[];let W=null,V=m.remainingResultQuota;for(;V>=0&&(W=w.exec(y));)K.push({matchStartIndex:W.index,matchedText:W[0]}),V--;if(K.length){const G=new Set,D=new Set,n=[],r=L=>y.slice(n[L].start,n[L].end);let h=0,I=null;const U=/\r?\n/g;for(;I=U.exec(y);)n.push({start:h,end:I.index}),h=I.index+I[0].length;h<y.length&&n.push({start:h,end:y.length});let $=0;for(const{matchStartIndex:L,matchedText:X}of K){if(V<0)break;for(;n[$+1]&&L>n[$].end;)$++;let v=$;for(;n[v+1]&&L+X.length>n[v].end;)v++;if(m.beforeContext)for(let s=Math.max(0,$-m.beforeContext);s<$;s++)G.add(s);let F="",C=0;for(let s=$;s<=v;s++){let d=r(s);m.previewOptions?.charsPerLine&&d.length>m.previewOptions.charsPerLine&&(C=Math.max(L-n[$].start-20,0),d=d.substr(C,m.previewOptions.charsPerLine)),F+=`${d}
`,D.add(s)}const p=new A.$vt($,L-n[$].start,v,L+X.length-n[v].start),x=new A.$vt(0,L-n[$].start-C,v-$,L+X.length-n[v].start-(v===$?C:0)),Y={ranges:p,preview:{text:F,matches:x}};if(q.push(Y),m.afterContext)for(let s=v+1;s<=Math.min(v+m.afterContext,n.length-1);s++)G.add(s)}for(const L of G)D.has(L)||q.push({text:r(L),lineNumber:L+1})}return q};e.$Dqc=E}),define(ue[15],ae([0,1,9]),function(ce,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eqb=void 0;class E{constructor(w,m,y){if(this.b=m,this.c=y,m[m.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");m[m.length-1]!=="/"&&(m+="/"),this.a=this.e(w,this.b,this.c)}updateContents(w){this.a=this.e(w,this.b,this.c)}isPathIncludedInTraversal(w,m){if(w[0]!=="/"||w[w.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+w);return!this.a(w,m)}isArbitraryPathIgnored(w,m){if(w[0]!=="/"||w[w.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+w);const y=w.split("/").filter(W=>W);let q=!1,K="";for(let W=0;W<y.length;W++){const V=W===y.length-1,G=y[W];if(K=K+"/"+G,!this.isPathIncludedInTraversal(K,V?m:!0)){q=!0;break}}return q}d(w,m,y){const q=w.map(W=>this.f(W,m)),K=Object.create(null);for(const W of q)K[W]=!0;return A.$qk(K,{trimForExclusions:y})}e(w,m,y){const q=w.split(`
`).map($=>$.trim()).filter($=>$&&$[0]!=="#"),K=q.filter($=>!$.endsWith("/")),W=K.filter($=>!$.includes("!")),V=this.d(W,m,!0),G=K.filter($=>$.includes("!")).map($=>$.replace(/!/g,"")),D=this.d(G,m,!1),n=q.filter($=>!$.includes("!")),r=this.d(n,m,!0),h=q.filter($=>$.includes("!")).map($=>$.replace(/!/g,"")),I=this.d(h,m,!1);return($,L)=>$.startsWith(m)?L&&r($)&&!I($)||V($)&&!D($)?!0:y?y.a($,L):!1:!1}f(w,m){const y=w.indexOf("/");return y===-1||y===w.length-1?w="**/"+w:(y===0?m.slice(-1)==="/"&&(w=w.slice(1)):m.slice(-1)!=="/"&&(w="/"+w),w=m+w),w}}e.$eqb=E}),define(ue[23],ae([0,1,9,6,2,13,14,15,4,8,7]),function(ce,e,A,E,O,w,m,y,q,K,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=void 0,e.create=r;const V=!1,G=+new Date,D={},n=async(v,F)=>{if(!V)return F();const C=Date.now(),p=(D[v]??0)+1;console.info(v,p,"starting",Math.round((C-G)*10)/1e4),D[v]=p;const x=await F(),Y=Date.now();return console.info(v,p,"took",Y-C),x};function r(v){return new h(v)}class h{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const C=new w.$pe;return this.cancellationTokens.set(F,C),C}async listDirectory(F,C,p,x,Y){const s=U(p),d=new W.$Yg(()=>x),j=this.g(Y),B=[];let Q=!1,S=0;const J=C.maxResults||512,le=C.filePattern?se=>C.filePattern.split("").every(he=>se.includes(he)):se=>!0;return await n("listDirectory",()=>this.h(F,$(C),s,d,se=>{if(le(se.name))return S++,J&&S>J&&(Q=!0,j.cancel()),B.push(se.path)},j.token)),{results:B,limitHit:Q}}async searchDirectory(F,C,p,x,Y){const s=U(p),d=new W.$Yg(()=>x);return n("searchInFiles",async()=>{const j=this.g(Y),B=[],Q=I(C.contentPattern),S=[];let J=0,le=0;const se=!1,he=async N=>{if(j.token.isCancellationRequested)return;J++;const ne=await N.resolve();if(j.token.isCancellationRequested)return;const _=new Uint8Array(ne),oe=(0,m.$Dqc)(_,Q,{afterContext:C.afterContext??0,beforeContext:C.beforeContext??0,previewOptions:C.previewOptions,remainingResultQuota:C.maxResults?C.maxResults-le:1e4});if(oe.length){le+=oe.length,C.maxResults&&le>C.maxResults&&j.cancel();const a={resource:E.URI.joinPath(s.folder,N.path),results:oe};this.d.sendTextSearchMatch(a,Y),B.push(a)}};return await n("walkFolderToResolve",()=>this.h(F,$(C),s,d,async N=>S.push(he(N)),j.token)),await n("resolveOngoingProcesses",()=>Promise.all(S)),V&&console.log("Searched in",J,"files"),{results:B,limitHit:se}})}async h(F,C,p,x,Y,s){const d=A.$qk(p.excludePattern??{},{trimForExclusions:!0}),j=(N,ne,_)=>(N=N.slice(1),!!(d(N,ne,_)||L(C,N))),B=(N,ne,_)=>(N=N.slice(1),!(d(N,ne,_)||!X(C,N,x))),Q=(N,ne)=>({type:"file",name:N.name,path:ne,resolve:()=>N.getFile().then(oe=>oe.arrayBuffer())}),S=N=>N.kind==="directory",J=N=>N.kind==="file",le=async(N,ne,_)=>{if(!p.disregardIgnoreFiles){const a=await Promise.all([N.getFileHandle(".gitignore").catch(f=>{}),N.getFileHandle(".ignore").catch(f=>{})]);await Promise.all(a.map(async f=>{if(!f)return;const u=new TextDecoder("utf8").decode(new Uint8Array(await(await f.getFile()).arrayBuffer()));_=new y.$eqb(u,ne,_)}))}const oe=K.Promises.withAsyncBody(async a=>{const f=[],u=[],b=[],P=new Set;for await(const R of N.entries())b.push(R),P.add(R[0]);for(const[R,z]of b){if(s.isCancellationRequested)break;const g=ne+R;if(_&&!_.isPathIncludedInTraversal(g,z.kind==="directory"))continue;const T=H=>P.has(H);S(z)&&!j(g,R,T)?u.push(le(z,g+"/",_)):J(z)&&B(g,R,T)&&f.push(Q(z,g))}a([...await Promise.all(u),...f])});return{type:"dir",name:N.name,entries:oe}},se=async(N,ne)=>{s.isCancellationRequested||await Promise.all((await N.entries).sort((_,oe)=>-(_.type==="dir"?0:1)+(oe.type==="dir"?0:1)).map(async _=>_.type==="dir"?se(_,ne):ne(_)))},he=await n("process",()=>le(F,"/"));await n("resolve",()=>se(he,Y))}}e.LocalFileSearchSimpleWorker=h;function I(v){return(0,q.$jf)(v.pattern,!!v.isRegExp,{wholeWord:v.isWordMatch,global:!0,matchCase:v.isCaseSensitive,multiline:!0,unicode:!0})}function U(v){return{...v,folder:E.URI.revive(v.folder)}}function $(v){return{...v,extraFileResources:v.extraFileResources?.map(F=>E.URI.revive(F)),folderQueries:v.folderQueries.map(F=>U(F))}}function L(v,F){return!!(v.excludePattern&&A.$pk(v.excludePattern,F))}function X(v,F,C){return v.excludePattern&&A.$pk(v.excludePattern,F)?!1:v.includePattern||v.usingSearchPaths?v.includePattern&&A.$pk(v.includePattern,F)?!0:v.usingSearchPaths?!!v.folderQueries&&v.folderQueries.some(p=>{const x=p.folder,Y=E.URI.file(F);if(C.isEqualOrParent(Y,x)){const s=O.$mc(x.path,Y.path);return!p.includePattern||!!A.$pk(p.includePattern,s)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=localFileSearch.js.map
